(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const Zi=!1;var Ri=Array.isArray,_a=Array.prototype.indexOf,Li=Array.from,ma=Object.defineProperty,St=Object.getOwnPropertyDescriptor,Zs=Object.getOwnPropertyDescriptors,ya=Object.prototype,wa=Array.prototype,Ni=Object.getPrototypeOf,es=Object.isExtensible;function Qt(r){return typeof r=="function"}const tt=()=>{};function ba(r){return r()}function vi(r){for(var e=0;e<r.length;e++)r[e]()}const Ge=2,eo=4,Rn=8,Ln=16,ut=32,dr=64,bn=128,De=256,En=512,be=1024,Xe=2048,Tt=4096,nt=8192,Nn=16384,to=32768,qr=65536,Ea=1<<17,Sa=1<<19,ro=1<<20,gi=1<<21,kt=Symbol("$state"),no=Symbol("legacy props"),ka=Symbol("");function io(r){return r===this.v}function Mi(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function Ui(r){return!Mi(r,this.v)}function Ta(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Oa(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function $a(r){throw new Error("https://svelte.dev/e/effect_orphan")}function Aa(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Pa(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function xa(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ca(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Da(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let fr=!1,ja=!1;function Ia(){fr=!0}const Fi=1,Bi=2,so=4,Ra=8,La=16,Na=1,Ma=2,oo=4,Ua=8,Fa=16,Ba=4,qa=1,Ha=2,ke=Symbol(),za="http://www.w3.org/1999/xhtml",Wa="http://www.w3.org/2000/svg";function Ga(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let ee=null;function ts(r){ee=r}function pr(r,e=!1,t){var n=ee={p:ee,c:null,d:!1,e:null,m:!1,s:r,x:null,l:null};fr&&!e&&(ee.l={s:null,u:null,r1:[],r2:sr(!1)}),go(()=>{n.d=!0})}function vr(r){const e=ee;if(e!==null){const o=e.e;if(o!==null){var t=V,n=J;e.e=null;try{for(var i=0;i<o.length;i++){var s=o[i];Qe(s.effect),Ne(s.reaction),zr(s.fn)}}finally{Qe(t),Ne(n)}}ee=e.p,e.m=!0}return{}}function Mn(){return!fr||ee!==null&&ee.l===null}function jt(r){if(typeof r!="object"||r===null||kt in r)return r;const e=Ni(r);if(e!==ya&&e!==wa)return r;var t=new Map,n=Ri(r),i=ft(0),s=J,o=a=>{var l=J;Ne(s);var u=a();return Ne(l),u};return n&&t.set("length",ft(r.length)),new Proxy(r,{defineProperty(a,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&xa();var c=t.get(l);return c===void 0?(c=o(()=>ft(u.value)),t.set(l,c)):re(c,o(()=>jt(u.value))),!0},deleteProperty(a,l){var u=t.get(l);if(u===void 0)l in a&&(t.set(l,o(()=>ft(ke))),Jn(i));else{if(n&&typeof l=="string"){var c=t.get("length"),h=Number(l);Number.isInteger(h)&&h<c.v&&re(c,h)}re(u,ke),Jn(i)}return!0},get(a,l,u){var f;if(l===kt)return r;var c=t.get(l),h=l in a;if(c===void 0&&(!h||(f=St(a,l))!=null&&f.writable)&&(c=o(()=>ft(jt(h?a[l]:ke))),t.set(l,c)),c!==void 0){var d=I(c);return d===ke?void 0:d}return Reflect.get(a,l,u)},getOwnPropertyDescriptor(a,l){var u=Reflect.getOwnPropertyDescriptor(a,l);if(u&&"value"in u){var c=t.get(l);c&&(u.value=I(c))}else if(u===void 0){var h=t.get(l),d=h==null?void 0:h.v;if(h!==void 0&&d!==ke)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return u},has(a,l){var d;if(l===kt)return!0;var u=t.get(l),c=u!==void 0&&u.v!==ke||Reflect.has(a,l);if(u!==void 0||V!==null&&(!c||(d=St(a,l))!=null&&d.writable)){u===void 0&&(u=o(()=>ft(c?jt(a[l]):ke)),t.set(l,u));var h=I(u);if(h===ke)return!1}return c},set(a,l,u,c){var m;var h=t.get(l),d=l in a;if(n&&l==="length")for(var f=u;f<h.v;f+=1){var p=t.get(f+"");p!==void 0?re(p,ke):f in a&&(p=o(()=>ft(ke)),t.set(f+"",p))}h===void 0?(!d||(m=St(a,l))!=null&&m.writable)&&(h=o(()=>ft(void 0)),re(h,o(()=>jt(u))),t.set(l,h)):(d=h.v!==ke,re(h,o(()=>jt(u))));var v=Reflect.getOwnPropertyDescriptor(a,l);if(v!=null&&v.set&&v.set.call(c,u),!d){if(n&&typeof l=="string"){var g=t.get("length"),_=Number(l);Number.isInteger(_)&&_>=g.v&&re(g,_+1)}Jn(i)}return!0},ownKeys(a){I(i);var l=Reflect.ownKeys(a).filter(h=>{var d=t.get(h);return d===void 0||d.v!==ke});for(var[u,c]of t)c.v!==ke&&!(u in a)&&l.push(u);return l},setPrototypeOf(){Ca()}})}function Jn(r,e=1){re(r,r.v+e)}function Nr(r){var e=Ge|Xe,t=J!==null&&(J.f&Ge)!==0?J:null;return V===null||t!==null&&(t.f&De)!==0?e|=De:V.f|=ro,{ctx:ee,deps:null,effects:null,equals:io,f:e,fn:r,reactions:null,rv:0,v:null,wv:0,parent:t??V}}function We(r){const e=Nr(r);return e.equals=Ui,e}function ao(r){var e=r.effects;if(e!==null){r.effects=null;for(var t=0;t<e.length;t+=1)st(e[t])}}function Ja(r){for(var e=r.parent;e!==null;){if((e.f&Ge)===0)return e;e=e.parent}return null}function lo(r){var e,t=V;Qe(Ja(r));try{ao(r),e=Oo(r)}finally{Qe(t)}return e}function uo(r){var e=lo(r),t=(bt||(r.f&De)!==0)&&r.deps!==null?Tt:be;Me(r,t),r.equals(e)||(r.v=e,r.wv=ko())}const Mr=new Map;function sr(r,e){var t={f:0,v:r,reactions:null,equals:io,rv:0,wv:0};return t}function ft(r,e){const t=sr(r);return nl(t),t}function Le(r,e=!1){var n;const t=sr(r);return e||(t.equals=Ui),fr&&ee!==null&&ee.l!==null&&((n=ee.l).s??(n.s=[])).push(t),t}function re(r,e,t=!1){J!==null&&!Ye&&Mn()&&(J.f&(Ge|Ln))!==0&&!(we!=null&&we.includes(r))&&Da();let n=t?jt(e):e;return _i(r,n)}function _i(r,e){if(!r.equals(e)){var t=r.v;Jr?Mr.set(r,e):Mr.set(r,t),r.v=e,(r.f&Ge)!==0&&((r.f&Xe)!==0&&lo(r),Me(r,(r.f&De)===0?be:Tt)),r.wv=ko(),co(r,Xe),Mn()&&V!==null&&(V.f&be)!==0&&(V.f&(ut|dr))===0&&(je===null?il([r]):je.push(r))}return e}function rs(r,e=1){var t=I(r),n=e===1?t++:t--;return re(r,t),n}function co(r,e){var t=r.reactions;if(t!==null)for(var n=Mn(),i=t.length,s=0;s<i;s++){var o=t[s],a=o.f;(a&Xe)===0&&(!n&&o===V||(Me(o,e),(a&(be|De))!==0&&((a&Ge)!==0?co(o,Tt):Hn(o))))}}let Va=!1;var ns,ho,fo,po;function Ya(){if(ns===void 0){ns=window,ho=/Firefox/.test(navigator.userAgent);var r=Element.prototype,e=Node.prototype,t=Text.prototype;fo=St(e,"firstChild").get,po=St(e,"nextSibling").get,es(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),es(t)&&(t.__t=void 0)}}function Hr(r=""){return document.createTextNode(r)}function or(r){return fo.call(r)}function Un(r){return po.call(r)}function H(r,e){return or(r)}function Je(r,e){{var t=or(r);return t instanceof Comment&&t.data===""?Un(t):t}}function se(r,e=1,t=!1){let n=r;for(;e--;)n=Un(n);return n}function Ka(r){r.textContent=""}function vo(r){V===null&&J===null&&$a(),J!==null&&(J.f&De)!==0&&V===null&&Oa(),Jr&&Ta()}function Xa(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function gr(r,e,t,n=!0){var i=V,s={ctx:ee,deps:null,nodes_start:null,nodes_end:null,f:r|Xe,first:null,fn:e,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(t)try{qn(s),s.f|=to}catch(l){throw st(s),l}else e!==null&&Hn(s);var o=t&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(ro|bn))===0;if(!o&&n&&(i!==null&&Xa(s,i),J!==null&&(J.f&Ge)!==0)){var a=J;(a.effects??(a.effects=[])).push(s)}return s}function go(r){const e=gr(Rn,null,!1);return Me(e,be),e.teardown=r,e}function mi(r){vo();var e=V!==null&&(V.f&ut)!==0&&ee!==null&&!ee.m;if(e){var t=ee;(t.e??(t.e=[])).push({fn:r,effect:V,reaction:J})}else{var n=zr(r);return n}}function Qa(r){return vo(),Wr(r)}function Za(r){const e=gr(dr,r,!0);return(t={})=>new Promise(n=>{t.outro?Ur(e,()=>{st(e),n(void 0)}):(st(e),n(void 0))})}function zr(r){return gr(eo,r,!1)}function Zt(r,e){var t=ee,n={effect:null,ran:!1};t.l.r1.push(n),n.effect=Wr(()=>{r(),!n.ran&&(n.ran=!0,re(t.l.r2,!0),ot(e))})}function _o(){var r=ee;Wr(()=>{if(I(r.l.r2)){for(var e of r.l.r1){var t=e.effect;(t.f&be)!==0&&Me(t,Tt),_r(t)&&qn(t),e.ran=!1}r.l.r2.v=!1}})}function Wr(r){return gr(Rn,r,!0)}function xe(r,e=[],t=Nr){const n=e.map(t);return Fn(()=>r(...n.map(I)))}function Fn(r,e=0){return gr(Rn|Ln|e,r,!0)}function ar(r,e=!0){return gr(Rn|ut,r,!0,e)}function mo(r){var e=r.teardown;if(e!==null){const t=Jr,n=J;is(!0),Ne(null);try{e.call(null)}finally{is(t),Ne(n)}}}function yo(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){var n=t.next;(t.f&dr)!==0?t.parent=null:st(t,e),t=n}}function el(r){for(var e=r.first;e!==null;){var t=e.next;(e.f&ut)===0&&st(e),e=t}}function st(r,e=!0){var t=!1;(e||(r.f&Sa)!==0)&&r.nodes_start!==null&&(tl(r.nodes_start,r.nodes_end),t=!0),yo(r,e&&!t),On(r,0),Me(r,Nn);var n=r.transitions;if(n!==null)for(const s of n)s.stop();mo(r);var i=r.parent;i!==null&&i.first!==null&&wo(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=null}function tl(r,e){for(;r!==null;){var t=r===e?null:Un(r);r.remove(),r=t}}function wo(r){var e=r.parent,t=r.prev,n=r.next;t!==null&&(t.next=n),n!==null&&(n.prev=t),e!==null&&(e.first===r&&(e.first=n),e.last===r&&(e.last=t))}function Ur(r,e){var t=[];qi(r,t,!0),bo(t,()=>{st(r),e&&e()})}function bo(r,e){var t=r.length;if(t>0){var n=()=>--t||e();for(var i of r)i.out(n)}else e()}function qi(r,e,t){if((r.f&nt)===0){if(r.f^=nt,r.transitions!==null)for(const o of r.transitions)(o.is_global||t)&&e.push(o);for(var n=r.first;n!==null;){var i=n.next,s=(n.f&qr)!==0||(n.f&ut)!==0;qi(n,e,s?t:!1),n=i}}}function Fr(r){Eo(r,!0)}function Eo(r,e){if((r.f&nt)!==0){r.f^=nt,(r.f&be)===0&&(r.f^=be),_r(r)&&(Me(r,Xe),Hn(r));for(var t=r.first;t!==null;){var n=t.next,i=(t.f&qr)!==0||(t.f&ut)!==0;Eo(t,i?e:!1),t=n}if(r.transitions!==null)for(const s of r.transitions)(s.is_global||e)&&s.in()}}let Sn=[];function rl(){var r=Sn;Sn=[],vi(r)}function Gr(r){Sn.length===0&&queueMicrotask(rl),Sn.push(r)}let dn=!1,yi=!1,kn=null,Lt=!1,Jr=!1;function is(r){Jr=r}let fn=[];let J=null,Ye=!1;function Ne(r){J=r}let V=null;function Qe(r){V=r}let we=null;function nl(r){J!==null&&J.f&gi&&(we===null?we=[r]:we.push(r))}let ye=null,$e=0,je=null;function il(r){je=r}let So=1,Tn=0,bt=!1;function ko(){return++So}function _r(r){var h;var e=r.f;if((e&Xe)!==0)return!0;if((e&Tt)!==0){var t=r.deps,n=(e&De)!==0;if(t!==null){var i,s,o=(e&En)!==0,a=n&&V!==null&&!bt,l=t.length;if(o||a){var u=r,c=u.parent;for(i=0;i<l;i++)s=t[i],(o||!((h=s==null?void 0:s.reactions)!=null&&h.includes(u)))&&(s.reactions??(s.reactions=[])).push(u);o&&(u.f^=En),a&&c!==null&&(c.f&De)===0&&(u.f^=De)}for(i=0;i<l;i++)if(s=t[i],_r(s)&&uo(s),s.wv>r.wv)return!0}(!n||V!==null&&!bt)&&Me(r,be)}return!1}function sl(r,e){for(var t=e;t!==null;){if((t.f&bn)!==0)try{t.fn(r);return}catch{t.f^=bn}t=t.parent}throw dn=!1,r}function ss(r){return(r.f&Nn)===0&&(r.parent===null||(r.parent.f&bn)===0)}function Bn(r,e,t,n){if(dn){if(t===null&&(dn=!1),ss(e))throw r;return}if(t!==null&&(dn=!0),sl(r,e),ss(e))throw r}function To(r,e,t=!0){var n=r.reactions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];we!=null&&we.includes(r)||((s.f&Ge)!==0?To(s,e,!1):e===s&&(t?Me(s,Xe):(s.f&be)!==0&&Me(s,Tt),Hn(s)))}}function Oo(r){var f;var e=ye,t=$e,n=je,i=J,s=bt,o=we,a=ee,l=Ye,u=r.f;ye=null,$e=0,je=null,bt=(u&De)!==0&&(Ye||!Lt||J===null),J=(u&(ut|dr))===0?r:null,we=null,ts(r.ctx),Ye=!1,Tn++,r.f|=gi;try{var c=(0,r.fn)(),h=r.deps;if(ye!==null){var d;if(On(r,$e),h!==null&&$e>0)for(h.length=$e+ye.length,d=0;d<ye.length;d++)h[$e+d]=ye[d];else r.deps=h=ye;if(!bt)for(d=$e;d<h.length;d++)((f=h[d]).reactions??(f.reactions=[])).push(r)}else h!==null&&$e<h.length&&(On(r,$e),h.length=$e);if(Mn()&&je!==null&&!Ye&&h!==null&&(r.f&(Ge|Tt|Xe))===0)for(d=0;d<je.length;d++)To(je[d],r);return i!==null&&i!==r&&(Tn++,je!==null&&(n===null?n=je:n.push(...je))),c}finally{ye=e,$e=t,je=n,J=i,bt=s,we=o,ts(a),Ye=l,r.f^=gi}}function ol(r,e){let t=e.reactions;if(t!==null){var n=_a.call(t,r);if(n!==-1){var i=t.length-1;i===0?t=e.reactions=null:(t[n]=t[i],t.pop())}}t===null&&(e.f&Ge)!==0&&(ye===null||!ye.includes(e))&&(Me(e,Tt),(e.f&(De|En))===0&&(e.f^=En),ao(e),On(e,0))}function On(r,e){var t=r.deps;if(t!==null)for(var n=e;n<t.length;n++)ol(r,t[n])}function qn(r){var e=r.f;if((e&Nn)===0){Me(r,be);var t=V,n=ee,i=Lt;V=r,Lt=!0;try{(e&Ln)!==0?el(r):yo(r),mo(r);var s=Oo(r);r.teardown=typeof s=="function"?s:null,r.wv=So;var o=r.deps,a;Zi&&ja&&r.f&Xe}catch(l){Bn(l,r,t,n||r.ctx)}finally{Lt=i,V=t}}}function al(){try{Aa()}catch(r){if(kn!==null)Bn(r,kn,null);else throw r}}function ll(){var r=Lt;try{var e=0;for(Lt=!0;fn.length>0;){e++>1e3&&al();var t=fn,n=t.length;fn=[];for(var i=0;i<n;i++){var s=cl(t[i]);ul(s)}Mr.clear()}}finally{yi=!1,Lt=r,kn=null}}function ul(r){var e=r.length;if(e!==0)for(var t=0;t<e;t++){var n=r[t];if((n.f&(Nn|nt))===0)try{_r(n)&&(qn(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?wo(n):n.fn=null))}catch(i){Bn(i,n,null,n.ctx)}}}function Hn(r){yi||(yi=!0,queueMicrotask(ll));for(var e=kn=r;e.parent!==null;){e=e.parent;var t=e.f;if((t&(dr|ut))!==0){if((t&be)===0)return;e.f^=be}}fn.push(e)}function cl(r){for(var e=[],t=r;t!==null;){var n=t.f,i=(n&(ut|dr))!==0,s=i&&(n&be)!==0;if(!s&&(n&nt)===0){if((n&eo)!==0)e.push(t);else if(i)t.f^=be;else{var o=J;try{J=t,_r(t)&&qn(t)}catch(u){Bn(u,t,null,t.ctx)}finally{J=o}}var a=t.first;if(a!==null){t=a;continue}}var l=t.parent;for(t=t.next;t===null&&l!==null;)t=l.next,l=l.parent}return e}function I(r){var e=r.f,t=(e&Ge)!==0;if(J!==null&&!Ye){if(!(we!=null&&we.includes(r))){var n=J.deps;r.rv<Tn&&(r.rv=Tn,ye===null&&n!==null&&n[$e]===r?$e++:ye===null?ye=[r]:(!bt||!ye.includes(r))&&ye.push(r))}}else if(t&&r.deps===null&&r.effects===null){var i=r,s=i.parent;s!==null&&(s.f&De)===0&&(i.f^=De)}return t&&(i=r,_r(i)&&uo(i)),Jr&&Mr.has(r)?Mr.get(r):r.v}function ot(r){var e=Ye;try{return Ye=!0,r()}finally{Ye=e}}const hl=-7169;function Me(r,e){r.f=r.f&hl|e}function zn(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(kt in r)wi(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&kt in t&&wi(t)}}}function wi(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let n in r)try{wi(r[n],e)}catch{}const t=Ni(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const n=Zs(t);for(let i in n){const s=n[i].get;if(s)try{s.call(r)}catch{}}}}}function dl(r){return r.endsWith("capture")&&r!=="gotpointercapture"&&r!=="lostpointercapture"}const fl=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function pl(r){return fl.includes(r)}const vl={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function gl(r){return r=r.toLowerCase(),vl[r]??r}const _l=["touchstart","touchmove"];function ml(r){return _l.includes(r)}function yl(r,e){if(e){const t=document.body;r.autofocus=!0,Gr(()=>{document.activeElement===t&&r.focus()})}}function $o(r){var e=J,t=V;Ne(null),Qe(null);try{return r()}finally{Ne(e),Qe(t)}}const Ao=new Set,bi=new Set;function Po(r,e,t,n={}){function i(s){if(n.capture||kr.call(e,s),!s.cancelBubble)return $o(()=>t==null?void 0:t.call(this,s))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?Gr(()=>{e.addEventListener(r,i,n)}):e.addEventListener(r,i,n),i}function $n(r,e,t,n,i){var s={capture:n,passive:i},o=Po(r,e,t,s);(e===document.body||e===window||e===document)&&go(()=>{e.removeEventListener(r,o,s)})}function wl(r){for(var e=0;e<r.length;e++)Ao.add(r[e]);for(var t of bi)t(r)}function kr(r){var m;var e=this,t=e.ownerDocument,n=r.type,i=((m=r.composedPath)==null?void 0:m.call(r))||[],s=i[0]||r.target,o=0,a=r.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(e===document||e===window)){r.__root=e;return}var u=i.indexOf(e);if(u===-1)return;l<=u&&(o=l)}if(s=i[o]||r.target,s!==e){ma(r,"currentTarget",{configurable:!0,get(){return s||t}});var c=J,h=V;Ne(null),Qe(null);try{for(var d,f=[];s!==null;){var p=s.assignedSlot||s.parentNode||s.host||null;try{var v=s["__"+n];if(v!=null&&(!s.disabled||r.target===s))if(Ri(v)){var[g,..._]=v;g.apply(s,[r,..._])}else v.call(s,r)}catch(w){d?f.push(w):d=w}if(r.cancelBubble||p===e||p===null)break;s=p}if(d){for(let w of f)queueMicrotask(()=>{throw w});throw d}}finally{r.__root=e,delete r.currentTarget,Ne(c),Qe(h)}}}function xo(r){var e=document.createElement("template");return e.innerHTML=r,e.content}function lr(r,e){var t=V;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function ge(r,e){var t=(e&qa)!==0,n=(e&Ha)!==0,i,s=!r.startsWith("<!>");return()=>{i===void 0&&(i=xo(s?r:"<!>"+r),t||(i=or(i)));var o=n||ho?document.importNode(i,!0):i.cloneNode(!0);if(t){var a=or(o),l=o.lastChild;lr(a,l)}else lr(o,o);return o}}function bl(r,e,t="svg"){var n=!r.startsWith("<!>"),i=`<${t}>${n?r:"<!>"+r}</${t}>`,s;return()=>{if(!s){var o=xo(i),a=or(o);s=or(a)}var l=s.cloneNode(!0);return lr(l,l),l}}function os(r=""){{var e=Hr(r+"");return lr(e,e),e}}function ct(){var r=document.createDocumentFragment(),e=document.createComment(""),t=Hr();return r.append(e,t),lr(e,t),r}function K(r,e){r!==null&&r.before(e)}let An=!0;function as(r){An=r}function Ie(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t+"")}function El(r,e){return Sl(r,e)}const Ft=new Map;function Sl(r,{target:e,anchor:t,props:n={},events:i,context:s,intro:o=!0}){Ya();var a=new Set,l=h=>{for(var d=0;d<h.length;d++){var f=h[d];if(!a.has(f)){a.add(f);var p=ml(f);e.addEventListener(f,kr,{passive:p});var v=Ft.get(f);v===void 0?(document.addEventListener(f,kr,{passive:p}),Ft.set(f,1)):Ft.set(f,v+1)}}};l(Li(Ao)),bi.add(l);var u=void 0,c=Za(()=>{var h=t??e.appendChild(Hr());return ar(()=>{if(s){pr({});var d=ee;d.c=s}i&&(n.$$events=i),An=o,u=r(h,n)||{},An=!0,s&&vr()}),()=>{var p;for(var d of a){e.removeEventListener(d,kr);var f=Ft.get(d);--f===0?(document.removeEventListener(d,kr),Ft.delete(d)):Ft.set(d,f)}bi.delete(l),h!==t&&((p=h.parentNode)==null||p.removeChild(h))}});return kl.set(u,c),u}let kl=new WeakMap;function ze(r,e,[t,n]=[0,0]){var i=r,s=null,o=null,a=ke,l=t>0?qr:0,u=!1;const c=(d,f=!0)=>{u=!0,h(f,d)},h=(d,f)=>{a!==(a=d)&&(a?(s?Fr(s):f&&(s=ar(()=>f(i))),o&&Ur(o,()=>{o=null})):(o?Fr(o):f&&(o=ar(()=>f(i,[t+1,n]))),s&&Ur(s,()=>{s=null})))};Fn(()=>{u=!1,e(c),u||h(null,null)},l)}function Tl(r,e){return e}function Ol(r,e,t,n){for(var i=[],s=e.length,o=0;o<s;o++)qi(e[o].e,i,!0);var a=s>0&&i.length===0&&t!==null;if(a){var l=t.parentNode;Ka(l),l.append(t),n.clear(),gt(r,e[0].prev,e[s-1].next)}bo(i,()=>{for(var u=0;u<s;u++){var c=e[u];a||(n.delete(c.k),gt(r,c.prev,c.next)),st(c.e,!a)}})}function Co(r,e,t,n,i,s=null){var o=r,a={flags:e,items:new Map,first:null},l=(e&so)!==0;if(l){var u=r;o=u.appendChild(Hr())}var c=null,h=!1,d=We(()=>{var f=t();return Ri(f)?f:f==null?[]:Li(f)});Fn(()=>{var f=I(d),p=f.length;h&&p===0||(h=p===0,$l(f,a,o,i,e,n,t),s!==null&&(p===0?c?Fr(c):c=ar(()=>s(o)):c!==null&&Ur(c,()=>{c=null})),I(d))})}function $l(r,e,t,n,i,s,o){var $,S,E,A;var a=(i&Ra)!==0,l=(i&(Fi|Bi))!==0,u=r.length,c=e.items,h=e.first,d=h,f,p=null,v,g=[],_=[],m,w,y,b;if(a)for(b=0;b<u;b+=1)m=r[b],w=s(m,b),y=c.get(w),y!==void 0&&(($=y.a)==null||$.measure(),(v??(v=new Set)).add(y));for(b=0;b<u;b+=1){if(m=r[b],w=s(m,b),y=c.get(w),y===void 0){var x=d?d.e.nodes_start:t;p=Pl(x,e,p,p===null?e.first:p.next,m,w,b,n,i,o),c.set(w,p),g=[],_=[],d=p.next;continue}if(l&&Al(y,m,b,i),(y.e.f&nt)!==0&&(Fr(y.e),a&&((S=y.a)==null||S.unfix(),(v??(v=new Set)).delete(y))),y!==d){if(f!==void 0&&f.has(y)){if(g.length<_.length){var O=_[0],P;p=O.prev;var j=g[0],D=g[g.length-1];for(P=0;P<g.length;P+=1)ls(g[P],O,t);for(P=0;P<_.length;P+=1)f.delete(_[P]);gt(e,j.prev,D.next),gt(e,p,j),gt(e,D,O),d=O,p=D,b-=1,g=[],_=[]}else f.delete(y),ls(y,d,t),gt(e,y.prev,y.next),gt(e,y,p===null?e.first:p.next),gt(e,p,y),p=y;continue}for(g=[],_=[];d!==null&&d.k!==w;)(d.e.f&nt)===0&&(f??(f=new Set)).add(d),_.push(d),d=d.next;if(d===null)continue;y=d}g.push(y),p=y,d=y.next}if(d!==null||f!==void 0){for(var C=f===void 0?[]:Li(f);d!==null;)(d.e.f&nt)===0&&C.push(d),d=d.next;var Q=C.length;if(Q>0){var Y=(i&so)!==0&&u===0?t:null;if(a){for(b=0;b<Q;b+=1)(E=C[b].a)==null||E.measure();for(b=0;b<Q;b+=1)(A=C[b].a)==null||A.fix()}Ol(e,C,Y,c)}}a&&Gr(()=>{var T;if(v!==void 0)for(y of v)(T=y.a)==null||T.apply()}),V.first=e.first&&e.first.e,V.last=p&&p.e}function Al(r,e,t,n){(n&Fi)!==0&&_i(r.v,e),(n&Bi)!==0?_i(r.i,t):r.i=t}function Pl(r,e,t,n,i,s,o,a,l,u){var c=(l&Fi)!==0,h=(l&La)===0,d=c?h?Le(i):sr(i):i,f=(l&Bi)===0?o:sr(o),p={i:f,v:d,k:s,a:null,e:null,prev:t,next:n};try{return p.e=ar(()=>a(r,d,f,u),Va),p.e.prev=t&&t.e,p.e.next=n&&n.e,t===null?e.first=p:(t.next=p,t.e.next=p.e),n!==null&&(n.prev=p,n.e.prev=p.e),p}finally{}}function ls(r,e,t){for(var n=r.next?r.next.e.nodes_start:t,i=e?e.e.nodes_start:t,s=r.e.nodes_start;s!==n;){var o=Un(s);i.before(s),s=o}}function gt(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Ot(r,e,t,n,i){var a;var s=(a=e.$$slots)==null?void 0:a[t],o=!1;s===!0&&(s=e.children,o=!0),s===void 0||s(r,o?()=>n:n)}function xl(r,e,t,n,i,s){var o,a,l=null,u=r,c;Fn(()=>{const h=e()||null;var d=Wa;h!==o&&(c&&(h===null?Ur(c,()=>{c=null,a=null}):h===a?Fr(c):(st(c),as(!1))),h&&h!==a&&(c=ar(()=>{if(l=document.createElementNS(d,h),lr(l,l),n){var f=l.appendChild(Hr());n(l,f)}V.nodes_end=l,u.before(l)})),o=h,o&&(a=o),as(!0))},qr)}function Cl(r,e,t){zr(()=>{var n=ot(()=>e(r,t==null?void 0:t())||{});if(t&&(n!=null&&n.update)){var i=!1,s={};Wr(()=>{var o=t();zn(o),i&&Mi(s,o)&&(s=o,n.update(o))}),i=!0}if(n!=null&&n.destroy)return()=>n.destroy()})}function Do(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=Do(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function Dl(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=Do(r))&&(n&&(n+=" "),n+=e);return n}function jl(r){return typeof r=="object"?Dl(r):r??""}const us=[...` 	
\r\fÂ \v\uFEFF`];function Il(r,e,t){var n=r==null?"":""+r;if(t){for(var i in t)if(t[i])n=n?n+" "+i:i;else if(n.length)for(var s=i.length,o=0;(o=n.indexOf(i,o))>=0;){var a=o+s;(o===0||us.includes(n[o-1]))&&(a===n.length||us.includes(n[a]))?n=(o===0?"":n.substring(0,o))+n.substring(a+1):o=a}}return n===""?null:n}function cs(r,e=!1){var t=e?" !important;":";",n="";for(var i in r){var s=r[i];s!=null&&s!==""&&(n+=" "+i+": "+s+t)}return n}function Vn(r){return r[0]!=="-"||r[1]!=="-"?r.toLowerCase():r}function Rl(r,e){if(e){var t="",n,i;if(Array.isArray(e)?(n=e[0],i=e[1]):n=e,r){r=String(r).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,o=0,a=!1,l=[];n&&l.push(...Object.keys(n).map(Vn)),i&&l.push(...Object.keys(i).map(Vn));var u=0,c=-1;const v=r.length;for(var h=0;h<v;h++){var d=r[h];if(a?d==="/"&&r[h-1]==="*"&&(a=!1):s?s===d&&(s=!1):d==="/"&&r[h+1]==="*"?a=!0:d==='"'||d==="'"?s=d:d==="("?o++:d===")"&&o--,!a&&s===!1&&o===0){if(d===":"&&c===-1)c=h;else if(d===";"||h===v-1){if(c!==-1){var f=Vn(r.substring(u,c).trim());if(!l.includes(f)){d!==";"&&h++;var p=r.substring(u,h).trim();t+=" "+p+";"}}u=h+1,c=-1}}}}return n&&(t+=cs(n)),i&&(t+=cs(i,!0)),t=t.trim(),t===""?null:t}return r==null?null:String(r)}function Ll(r,e,t,n,i,s){var o=r.__className;if(o!==t||o===void 0){var a=Il(t,n,s);a==null?r.removeAttribute("class"):e?r.className=a:r.setAttribute("class",a),r.__className=t}else if(s&&i!==s)for(var l in s){var u=!!s[l];(i==null||u!==!!i[l])&&r.classList.toggle(l,u)}return s}function Yn(r,e={},t,n){for(var i in t){var s=t[i];e[i]!==s&&(t[i]==null?r.style.removeProperty(i):r.style.setProperty(i,s,n))}}function Nl(r,e,t,n){var i=r.__style;if(i!==e){var s=Rl(e,n);s==null?r.removeAttribute("style"):r.style.cssText=s,r.__style=e}else n&&(Array.isArray(n)?(Yn(r,t==null?void 0:t[0],n[0]),Yn(r,t==null?void 0:t[1],n[1],"important")):Yn(r,t,n));return n}const wr=Symbol("class"),br=Symbol("style"),jo=Symbol("is custom element"),Io=Symbol("is html");function Ml(r,e){e?r.hasAttribute("selected")||r.setAttribute("selected",""):r.removeAttribute("selected")}function Rt(r,e,t,n){var i=Ro(r);i[e]!==(i[e]=t)&&(e==="loading"&&(r[ka]=t),t==null?r.removeAttribute(e):typeof t!="string"&&Lo(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function hs(r,e,t,n,i=!1){var s=Ro(r),o=s[jo],a=!s[Io],l=e||{},u=r.tagName==="OPTION";for(var c in e)c in t||(t[c]=null);t.class?t.class=jl(t.class):t[wr]&&(t.class=null),t[br]&&(t.style??(t.style=null));var h=Lo(r);for(const m in t){let w=t[m];if(u&&m==="value"&&w==null){r.value=r.__value="",l[m]=w;continue}if(m==="class"){var d=r.namespaceURI==="http://www.w3.org/1999/xhtml";Ll(r,d,w,n,e==null?void 0:e[wr],t[wr]),l[m]=w,l[wr]=t[wr];continue}if(m==="style"){Nl(r,w,e==null?void 0:e[br],t[br]),l[m]=w,l[br]=t[br];continue}var f=l[m];if(w!==f){l[m]=w;var p=m[0]+m[1];if(p!=="$$")if(p==="on"){const y={},b="$$"+m;let x=m.slice(2);var v=pl(x);if(dl(x)&&(x=x.slice(0,-7),y.capture=!0),!v&&f){if(w!=null)continue;r.removeEventListener(x,l[b],y),l[b]=null}if(w!=null)if(v)r[`__${x}`]=w,wl([x]);else{let O=function(P){l[m].call(this,P)};l[b]=Po(x,r,O,y)}else v&&(r[`__${x}`]=void 0)}else if(m==="style")Rt(r,m,w);else if(m==="autofocus")yl(r,!!w);else if(!o&&(m==="__value"||m==="value"&&w!=null))r.value=r.__value=w;else if(m==="selected"&&u)Ml(r,w);else{var g=m;a||(g=gl(g));var _=g==="defaultValue"||g==="defaultChecked";if(w==null&&!o&&!_)if(s[m]=null,g==="value"||g==="checked"){let y=r;const b=e===void 0;if(g==="value"){let x=y.defaultValue;y.removeAttribute(g),y.defaultValue=x,y.value=y.__value=b?x:null}else{let x=y.defaultChecked;y.removeAttribute(g),y.defaultChecked=x,y.checked=b?x:!1}}else r.removeAttribute(m);else _||h.includes(g)&&(o||typeof w!="string")?r[g]=w:typeof w!="function"&&Rt(r,g,w)}}}return l}function Ro(r){return r.__attributes??(r.__attributes={[jo]:r.nodeName.includes("-"),[Io]:r.namespaceURI===za})}var ds=new Map;function Lo(r){var e=ds.get(r.nodeName);if(e)return e;ds.set(r.nodeName,e=[]);for(var t,n=r,i=Element.prototype;i!==n;){t=Zs(n);for(var s in t)t[s].set&&e.push(s);n=Ni(n)}return e}const Ul=()=>performance.now(),rt={tick:r=>requestAnimationFrame(r),now:()=>Ul(),tasks:new Set};function No(){const r=rt.now();rt.tasks.forEach(e=>{e.c(r)||(rt.tasks.delete(e),e.f())}),rt.tasks.size!==0&&rt.tick(No)}function Fl(r){let e;return rt.tasks.size===0&&rt.tick(No),{promise:new Promise(t=>{rt.tasks.add(e={c:r,f:t})}),abort(){rt.tasks.delete(e)}}}function Zr(r,e){$o(()=>{r.dispatchEvent(new CustomEvent(e))})}function Bl(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const e=r.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function fs(r){const e={},t=r.split(";");for(const n of t){const[i,s]=n.split(":");if(!i||s===void 0)break;const o=Bl(i.trim());e[o]=s.trim()}return e}const ql=r=>r;function Hl(r,e,t,n){var i=(r&Ba)!==0,s="both",o,a=e.inert,l=e.style.overflow,u,c;function h(){var g=J,_=V;Ne(null),Qe(null);try{return o??(o=t()(e,(n==null?void 0:n())??{},{direction:s}))}finally{Ne(g),Qe(_)}}var d={is_global:i,in(){e.inert=a,Zr(e,"introstart"),u=Ei(e,h(),c,1,()=>{Zr(e,"introend"),u==null||u.abort(),u=o=void 0,e.style.overflow=l})},out(g){e.inert=!0,Zr(e,"outrostart"),c=Ei(e,h(),u,0,()=>{Zr(e,"outroend"),g==null||g()})},stop:()=>{u==null||u.abort(),c==null||c.abort()}},f=V;if((f.transitions??(f.transitions=[])).push(d),An){var p=i;if(!p){for(var v=f.parent;v&&(v.f&qr)!==0;)for(;(v=v.parent)&&(v.f&Ln)===0;);p=!v||(v.f&to)!==0}p&&zr(()=>{ot(()=>d.in())})}}function Ei(r,e,t,n,i){var s=n===1;if(Qt(e)){var o,a=!1;return Gr(()=>{if(!a){var g=e({direction:s?"in":"out"});o=Ei(r,g,t,n,i)}}),{abort:()=>{a=!0,o==null||o.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(t==null||t.deactivate(),!(e!=null&&e.duration))return i(),{abort:tt,deactivate:tt,reset:tt,t:()=>n};const{delay:l=0,css:u,tick:c,easing:h=ql}=e;var d=[];if(s&&t===void 0&&(c&&c(0,1),u)){var f=fs(u(0,1));d.push(f,f)}var p=()=>1-n,v=r.animate(d,{duration:l});return v.onfinish=()=>{var g=(t==null?void 0:t.t())??1-n;t==null||t.abort();var _=n-g,m=e.duration*Math.abs(_),w=[];if(m>0){var y=!1;if(u)for(var b=Math.ceil(m/16.666666666666668),x=0;x<=b;x+=1){var O=g+_*h(x/b),P=fs(u(O,1-O));w.push(P),y||(y=P.overflow==="hidden")}y&&(r.style.overflow="hidden"),p=()=>{var j=v.currentTime;return g+_*h(j/m)},c&&Fl(()=>{if(v.playState!=="running")return!1;var j=p();return c(j,1-j),!0})}v=r.animate(w,{duration:m,fill:"forwards"}),v.onfinish=()=>{p=()=>n,c==null||c(n,1-n),i()}},{abort:()=>{v&&(v.cancel(),v.effect=null,v.onfinish=tt)},deactivate:()=>{i=tt},reset:()=>{n===0&&(c==null||c(1,0))},t:()=>p()}}function ps(r,e){return r===e||(r==null?void 0:r[kt])===e}function zl(r={},e,t,n){return zr(()=>{var i,s;return Wr(()=>{i=s,s=[],ot(()=>{r!==t(...s)&&(e(r,...s),i&&ps(t(...i),r)&&e(null,...i))})}),()=>{Gr(()=>{s&&ps(t(...s),r)&&e(null,...s)})}}),r}function Vr(r=!1){const e=ee,t=e.l.u;if(!t)return;let n=()=>zn(e.s);if(r){let i=0,s={};const o=Nr(()=>{let a=!1;const l=e.s;for(const u in l)l[u]!==s[u]&&(s[u]=l[u],a=!0);return a&&i++,i});n=()=>I(o)}t.b.length&&Qa(()=>{vs(e,n),vi(t.b)}),mi(()=>{const i=ot(()=>t.m.map(ba));return()=>{for(const s of i)typeof s=="function"&&s()}}),t.a.length&&mi(()=>{vs(e,n),vi(t.a)})}function vs(r,e){if(r.l.s)for(const t of r.l.s)I(t);e()}function Wl(r,e,t){if(r==null)return e(void 0),tt;const n=ot(()=>r.subscribe(e,t));return n.unsubscribe?()=>n.unsubscribe():n}const Bt=[];function Kn(r,e=tt){let t=null;const n=new Set;function i(a){if(Mi(r,a)&&(r=a,t)){const l=!Bt.length;for(const u of n)u[1](),Bt.push(u,r);if(l){for(let u=0;u<Bt.length;u+=2)Bt[u][0](Bt[u+1]);Bt.length=0}}}function s(a){i(a(r))}function o(a,l=tt){const u=[a,l];return n.add(u),n.size===1&&(t=e(i,s)||tt),a(r),()=>{n.delete(u),n.size===0&&t&&(t(),t=null)}}return{set:i,update:s,subscribe:o}}function Xn(r){let e;return Wl(r,t=>e=t)(),e}let en=!1;function Gl(r){var e=en;try{return en=!1,[r(),en]}finally{en=e}}const Jl={get(r,e){if(!r.exclude.includes(e))return I(r.version),e in r.special?r.special[e]():r.props[e]},set(r,e,t){return e in r.special||(r.special[e]=Ce({get[e](){return r.props[e]}},e,oo)),r.special[e](t),rs(r.version),!0},getOwnPropertyDescriptor(r,e){if(!r.exclude.includes(e)&&e in r.props)return{enumerable:!0,configurable:!0,value:r.props[e]}},deleteProperty(r,e){return r.exclude.includes(e)||(r.exclude.push(e),rs(r.version)),!0},has(r,e){return r.exclude.includes(e)?!1:e in r.props},ownKeys(r){return Reflect.ownKeys(r.props).filter(e=>!r.exclude.includes(e))}};function at(r,e){return new Proxy({props:r,exclude:e,special:{},version:sr(0)},Jl)}const Vl={get(r,e){let t=r.props.length;for(;t--;){let n=r.props[t];if(Qt(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n)return n[e]}},set(r,e,t){let n=r.props.length;for(;n--;){let i=r.props[n];Qt(i)&&(i=i());const s=St(i,e);if(s&&s.set)return s.set(t),!0}return!1},getOwnPropertyDescriptor(r,e){let t=r.props.length;for(;t--;){let n=r.props[t];if(Qt(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n){const i=St(n,e);return i&&!i.configurable&&(i.configurable=!0),i}}},has(r,e){if(e===kt||e===no)return!1;for(let t of r.props)if(Qt(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(r){const e=[];for(let t of r.props){Qt(t)&&(t=t());for(const n in t)e.includes(n)||e.push(n)}return e}};function Nt(...r){return new Proxy({props:r},Vl)}function gs(r){var e;return((e=r.ctx)==null?void 0:e.d)??!1}function Ce(r,e,t,n){var x;var i=(t&Na)!==0,s=!fr||(t&Ma)!==0,o=(t&Ua)!==0,a=(t&Fa)!==0,l=!1,u;o?[u,l]=Gl(()=>r[e]):u=r[e];var c=kt in r||no in r,h=o&&(((x=St(r,e))==null?void 0:x.set)??(c&&e in r&&(O=>r[e]=O)))||void 0,d=n,f=!0,p=!1,v=()=>(p=!0,f&&(f=!1,a?d=ot(n):d=n),d);u===void 0&&n!==void 0&&(h&&s&&Pa(),u=v(),h&&h(u));var g;if(s)g=()=>{var O=r[e];return O===void 0?v():(f=!0,p=!1,O)};else{var _=(i?Nr:We)(()=>r[e]);_.f|=Ea,g=()=>{var O=I(_);return O!==void 0&&(d=void 0),O===void 0?d:O}}if((t&oo)===0)return g;if(h){var m=r.$$legacy;return function(O,P){return arguments.length>0?((!s||!P||m||l)&&h(P?g():O),O):g()}}var w=!1,y=Le(u),b=Nr(()=>{var O=g(),P=I(y);return w?(w=!1,P):y.v=O});return o&&I(b),i||(b.equals=Ui),function(O,P){if(arguments.length>0){const j=P?I(b):s&&o?jt(O):O;if(!b.equals(j)){if(w=!0,re(y,j),p&&d!==void 0&&(d=j),gs(b))return O;ot(()=>I(b))}return O}return gs(b)?b.v:I(b)}}function Yl(r){ee===null&&Ga(),fr&&ee.l!==null?Kl(ee).m.push(r):mi(()=>{const e=ot(r);if(typeof e=="function")return e})}function Kl(r){var e=r.l;return e.u??(e.u={a:[],b:[],m:[]})}const Xl="5";var Qs;typeof window<"u"&&((Qs=window.__svelte??(window.__svelte={})).v??(Qs.v=new Set)).add(Xl);Ia();/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function _s(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ze(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_s(Object(t),!0).forEach(function(n){Ql(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):_s(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function pn(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?pn=function(e){return typeof e}:pn=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pn(r)}function Ql(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function lt(){return lt=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},lt.apply(this,arguments)}function Zl(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function eu(r,e){if(r==null)return{};var t=Zl(r,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}var tu="1.15.6";function it(r){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(r)}var ht=it(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Yr=it(/Edge/i),ms=it(/firefox/i),Pr=it(/safari/i)&&!it(/chrome/i)&&!it(/android/i),Hi=it(/iP(ad|od|hone)/i),Mo=it(/chrome/i)&&it(/android/i),Uo={capture:!1,passive:!1};function z(r,e,t){r.addEventListener(e,t,!ht&&Uo)}function B(r,e,t){r.removeEventListener(e,t,!ht&&Uo)}function Pn(r,e){if(e){if(e[0]===">"&&(e=e.substring(1)),r)try{if(r.matches)return r.matches(e);if(r.msMatchesSelector)return r.msMatchesSelector(e);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(e)}catch{return!1}return!1}}function Fo(r){return r.host&&r!==document&&r.host.nodeType?r.host:r.parentNode}function qe(r,e,t,n){if(r){t=t||document;do{if(e!=null&&(e[0]===">"?r.parentNode===t&&Pn(r,e):Pn(r,e))||n&&r===t)return r;if(r===t)break}while(r=Fo(r))}return null}var ys=/\s+/g;function Oe(r,e,t){if(r&&e)if(r.classList)r.classList[t?"add":"remove"](e);else{var n=(" "+r.className+" ").replace(ys," ").replace(" "+e+" "," ");r.className=(n+(t?" "+e:"")).replace(ys," ")}}function R(r,e,t){var n=r&&r.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(r,""):r.currentStyle&&(t=r.currentStyle),e===void 0?t:t[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=t+(typeof t=="string"?"":"px")}}function nr(r,e){var t="";if(typeof r=="string")t=r;else do{var n=R(r,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!e&&(r=r.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function Bo(r,e,t){if(r){var n=r.getElementsByTagName(e),i=0,s=n.length;if(t)for(;i<s;i++)t(n[i],i);return n}return[]}function Ke(){var r=document.scrollingElement;return r||document.documentElement}function ue(r,e,t,n,i){if(!(!r.getBoundingClientRect&&r!==window)){var s,o,a,l,u,c,h;if(r!==window&&r.parentNode&&r!==Ke()?(s=r.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,u=s.right,c=s.height,h=s.width):(o=0,a=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,h=window.innerWidth),(e||t)&&r!==window&&(i=i||r.parentNode,!ht))do if(i&&i.getBoundingClientRect&&(R(i,"transform")!=="none"||t&&R(i,"position")!=="static")){var d=i.getBoundingClientRect();o-=d.top+parseInt(R(i,"border-top-width")),a-=d.left+parseInt(R(i,"border-left-width")),l=o+s.height,u=a+s.width;break}while(i=i.parentNode);if(n&&r!==window){var f=nr(i||r),p=f&&f.a,v=f&&f.d;f&&(o/=v,a/=p,h/=p,c/=v,l=o+c,u=a+h)}return{top:o,left:a,bottom:l,right:u,width:h,height:c}}}function ws(r,e,t){for(var n=Et(r,!0),i=ue(r)[e];n;){var s=ue(n)[t],o=void 0;if(o=i>=s,!o)return n;if(n===Ke())break;n=Et(n,!1)}return!1}function ur(r,e,t,n){for(var i=0,s=0,o=r.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==L.ghost&&(n||o[s]!==L.dragged)&&qe(o[s],t.draggable,r,!1)){if(i===e)return o[s];i++}s++}return null}function zi(r,e){for(var t=r.lastElementChild;t&&(t===L.ghost||R(t,"display")==="none"||e&&!Pn(t,e));)t=t.previousElementSibling;return t||null}function Re(r,e){var t=0;if(!r||!r.parentNode)return-1;for(;r=r.previousElementSibling;)r.nodeName.toUpperCase()!=="TEMPLATE"&&r!==L.clone&&(!e||Pn(r,e))&&t++;return t}function bs(r){var e=0,t=0,n=Ke();if(r)do{var i=nr(r),s=i.a,o=i.d;e+=r.scrollLeft*s,t+=r.scrollTop*o}while(r!==n&&(r=r.parentNode));return[e,t]}function ru(r,e){for(var t in r)if(r.hasOwnProperty(t)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===r[t][n])return Number(t)}return-1}function Et(r,e){if(!r||!r.getBoundingClientRect)return Ke();var t=r,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=R(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Ke();if(n||e)return t;n=!0}}while(t=t.parentNode);return Ke()}function nu(r,e){if(r&&e)for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}function Qn(r,e){return Math.round(r.top)===Math.round(e.top)&&Math.round(r.left)===Math.round(e.left)&&Math.round(r.height)===Math.round(e.height)&&Math.round(r.width)===Math.round(e.width)}var xr;function qo(r,e){return function(){if(!xr){var t=arguments,n=this;t.length===1?r.call(n,t[0]):r.apply(n,t),xr=setTimeout(function(){xr=void 0},e)}}}function iu(){clearTimeout(xr),xr=void 0}function Ho(r,e,t){r.scrollLeft+=e,r.scrollTop+=t}function zo(r){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(r).cloneNode(!0):t?t(r).clone(!0)[0]:r.cloneNode(!0)}function Wo(r,e,t){var n={};return Array.from(r.children).forEach(function(i){var s,o,a,l;if(!(!qe(i,e.draggable,r,!1)||i.animated||i===t)){var u=ue(i);n.left=Math.min((s=n.left)!==null&&s!==void 0?s:1/0,u.left),n.top=Math.min((o=n.top)!==null&&o!==void 0?o:1/0,u.top),n.right=Math.max((a=n.right)!==null&&a!==void 0?a:-1/0,u.right),n.bottom=Math.max((l=n.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var Te="Sortable"+new Date().getTime();function su(){var r=[],e;return{captureAnimationState:function(){if(r=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(i){if(!(R(i,"display")==="none"||i===L.ghost)){r.push({target:i,rect:ue(i)});var s=Ze({},r[r.length-1].rect);if(i.thisAnimationDuration){var o=nr(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(n){r.push(n)},removeAnimationState:function(n){r.splice(ru(r,{target:n}),1)},animateAll:function(n){var i=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var s=!1,o=0;r.forEach(function(a){var l=0,u=a.target,c=u.fromRect,h=ue(u),d=u.prevFromRect,f=u.prevToRect,p=a.rect,v=nr(u,!0);v&&(h.top-=v.f,h.left-=v.e),u.toRect=h,u.thisAnimationDuration&&Qn(d,h)&&!Qn(c,h)&&(p.top-h.top)/(p.left-h.left)===(c.top-h.top)/(c.left-h.left)&&(l=au(p,d,f,i.options)),Qn(h,c)||(u.prevFromRect=c,u.prevToRect=h,l||(l=i.options.animation),i.animate(u,p,h,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof n=="function"&&n()},o):typeof n=="function"&&n(),r=[]},animate:function(n,i,s,o){if(o){R(n,"transition",""),R(n,"transform","");var a=nr(this.el),l=a&&a.a,u=a&&a.d,c=(i.left-s.left)/(l||1),h=(i.top-s.top)/(u||1);n.animatingX=!!c,n.animatingY=!!h,R(n,"transform","translate3d("+c+"px,"+h+"px,0)"),this.forRepaintDummy=ou(n),R(n,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),R(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){R(n,"transition",""),R(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},o)}}}}function ou(r){return r.offsetWidth}function au(r,e,t,n){return Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*n.animation}var qt=[],Zn={initializeByDefault:!0},Kr={mount:function(e){for(var t in Zn)Zn.hasOwnProperty(t)&&!(t in e)&&(e[t]=Zn[t]);qt.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),qt.push(e)},pluginEvent:function(e,t,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var s=e+"Global";qt.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][s]&&t[o.pluginName][s](Ze({sortable:t},n)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](Ze({sortable:t},n)))})},initializePlugins:function(e,t,n,i){qt.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var u=new a(e,t,e.options);u.sortable=e,u.options=e.options,e[l]=u,lt(n,u.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,t){var n={};return qt.forEach(function(i){typeof i.eventProperties=="function"&&lt(n,i.eventProperties.call(t[i.pluginName],e))}),n},modifyOption:function(e,t,n){var i;return qt.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(i=s.optionListeners[t].call(e[s.pluginName],n))}),i}};function lu(r){var e=r.sortable,t=r.rootEl,n=r.name,i=r.targetEl,s=r.cloneEl,o=r.toEl,a=r.fromEl,l=r.oldIndex,u=r.newIndex,c=r.oldDraggableIndex,h=r.newDraggableIndex,d=r.originalEvent,f=r.putSortable,p=r.extraEventProperties;if(e=e||t&&t[Te],!!e){var v,g=e.options,_="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!ht&&!Yr?v=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(n,!0,!0)),v.to=o||t,v.from=a||t,v.item=i||t,v.clone=s,v.oldIndex=l,v.newIndex=u,v.oldDraggableIndex=c,v.newDraggableIndex=h,v.originalEvent=d,v.pullMode=f?f.lastPutMode:void 0;var m=Ze(Ze({},p),Kr.getEventProperties(n,e));for(var w in m)v[w]=m[w];t&&t.dispatchEvent(v),g[_]&&g[_].call(e,v)}}var uu=["evt"],Ee=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.evt,s=eu(n,uu);Kr.pluginEvent.bind(L)(e,t,Ze({dragEl:k,parentEl:oe,ghostEl:U,rootEl:te,nextEl:Ct,lastDownEl:vn,cloneEl:ie,cloneHidden:yt,dragStarted:Tr,putSortable:ve,activeSortable:L.active,originalEvent:i,oldIndex:rr,oldDraggableIndex:Cr,newIndex:Ae,newDraggableIndex:_t,hideGhostForTarget:Yo,unhideGhostForTarget:Ko,cloneNowHidden:function(){yt=!0},cloneNowShown:function(){yt=!1},dispatchSortableEvent:function(a){me({sortable:t,name:a,originalEvent:i})}},s))};function me(r){lu(Ze({putSortable:ve,cloneEl:ie,targetEl:k,rootEl:te,oldIndex:rr,oldDraggableIndex:Cr,newIndex:Ae,newDraggableIndex:_t},r))}var k,oe,U,te,Ct,vn,ie,yt,rr,Ae,Cr,_t,tn,ve,er=!1,xn=!1,Cn=[],At,Be,ei,ti,Es,Ss,Tr,Ht,Dr,jr=!1,rn=!1,gn,_e,ri=[],Si=!1,Dn=[],Wn=typeof document<"u",nn=Hi,ks=Yr||ht?"cssFloat":"float",cu=Wn&&!Mo&&!Hi&&"draggable"in document.createElement("div"),Go=function(){if(Wn){if(ht)return!1;var r=document.createElement("x");return r.style.cssText="pointer-events:auto",r.style.pointerEvents==="auto"}}(),Jo=function(e,t){var n=R(e),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),s=ur(e,0,t),o=ur(e,1,t),a=s&&R(s),l=o&&R(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+ue(s).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+ue(o).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=i&&n[ks]==="none"||o&&n[ks]==="none"&&u+c>i)?"vertical":"horizontal"},hu=function(e,t,n){var i=n?e.left:e.top,s=n?e.right:e.bottom,o=n?e.width:e.height,a=n?t.left:t.top,l=n?t.right:t.bottom,u=n?t.width:t.height;return i===a||s===l||i+o/2===a+u/2},du=function(e,t){var n;return Cn.some(function(i){var s=i[Te].options.emptyInsertThreshold;if(!(!s||zi(i))){var o=ue(i),a=e>=o.left-s&&e<=o.right+s,l=t>=o.top-s&&t<=o.bottom+s;if(a&&l)return n=i}}),n},Vo=function(e){function t(s,o){return function(a,l,u,c){var h=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||h))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(a,l,u,c),o)(a,l,u,c);var d=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===d||s.join&&s.indexOf(d)>-1}}var n={},i=e.group;(!i||pn(i)!="object")&&(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},Yo=function(){!Go&&U&&R(U,"display","none")},Ko=function(){!Go&&U&&R(U,"display","")};Wn&&!Mo&&document.addEventListener("click",function(r){if(xn)return r.preventDefault(),r.stopPropagation&&r.stopPropagation(),r.stopImmediatePropagation&&r.stopImmediatePropagation(),xn=!1,!1},!0);var Pt=function(e){if(k){e=e.touches?e.touches[0]:e;var t=du(e.clientX,e.clientY);if(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[Te]._onDragOver(n)}}},fu=function(e){k&&k.parentNode[Te]._isOutsideThisEl(e.target)};function L(r,e){if(!(r&&r.nodeType&&r.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(r));this.el=r,this.options=e=lt({},e),r[Te]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(r.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Jo(r,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:L.supportPointer!==!1&&"PointerEvent"in window&&(!Pr||Hi),emptyInsertThreshold:5};Kr.initializePlugins(this,r,t);for(var n in t)!(n in e)&&(e[n]=t[n]);Vo(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:cu,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?z(r,"pointerdown",this._onTapStart):(z(r,"mousedown",this._onTapStart),z(r,"touchstart",this._onTapStart)),this.nativeDraggable&&(z(r,"dragover",this),z(r,"dragenter",this)),Cn.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),lt(this,su())}L.prototype={constructor:L,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ht=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,k):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=i.filter;if(bu(n),!k&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Pr&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=qe(l,i.draggable,n,!1),!(l&&l.animated)&&vn!==l)){if(rr=Re(l),Cr=Re(l,i.draggable),typeof c=="function"){if(c.call(this,e,l,this)){me({sortable:t,rootEl:u,name:"filter",targetEl:l,toEl:n,fromEl:n}),Ee("filter",t,{evt:e}),s&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(h){if(h=qe(u,h.trim(),n,!1),h)return me({sortable:t,rootEl:h,name:"filter",targetEl:l,fromEl:n,toEl:n}),Ee("filter",t,{evt:e}),!0}),c)){s&&e.preventDefault();return}i.handle&&!qe(u,i.handle,n,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,n){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(n&&!k&&n.parentNode===s){var u=ue(n);if(te=s,k=n,oe=k.parentNode,Ct=k.nextSibling,vn=n,tn=o.group,L.dragged=k,At={target:k,clientX:(t||e).clientX,clientY:(t||e).clientY},Es=At.clientX-u.left,Ss=At.clientY-u.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,k.style["will-change"]="all",l=function(){if(Ee("delayEnded",i,{evt:e}),L.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!ms&&i.nativeDraggable&&(k.draggable=!0),i._triggerDragStart(e,t),me({sortable:i,name:"choose",originalEvent:e}),Oe(k,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){Bo(k,c.trim(),ni)}),z(a,"dragover",Pt),z(a,"mousemove",Pt),z(a,"touchmove",Pt),o.supportPointer?(z(a,"pointerup",i._onDrop),!this.nativeDraggable&&z(a,"pointercancel",i._onDrop)):(z(a,"mouseup",i._onDrop),z(a,"touchend",i._onDrop),z(a,"touchcancel",i._onDrop)),ms&&this.nativeDraggable&&(this.options.touchStartThreshold=4,k.draggable=!0),Ee("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Yr||ht))){if(L.eventCanceled){this._onDrop();return}o.supportPointer?(z(a,"pointerup",i._disableDelayedDrag),z(a,"pointercancel",i._disableDelayedDrag)):(z(a,"mouseup",i._disableDelayedDrag),z(a,"touchend",i._disableDelayedDrag),z(a,"touchcancel",i._disableDelayedDrag)),z(a,"mousemove",i._delayedDragTouchMoveHandler),z(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&z(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){k&&ni(k),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;B(e,"mouseup",this._disableDelayedDrag),B(e,"touchend",this._disableDelayedDrag),B(e,"touchcancel",this._disableDelayedDrag),B(e,"pointerup",this._disableDelayedDrag),B(e,"pointercancel",this._disableDelayedDrag),B(e,"mousemove",this._delayedDragTouchMoveHandler),B(e,"touchmove",this._delayedDragTouchMoveHandler),B(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?z(document,"pointermove",this._onTouchMove):t?z(document,"touchmove",this._onTouchMove):z(document,"mousemove",this._onTouchMove):(z(k,"dragend",this),z(te,"dragstart",this._onDragStart));try{document.selection?_n(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(er=!1,te&&k){Ee("dragStarted",this,{evt:t}),this.nativeDraggable&&z(document,"dragover",fu);var n=this.options;!e&&Oe(k,n.dragClass,!1),Oe(k,n.ghostClass,!0),L.active=this,e&&this._appendGhost(),me({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Be){this._lastX=Be.clientX,this._lastY=Be.clientY,Yo();for(var e=document.elementFromPoint(Be.clientX,Be.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Be.clientX,Be.clientY),e!==t);)t=e;if(k.parentNode[Te]._isOutsideThisEl(e),t)do{if(t[Te]){var n=void 0;if(n=t[Te]._onDragOver({clientX:Be.clientX,clientY:Be.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=Fo(t));Ko()}},_onTouchMove:function(e){if(At){var t=this.options,n=t.fallbackTolerance,i=t.fallbackOffset,s=e.touches?e.touches[0]:e,o=U&&nr(U,!0),a=U&&o&&o.a,l=U&&o&&o.d,u=nn&&_e&&bs(_e),c=(s.clientX-At.clientX+i.x)/(a||1)+(u?u[0]-ri[0]:0)/(a||1),h=(s.clientY-At.clientY+i.y)/(l||1)+(u?u[1]-ri[1]:0)/(l||1);if(!L.active&&!er){if(n&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(U){o?(o.e+=c-(ei||0),o.f+=h-(ti||0)):o={a:1,b:0,c:0,d:1,e:c,f:h};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");R(U,"webkitTransform",d),R(U,"mozTransform",d),R(U,"msTransform",d),R(U,"transform",d),ei=c,ti=h,Be=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!U){var e=this.options.fallbackOnBody?document.body:te,t=ue(k,!0,nn,!0,e),n=this.options;if(nn){for(_e=e;R(_e,"position")==="static"&&R(_e,"transform")==="none"&&_e!==document;)_e=_e.parentNode;_e!==document.body&&_e!==document.documentElement?(_e===document&&(_e=Ke()),t.top+=_e.scrollTop,t.left+=_e.scrollLeft):_e=Ke(),ri=bs(_e)}U=k.cloneNode(!0),Oe(U,n.ghostClass,!1),Oe(U,n.fallbackClass,!0),Oe(U,n.dragClass,!0),R(U,"transition",""),R(U,"transform",""),R(U,"box-sizing","border-box"),R(U,"margin",0),R(U,"top",t.top),R(U,"left",t.left),R(U,"width",t.width),R(U,"height",t.height),R(U,"opacity","0.8"),R(U,"position",nn?"absolute":"fixed"),R(U,"zIndex","100000"),R(U,"pointerEvents","none"),L.ghost=U,e.appendChild(U),R(U,"transform-origin",Es/parseInt(U.style.width)*100+"% "+Ss/parseInt(U.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,s=n.options;if(Ee("dragStart",this,{evt:e}),L.eventCanceled){this._onDrop();return}Ee("setupClone",this),L.eventCanceled||(ie=zo(k),ie.removeAttribute("id"),ie.draggable=!1,ie.style["will-change"]="",this._hideClone(),Oe(ie,this.options.chosenClass,!1),L.clone=ie),n.cloneId=_n(function(){Ee("clone",n),!L.eventCanceled&&(n.options.removeCloneOnHide||te.insertBefore(ie,k),n._hideClone(),me({sortable:n,name:"clone"}))}),!t&&Oe(k,s.dragClass,!0),t?(xn=!0,n._loopId=setInterval(n._emulateDragOver,50)):(B(document,"mouseup",n._onDrop),B(document,"touchend",n._onDrop),B(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(n,i,k)),z(document,"drop",n),R(k,"transform","translateZ(0)")),er=!0,n._dragStartId=_n(n._dragStarted.bind(n,t,e)),z(document,"selectstart",n),Tr=!0,window.getSelection().removeAllRanges(),Pr&&R(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,i,s,o,a=this.options,l=a.group,u=L.active,c=tn===l,h=a.sort,d=ve||u,f,p=this,v=!1;if(Si)return;function g(T,N){Ee(T,p,Ze({evt:e,isOwner:c,axis:f?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:h,fromSortable:d,target:n,completed:m,onMove:function(G,Z){return sn(te,t,k,i,G,ue(G),e,Z)},changed:w},N))}function _(){g("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function m(T){return g("dragOverCompleted",{insertion:T}),T&&(c?u._hideClone():u._showClone(p),p!==d&&(Oe(k,ve?ve.options.ghostClass:u.options.ghostClass,!1),Oe(k,a.ghostClass,!0)),ve!==p&&p!==L.active?ve=p:p===L.active&&ve&&(ve=null),d===p&&(p._ignoreWhileAnimating=n),p.animateAll(function(){g("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(n===k&&!k.animated||n===t&&!n.animated)&&(Ht=null),!a.dragoverBubble&&!e.rootEl&&n!==document&&(k.parentNode[Te]._isOutsideThisEl(e.target),!T&&Pt(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function w(){Ae=Re(k),_t=Re(k,a.draggable),me({sortable:p,name:"change",toEl:t,newIndex:Ae,newDraggableIndex:_t,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=qe(n,a.draggable,t,!0),g("dragOver"),L.eventCanceled)return v;if(k.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||p._ignoreWhileAnimating===n)return m(!1);if(xn=!1,u&&!a.disabled&&(c?h||(o=oe!==te):ve===this||(this.lastPutMode=tn.checkPull(this,u,k,e))&&l.checkPut(this,u,k,e))){if(f=this._getDirection(e,n)==="vertical",i=ue(k),g("dragOverValid"),L.eventCanceled)return v;if(o)return oe=te,_(),this._hideClone(),g("revert"),L.eventCanceled||(Ct?te.insertBefore(k,Ct):te.appendChild(k)),m(!0);var y=zi(t,a.draggable);if(!y||_u(e,f,this)&&!y.animated){if(y===k)return m(!1);if(y&&t===e.target&&(n=y),n&&(s=ue(n)),sn(te,t,k,i,n,s,e,!!n)!==!1)return _(),y&&y.nextSibling?t.insertBefore(k,y.nextSibling):t.appendChild(k),oe=t,w(),m(!0)}else if(y&&gu(e,f,this)){var b=ur(t,0,a,!0);if(b===k)return m(!1);if(n=b,s=ue(n),sn(te,t,k,i,n,s,e,!1)!==!1)return _(),t.insertBefore(k,b),oe=t,w(),m(!0)}else if(n.parentNode===t){s=ue(n);var x=0,O,P=k.parentNode!==t,j=!hu(k.animated&&k.toRect||i,n.animated&&n.toRect||s,f),D=f?"top":"left",C=ws(n,"top","top")||ws(k,"top","top"),Q=C?C.scrollTop:void 0;Ht!==n&&(O=s[D],jr=!1,rn=!j&&a.invertSwap||P),x=mu(e,n,s,f,j?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,rn,Ht===n);var Y;if(x!==0){var $=Re(k);do $-=x,Y=oe.children[$];while(Y&&(R(Y,"display")==="none"||Y===U))}if(x===0||Y===n)return m(!1);Ht=n,Dr=x;var S=n.nextElementSibling,E=!1;E=x===1;var A=sn(te,t,k,i,n,s,e,E);if(A!==!1)return(A===1||A===-1)&&(E=A===1),Si=!0,setTimeout(vu,30),_(),E&&!S?t.appendChild(k):n.parentNode.insertBefore(k,E?S:n),C&&Ho(C,0,Q-C.scrollTop),oe=k.parentNode,O!==void 0&&!rn&&(gn=Math.abs(O-ue(n)[D])),w(),m(!0)}if(t.contains(k))return m(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){B(document,"mousemove",this._onTouchMove),B(document,"touchmove",this._onTouchMove),B(document,"pointermove",this._onTouchMove),B(document,"dragover",Pt),B(document,"mousemove",Pt),B(document,"touchmove",Pt)},_offUpEvents:function(){var e=this.el.ownerDocument;B(e,"mouseup",this._onDrop),B(e,"touchend",this._onDrop),B(e,"pointerup",this._onDrop),B(e,"pointercancel",this._onDrop),B(e,"touchcancel",this._onDrop),B(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(Ae=Re(k),_t=Re(k,n.draggable),Ee("drop",this,{evt:e}),oe=k&&k.parentNode,Ae=Re(k),_t=Re(k,n.draggable),L.eventCanceled){this._nulling();return}er=!1,rn=!1,jr=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ki(this.cloneId),ki(this._dragStartId),this.nativeDraggable&&(B(document,"drop",this),B(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Pr&&R(document.body,"user-select",""),R(k,"transform",""),e&&(Tr&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),U&&U.parentNode&&U.parentNode.removeChild(U),(te===oe||ve&&ve.lastPutMode!=="clone")&&ie&&ie.parentNode&&ie.parentNode.removeChild(ie),k&&(this.nativeDraggable&&B(k,"dragend",this),ni(k),k.style["will-change"]="",Tr&&!er&&Oe(k,ve?ve.options.ghostClass:this.options.ghostClass,!1),Oe(k,this.options.chosenClass,!1),me({sortable:this,name:"unchoose",toEl:oe,newIndex:null,newDraggableIndex:null,originalEvent:e}),te!==oe?(Ae>=0&&(me({rootEl:oe,name:"add",toEl:oe,fromEl:te,originalEvent:e}),me({sortable:this,name:"remove",toEl:oe,originalEvent:e}),me({rootEl:oe,name:"sort",toEl:oe,fromEl:te,originalEvent:e}),me({sortable:this,name:"sort",toEl:oe,originalEvent:e})),ve&&ve.save()):Ae!==rr&&Ae>=0&&(me({sortable:this,name:"update",toEl:oe,originalEvent:e}),me({sortable:this,name:"sort",toEl:oe,originalEvent:e})),L.active&&((Ae==null||Ae===-1)&&(Ae=rr,_t=Cr),me({sortable:this,name:"end",toEl:oe,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Ee("nulling",this),te=k=oe=U=Ct=ie=vn=yt=At=Be=Tr=Ae=_t=rr=Cr=Ht=Dr=ve=tn=L.dragged=L.ghost=L.clone=L.active=null,Dn.forEach(function(e){e.checked=!0}),Dn.length=ei=ti=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":k&&(this._onDragOver(e),pu(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,i=0,s=n.length,o=this.options;i<s;i++)t=n[i],qe(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||wu(t));return e},sort:function(e,t){var n={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];qe(a,this.options.draggable,i,!1)&&(n[s]=a)},this),t&&this.captureAnimationState(),e.forEach(function(s){n[s]&&(i.removeChild(n[s]),i.appendChild(n[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return qe(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var i=Kr.modifyOption(this,e,t);typeof i<"u"?n[e]=i:n[e]=t,e==="group"&&Vo(n)},destroy:function(){Ee("destroy",this);var e=this.el;e[Te]=null,B(e,"mousedown",this._onTapStart),B(e,"touchstart",this._onTapStart),B(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(B(e,"dragover",this),B(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Cn.splice(Cn.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!yt){if(Ee("hideClone",this),L.eventCanceled)return;R(ie,"display","none"),this.options.removeCloneOnHide&&ie.parentNode&&ie.parentNode.removeChild(ie),yt=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(yt){if(Ee("showClone",this),L.eventCanceled)return;k.parentNode==te&&!this.options.group.revertClone?te.insertBefore(ie,k):Ct?te.insertBefore(ie,Ct):te.appendChild(ie),this.options.group.revertClone&&this.animate(k,ie),R(ie,"display",""),yt=!1}}};function pu(r){r.dataTransfer&&(r.dataTransfer.dropEffect="move"),r.cancelable&&r.preventDefault()}function sn(r,e,t,n,i,s,o,a){var l,u=r[Te],c=u.options.onMove,h;return window.CustomEvent&&!ht&&!Yr?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=r,l.dragged=t,l.draggedRect=n,l.related=i||e,l.relatedRect=s||ue(e),l.willInsertAfter=a,l.originalEvent=o,r.dispatchEvent(l),c&&(h=c.call(u,l,o)),h}function ni(r){r.draggable=!1}function vu(){Si=!1}function gu(r,e,t){var n=ue(ur(t.el,0,t.options,!0)),i=Wo(t.el,t.options,U),s=10;return e?r.clientX<i.left-s||r.clientY<n.top&&r.clientX<n.right:r.clientY<i.top-s||r.clientY<n.bottom&&r.clientX<n.left}function _u(r,e,t){var n=ue(zi(t.el,t.options.draggable)),i=Wo(t.el,t.options,U),s=10;return e?r.clientX>i.right+s||r.clientY>n.bottom&&r.clientX>n.left:r.clientY>i.bottom+s||r.clientX>n.right&&r.clientY>n.top}function mu(r,e,t,n,i,s,o,a){var l=n?r.clientY:r.clientX,u=n?t.height:t.width,c=n?t.top:t.left,h=n?t.bottom:t.right,d=!1;if(!o){if(a&&gn<u*i){if(!jr&&(Dr===1?l>c+u*s/2:l<h-u*s/2)&&(jr=!0),jr)d=!0;else if(Dr===1?l<c+gn:l>h-gn)return-Dr}else if(l>c+u*(1-i)/2&&l<h-u*(1-i)/2)return yu(e)}return d=d||o,d&&(l<c+u*s/2||l>h-u*s/2)?l>c+u/2?1:-1:0}function yu(r){return Re(k)<Re(r)?1:-1}function wu(r){for(var e=r.tagName+r.className+r.src+r.href+r.textContent,t=e.length,n=0;t--;)n+=e.charCodeAt(t);return n.toString(36)}function bu(r){Dn.length=0;for(var e=r.getElementsByTagName("input"),t=e.length;t--;){var n=e[t];n.checked&&Dn.push(n)}}function _n(r){return setTimeout(r,0)}function ki(r){return clearTimeout(r)}Wn&&z(document,"touchmove",function(r){(L.active||er)&&r.cancelable&&r.preventDefault()});L.utils={on:z,off:B,css:R,find:Bo,is:function(e,t){return!!qe(e,t,e,!1)},extend:nu,throttle:qo,closest:qe,toggleClass:Oe,clone:zo,index:Re,nextTick:_n,cancelNextTick:ki,detectDirection:Jo,getChild:ur,expando:Te};L.get=function(r){return r[Te]};L.mount=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(L.utils=Ze(Ze({},L.utils),n.utils)),Kr.mount(n)})};L.create=function(r,e){return new L(r,e)};L.version=tu;var le=[],Or,Ti,Oi=!1,ii,si,jn,$r;function Eu(){function r(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return r.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?z(document,"dragover",this._handleAutoScroll):this.options.supportPointer?z(document,"pointermove",this._handleFallbackAutoScroll):n.touches?z(document,"touchmove",this._handleFallbackAutoScroll):z(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?B(document,"dragover",this._handleAutoScroll):(B(document,"pointermove",this._handleFallbackAutoScroll),B(document,"touchmove",this._handleFallbackAutoScroll),B(document,"mousemove",this._handleFallbackAutoScroll)),Ts(),mn(),iu()},nulling:function(){jn=Ti=Or=Oi=$r=ii=si=null,le.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var i=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(s,o);if(jn=t,n||this.options.forceAutoScrollFallback||Yr||ht||Pr){oi(t,this.options,a,n);var l=Et(a,!0);Oi&&(!$r||s!==ii||o!==si)&&($r&&Ts(),$r=setInterval(function(){var u=Et(document.elementFromPoint(s,o),!0);u!==l&&(l=u,mn()),oi(t,i.options,u,n)},10),ii=s,si=o)}else{if(!this.options.bubbleScroll||Et(a,!0)===Ke()){mn();return}oi(t,this.options,Et(a,!1),!1)}}},lt(r,{pluginName:"scroll",initializeByDefault:!0})}function mn(){le.forEach(function(r){clearInterval(r.pid)}),le=[]}function Ts(){clearInterval($r)}var oi=qo(function(r,e,t,n){if(e.scroll){var i=(r.touches?r.touches[0]:r).clientX,s=(r.touches?r.touches[0]:r).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Ke(),u=!1,c;Ti!==t&&(Ti=t,mn(),Or=e.scroll,c=e.scrollFn,Or===!0&&(Or=Et(t,!0)));var h=0,d=Or;do{var f=d,p=ue(f),v=p.top,g=p.bottom,_=p.left,m=p.right,w=p.width,y=p.height,b=void 0,x=void 0,O=f.scrollWidth,P=f.scrollHeight,j=R(f),D=f.scrollLeft,C=f.scrollTop;f===l?(b=w<O&&(j.overflowX==="auto"||j.overflowX==="scroll"||j.overflowX==="visible"),x=y<P&&(j.overflowY==="auto"||j.overflowY==="scroll"||j.overflowY==="visible")):(b=w<O&&(j.overflowX==="auto"||j.overflowX==="scroll"),x=y<P&&(j.overflowY==="auto"||j.overflowY==="scroll"));var Q=b&&(Math.abs(m-i)<=o&&D+w<O)-(Math.abs(_-i)<=o&&!!D),Y=x&&(Math.abs(g-s)<=o&&C+y<P)-(Math.abs(v-s)<=o&&!!C);if(!le[h])for(var $=0;$<=h;$++)le[$]||(le[$]={});(le[h].vx!=Q||le[h].vy!=Y||le[h].el!==f)&&(le[h].el=f,le[h].vx=Q,le[h].vy=Y,clearInterval(le[h].pid),(Q!=0||Y!=0)&&(u=!0,le[h].pid=setInterval((function(){n&&this.layer===0&&L.active._onTouchMove(jn);var S=le[this.layer].vy?le[this.layer].vy*a:0,E=le[this.layer].vx?le[this.layer].vx*a:0;typeof c=="function"&&c.call(L.dragged.parentNode[Te],E,S,r,jn,le[this.layer].el)!=="continue"||Ho(le[this.layer].el,E,S)}).bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==l&&(d=Et(d,!1)));Oi=u}},30),Xo=function(e){var t=e.originalEvent,n=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var u=n||s;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,h=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(h)&&(o("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function Wi(){}Wi.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=ur(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Xo};lt(Wi,{pluginName:"revertOnSpill"});function Gi(){}Gi.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,i=n||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:Xo};lt(Gi,{pluginName:"removeOnSpill"});L.mount(new Eu);L.mount(Gi,Wi);const Su="modulepreload",ku=function(r){return"/github-projects-dashboard/"+r},Os={},cr=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let o=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=o(t.map(u=>{if(u=ku(u),u in Os)return;Os[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Su,c||(d.as="script"),d.crossOrigin="",d.href=u,l&&d.setAttribute("nonce",l),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},Tu=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>cr(async()=>{const{default:n}=await Promise.resolve().then(()=>mr);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class Ji extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Ou extends Ji{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class $u extends Ji{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Au extends Ji{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var $i;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})($i||($i={}));var Pu=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class xu{constructor(e,{headers:t={},customFetch:n,region:i=$i.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=Tu(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return Pu(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=t;let a={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:u}).catch(p=>{throw new Ou(p)}),h=c.headers.get("x-relay-error");if(h&&h==="true")throw new $u(c);if(!c.ok)throw new Au(c);let d=((n=c.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),f;return d==="application/json"?f=yield c.json():d==="application/octet-stream"?f=yield c.blob():d==="text/event-stream"?f=c:d==="multipart/form-data"?f=yield c.formData():f=yield c.text(),{data:f,error:null}}catch(i){return{data:null,error:i}}})}}function Vi(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Cu(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var de={},zt={},Wt={},Gt={},Jt={},Vt={},Du=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},hr=Du();const ju=hr.fetch,Qo=hr.fetch.bind(hr),Zo=hr.Headers,Iu=hr.Request,Ru=hr.Response,mr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Zo,Request:Iu,Response:Ru,default:Qo,fetch:ju},Symbol.toStringTag,{value:"Module"})),Lu=Cu(mr);var on={},$s;function ea(){if($s)return on;$s=1,Object.defineProperty(on,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return on.default=r,on}var As;function ta(){if(As)return Vt;As=1;var r=Vt&&Vt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Vt,"__esModule",{value:!0});const e=r(Lu),t=r(ea());class n{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=Object.assign({},this.headers),this.headers[s]=o,this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var c,h,d;let f=null,p=null,v=null,g=u.status,_=u.statusText;if(u.ok){if(this.method!=="HEAD"){const b=await u.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=b:p=JSON.parse(b))}const w=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),y=(h=u.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");w&&y&&y.length>1&&(v=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(f={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,v=null,g=406,_="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const w=await u.text();try{f=JSON.parse(w),Array.isArray(f)&&u.status===404&&(p=[],f=null,g=200,_="OK")}catch{u.status===404&&w===""?(g=204,_="No Content"):f={message:w}}if(f&&this.isMaybeSingle&&(!((d=f==null?void 0:f.details)===null||d===void 0)&&d.includes("0 rows"))&&(f=null,g=200,_="OK"),f&&this.shouldThrowOnError)throw new t.default(f)}return{error:f,data:p,count:v,status:g,statusText:_}});return this.shouldThrowOnError||(l=l.catch(u=>{var c,h,d;return{error:{message:`${(c=u==null?void 0:u.name)!==null&&c!==void 0?c:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(d=u==null?void 0:u.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),l.then(s,o)}returns(){return this}overrideTypes(){return this}}return Vt.default=n,Vt}var Ps;function ra(){if(Ps)return Jt;Ps=1;var r=Jt&&Jt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Jt,"__esModule",{value:!0});const e=r(ta());class t extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var c;const h=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),d=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${d}"; options=${h};`,u==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Jt.default=t,Jt}var xs;function Yi(){if(xs)return Gt;xs=1;var r=Gt&&Gt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Gt,"__esModule",{value:!0});const e=r(ra());class t extends e.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${u}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return Gt.default=t,Gt}var Cs;function na(){if(Cs)return Wt;Cs=1;var r=Wt&&Wt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Wt,"__esModule",{value:!0});const e=r(Yi());class t{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=s,this.schema=o,this.fetch=a}select(i,{head:s=!1,count:o}={}){const a=s?"HEAD":"GET";let l=!1;const u=(i??"*").split("").map(c=>/\s/.test(c)&&!l?"":(c==='"'&&(l=!l),c)).join("");return this.url.searchParams.set("select",u),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:s,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){const u=i.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const u="POST",c=[`resolution=${o?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(i)){const h=i.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(h.length>0){const d=[...new Set(h)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:s}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const s="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Wt.default=t,Wt}var Er={},Sr={},Ds;function Nu(){return Ds||(Ds=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.version=void 0,Sr.version="0.0.0-automated"),Sr}var js;function Mu(){if(js)return Er;js=1,Object.defineProperty(Er,"__esModule",{value:!0}),Er.DEFAULT_HEADERS=void 0;const r=Nu();return Er.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${r.version}`},Er}var Is;function Uu(){if(Is)return zt;Is=1;var r=zt&&zt.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(zt,"__esModule",{value:!0});const e=r(na()),t=r(Yi()),n=Mu();class i{constructor(o,{headers:a={},schema:l,fetch:u}={}){this.url=o,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=u}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:u=!1,count:c}={}){let h;const d=new URL(`${this.url}/rpc/${o}`);let f;l||u?(h=l?"HEAD":"GET",Object.entries(a).filter(([v,g])=>g!==void 0).map(([v,g])=>[v,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([v,g])=>{d.searchParams.append(v,g)})):(h="POST",f=a);const p=Object.assign({},this.headers);return c&&(p.Prefer=`count=${c}`),new t.default({method:h,url:d,headers:p,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}}return zt.default=i,zt}var Rs;function Fu(){if(Rs)return de;Rs=1;var r=de&&de.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(de,"__esModule",{value:!0}),de.PostgrestError=de.PostgrestBuilder=de.PostgrestTransformBuilder=de.PostgrestFilterBuilder=de.PostgrestQueryBuilder=de.PostgrestClient=void 0;const e=r(Uu());de.PostgrestClient=e.default;const t=r(na());de.PostgrestQueryBuilder=t.default;const n=r(Yi());de.PostgrestFilterBuilder=n.default;const i=r(ra());de.PostgrestTransformBuilder=i.default;const s=r(ta());de.PostgrestBuilder=s.default;const o=r(ea());return de.PostgrestError=o.default,de.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:o.default},de}var Bu=Fu();const qu=Vi(Bu),{PostgrestClient:Hu,PostgrestQueryBuilder:dd,PostgrestFilterBuilder:fd,PostgrestTransformBuilder:pd,PostgrestBuilder:vd,PostgrestError:gd}=qu,zu="2.11.2",Wu={"X-Client-Info":`realtime-js/${zu}`},Gu="1.0.0",ia=1e4,Ju=1e3;var ir;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(ir||(ir={}));var Pe;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Pe||(Pe={}));var He;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(He||(He={}));var Ai;(function(r){r.websocket="websocket"})(Ai||(Ai={}));var It;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(It||(It={}));class Vu{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+i));o=o+i;const l=n.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class sa{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var X;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(X||(X={}));const Ls=(r,e,t={})=>{var n;const i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((s,o)=>(s[o]=Yu(o,r,e,i),s),{})},Yu=(r,e,t,n)=>{const i=e.find(a=>a.name===r),s=i==null?void 0:i.type,o=t[r];return s&&!n.includes(s)?oa(s,o):Pi(o)},oa=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Zu(e,t)}switch(r){case X.bool:return Ku(e);case X.float4:case X.float8:case X.int2:case X.int4:case X.int8:case X.numeric:case X.oid:return Xu(e);case X.json:case X.jsonb:return Qu(e);case X.timestamp:return ec(e);case X.abstime:case X.date:case X.daterange:case X.int4range:case X.int8range:case X.money:case X.reltime:case X.text:case X.time:case X.timestamptz:case X.timetz:case X.tsrange:case X.tstzrange:return Pi(e);default:return Pi(e)}},Pi=r=>r,Ku=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Xu=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Qu=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Zu=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let s;const o=r.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>oa(e,a))}return r},ec=r=>typeof r=="string"?r.replace(" ","T"):r,aa=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ai{constructor(e,t,n={},i=ia){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ns;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Ns||(Ns={}));class Ir{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ir.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Ir.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ir.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const h=s[u];if(h){const d=c.map(g=>g.presence_ref),f=h.map(g=>g.presence_ref),p=c.filter(g=>f.indexOf(g.presence_ref)<0),v=h.filter(g=>d.indexOf(g.presence_ref)<0);p.length>0&&(a[u]=p),v.length>0&&(l[u]=v)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},n,i)}static syncDiff(e,t,n,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const h=e[a].map(f=>f.presence_ref),d=c.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...d)}n(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return"metas"in i?t[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[n]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ms;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Ms||(Ms={}));var Us;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Us||(Us={}));var et;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(et||(et={}));class Ki{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Pe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ai(this,He.join,this.params,this.timeout),this.rejoinTimer=new sa(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pe.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(He.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Ir(this),this.broadcastEndpointURL=aa(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(c=>e==null?void 0:e(et.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(et.CLOSED));const l={},u={broadcast:s,presence:o,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(c=>c.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:c})=>{var h;if(this.socket.setAuth(),c===void 0){e==null||e(et.SUBSCRIBED);return}else{const d=this.bindings.postgres_changes,f=(h=d==null?void 0:d.length)!==null&&h!==void 0?h:0,p=[];for(let v=0;v<f;v++){const g=d[v],{filter:{event:_,schema:m,table:w,filter:y}}=g,b=c&&c[v];if(b&&b.event===_&&b.schema===m&&b.table===w&&b.filter===y)p.push(Object.assign(Object.assign({},g),{id:b.id}));else{this.unsubscribe(),e==null||e(et.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(et.SUBSCRIBED);return}}).receive("error",c=>{e==null||e(et.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(et.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Pe.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(He.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const i=new ai(this,He.leave,{},e);i.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,t,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ai(this,e,t,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=He;if(n&&[a,l,u,c].indexOf(o)>=0&&n!==this._joinRef())return;let d=this._onMessage(o,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var p,v,g;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((g=(v=f.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(f=>f.callback(d,n)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var p,v,g,_,m,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const y=f.id,b=(p=f.filter)===null||p===void 0?void 0:p.event;return y&&((v=t.ids)===null||v===void 0?void 0:v.includes(y))&&(b==="*"||(b==null?void 0:b.toLocaleLowerCase())===((g=t.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const y=(m=(_=f==null?void 0:f.filter)===null||_===void 0?void 0:_.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return y==="*"||y===((w=t==null?void 0:t.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const p=d.data,{schema:v,table:g,commit_timestamp:_,type:m,errors:w}=p;d=Object.assign(Object.assign({},{schema:v,table:g,commit_timestamp:_,eventType:m,new:{},old:{},errors:w}),this._getPayloadRecords(p))}f.callback(d,n)})}_isClosed(){return this.state===Pe.closed}_isJoined(){return this.state===Pe.joined}_isJoining(){return this.state===Pe.joining}_isLeaving(){return this.state===Pe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&Ki.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(He.close,{},e)}_onError(e){this._on(He.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Ls(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Ls(e.columns,e.old_record)),t}}const tc=()=>{},rc=typeof WebSocket<"u",nc=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ic{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Wu,this.params={},this.timeout=ia,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=tc,this.conn=null,this.sendBuffer=[],this.serializer=new Vu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>cr(async()=>{const{default:l}=await Promise.resolve().then(()=>mr);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Ai.websocket}`,this.httpEndpoint=aa(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new sa(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(rc){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new sc(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),cr(async()=>{const{default:e}=await import("./browser-Xu5Kk9u2.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Gu}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ir.connecting:return It.Connecting;case ir.open:return It.Open;case ir.closing:return It.Closing;default:return It.Closed}}isConnected(){return this.connectionState()===It.Open}channel(e,t={config:{}}){const n=new Ki(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let n=null;try{n=JSON.parse(atob(t.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=t,this.channels.forEach(i=>{t&&i.updateJoinPayload({access_token:t}),i.joinedOnce&&i._isJoined()&&i._push(He.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Ju,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:i,payload:s,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${n} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(n)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(He.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([nc],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class sc{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ir.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class Xi extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function fe(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class oc extends Xi{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class xi extends Xi{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ac=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const la=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>cr(async()=>{const{default:n}=await Promise.resolve().then(()=>mr);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},lc=()=>ac(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield cr(()=>Promise.resolve().then(()=>mr),void 0)).Response:Response}),Ci=r=>{if(Array.isArray(r))return r.map(t=>Ci(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Ci(n)}),e};var Mt=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const li=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),uc=(r,e,t)=>Mt(void 0,void 0,void 0,function*(){const n=yield lc();r instanceof n&&!(t!=null&&t.noResolveJson)?r.json().then(i=>{e(new oc(li(i),r.status||500))}).catch(i=>{e(new xi(li(i),i))}):e(new xi(li(r),r))}),cc=(r,e,t,n)=>{const i={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),t))};function Xr(r,e,t,n,i,s){return Mt(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,cc(e,n,i,s)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>uc(l,a,n))})})}function In(r,e,t,n){return Mt(this,void 0,void 0,function*(){return Xr(r,"GET",e,t,n)})}function mt(r,e,t,n,i){return Mt(this,void 0,void 0,function*(){return Xr(r,"POST",e,n,i,t)})}function hc(r,e,t,n,i){return Mt(this,void 0,void 0,function*(){return Xr(r,"PUT",e,n,i,t)})}function dc(r,e,t,n){return Mt(this,void 0,void 0,function*(){return Xr(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function ua(r,e,t,n,i){return Mt(this,void 0,void 0,function*(){return Xr(r,"DELETE",e,n,i,t)})}var Se=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const fc={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Fs={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class pc{constructor(e,t={},n,i){this.url=e,this.headers=t,this.bucketId=n,this.fetch=la(i)}uploadOrUpdate(e,t,n,i){return Se(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},Fs),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),d=yield h.json();return h.ok?{data:{path:u,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}upload(e,t,n){return Se(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,i){return Se(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:Fs.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),d=yield h.json();return h.ok?{data:{path:s,fullPath:d.Key},error:null}:{data:null,error:d}}catch(l){if(fe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Se(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield mt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new Xi("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}update(e,t,n){return Se(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Se(this,void 0,void 0,function*(){try{return{data:yield mt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(fe(i))return{data:null,error:i};throw i}})}copy(e,t,n){return Se(this,void 0,void 0,function*(){try{return{data:{path:(yield mt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(fe(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,n){return Se(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield mt(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(fe(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,n){return Se(this,void 0,void 0,function*(){try{const i=yield mt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(fe(i))return{data:null,error:i};throw i}})}download(e,t){return Se(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield In(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(fe(a))return{data:null,error:a};throw a}})}info(e){return Se(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield In(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Ci(n),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}exists(e){return Se(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield dc(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(fe(n)&&n instanceof xi){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(e){return Se(this,void 0,void 0,function*(){try{return{data:yield ua(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(fe(t))return{data:null,error:t};throw t}})}list(e,t,n){return Se(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},fc),t),{prefix:e||""});return{data:yield mt(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(fe(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const vc="2.7.1",gc={"X-Client-Info":`storage-js/${vc}`};var Yt=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class _c{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},gc),t),this.fetch=la(n)}listBuckets(){return Yt(this,void 0,void 0,function*(){try{return{data:yield In(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(fe(e))return{data:null,error:e};throw e}})}getBucket(e){return Yt(this,void 0,void 0,function*(){try{return{data:yield In(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(fe(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Yt(this,void 0,void 0,function*(){try{return{data:yield mt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Yt(this,void 0,void 0,function*(){try{return{data:yield hc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Yt(this,void 0,void 0,function*(){try{return{data:yield mt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(fe(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Yt(this,void 0,void 0,function*(){try{return{data:yield ua(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(fe(t))return{data:null,error:t};throw t}})}}class mc extends _c{constructor(e,t={},n){super(e,t,n)}from(e){return new pc(this.url,this.headers,e,this.fetch)}}const yc="2.49.4";let Ar="";typeof Deno<"u"?Ar="deno":typeof document<"u"?Ar="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ar="react-native":Ar="node";const wc={"X-Client-Info":`supabase-js-${Ar}/${yc}`},bc={headers:wc},Ec={schema:"public"},Sc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kc={};var Tc=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const Oc=r=>{let e;return r?e=r:typeof fetch>"u"?e=Qo:e=fetch,(...t)=>e(...t)},$c=()=>typeof Headers>"u"?Zo:Headers,Ac=(r,e,t)=>{const n=Oc(t),i=$c();return(s,o)=>Tc(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:r;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",r),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(s,Object.assign(Object.assign({},o),{headers:u}))})};var Pc=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function xc(r){return r.replace(/\/$/,"")}function Cc(r,e){const{db:t,auth:n,realtime:i,global:s}=r,{db:o,auth:a,realtime:l,global:u}=e,c={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},u),s),accessToken:()=>Pc(this,void 0,void 0,function*(){return""})};return r.accessToken?c.accessToken=r.accessToken:delete c.accessToken,c}const ca="2.69.1",tr=30*1e3,Di=3,ui=Di*tr,Dc="http://localhost:9999",jc="supabase.auth.token",Ic={"X-Client-Info":`gotrue-js/${ca}`},ji="X-Supabase-Api-Version",ha={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Rc=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Lc=6e5;class Qi extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function F(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Nc extends Qi{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function Mc(r){return F(r)&&r.name==="AuthApiError"}class da extends Qi{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class $t extends Qi{constructor(e,t,n,i){super(e,n,i),this.name=t,this.status=n}}class pt extends $t{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Uc(r){return F(r)&&r.name==="AuthSessionMissingError"}class ci extends $t{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class an extends $t{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ln extends $t{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Fc(r){return F(r)&&r.name==="AuthImplicitGrantRedirectError"}class Bs extends $t{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ii extends $t{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function hi(r){return F(r)&&r.name==="AuthRetryableFetchError"}class qs extends $t{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Rr extends $t{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Hs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),zs=` 	
\r=`.split(""),Bc=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<zs.length;e+=1)r[zs[e].charCodeAt(0)]=-2;for(let e=0;e<Hs.length;e+=1)r[Hs[e].charCodeAt(0)]=e;return r})();function fa(r,e,t){const n=Bc[r];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Ws(r){const e=[],t=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{zc(o,n,t)};for(let o=0;o<r.length;o+=1)fa(r.charCodeAt(o),i,s);return e.join("")}function qc(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Hc(r,e){for(let t=0;t<r.length;t+=1){let n=r.charCodeAt(t);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(r.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}qc(n,e)}}function zc(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let n=1;n<6;n+=1)if((r>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Wc(r){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<r.length;i+=1)fa(r.charCodeAt(i),t,n);return new Uint8Array(e)}function Gc(r){const e=[];return Hc(r,t=>e.push(t)),new Uint8Array(e)}function Jc(r){return Math.round(Date.now()/1e3)+r}function Vc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Ve=()=>typeof window<"u"&&typeof document<"u",xt={tested:!1,writable:!1},Lr=()=>{if(!Ve())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xt.tested)return xt.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),xt.tested=!0,xt.writable=!0}catch{xt.tested=!0,xt.writable=!1}return xt.writable};function Yc(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((n,i)=>{e[i]=n}),e}const pa=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>cr(async()=>{const{default:n}=await Promise.resolve().then(()=>mr);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},Kc=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",va=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},un=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},cn=async(r,e)=>{await r.removeItem(e)};class Gn{constructor(){this.promise=new Gn.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Gn.promiseConstructor=Promise;function di(r){const e=r.split(".");if(e.length!==3)throw new Rr("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Rc.test(e[n]))throw new Rr("JWT not in base64url format");return{header:JSON.parse(Ws(e[0])),payload:JSON.parse(Ws(e[1])),signature:Wc(e[2]),raw:{header:e[0],payload:e[1]}}}async function Xc(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Qc(r,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await r(s);if(!e(s,null,o)){n(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function Zc(r){return("0"+r.toString(16)).substr(-2)}function eh(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,Zc).join("")}async function th(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function rh(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await th(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Kt(r,e,t=!1){const n=eh();let i=n;t&&(i+="/PASSWORD_RECOVERY"),await va(r,`${e}-code-verifier`,i);const s=await rh(n);return[s,n===s?"plain":"s256"]}const nh=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ih(r){const e=r.headers.get(ji);if(!e||!e.match(nh))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function sh(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function oh(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var ah=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const Dt=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),lh=[502,503,504];async function Gs(r){var e;if(!Kc(r))throw new Ii(Dt(r),0);if(lh.includes(r.status))throw new Ii(Dt(r),r.status);let t;try{t=await r.json()}catch(s){throw new da(Dt(s),s)}let n;const i=ih(r);if(i&&i.getTime()>=ha["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new qs(Dt(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new pt}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new qs(Dt(t),r.status,t.weak_password.reasons);throw new Nc(Dt(t),r.status||500,n)}const uh=(r,e,t,n)=>{const i={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};async function q(r,e,t,n){var i;const s=Object.assign({},n==null?void 0:n.headers);s[ji]||(s[ji]=ha["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await ch(r,e,t+a,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function ch(r,e,t,n,i,s){const o=uh(e,n,i,s);let a;try{a=await r(t,Object.assign({},o))}catch(l){throw console.error(l),new Ii(Dt(l),0)}if(a.ok||await Gs(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await Gs(l)}}function vt(r){var e;let t=null;ph(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Jc(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function Js(r){const e=vt(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function wt(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function hh(r){return{data:r,error:null}}function dh(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:s}=r,o=ah(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function fh(r){return r}function ph(r){return r.access_token&&r.refresh_token&&r.expires_in}var vh=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class gh{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=pa(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await q(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(F(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:wt})}catch(n){if(F(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=vh(e,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:dh,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(F(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:wt})}catch(t){if(F(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:fh});if(c.error)throw c.error;const h=await c.json(),d=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(p=>{const v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(p.split(";")[1].split("=")[1]);u[`${g}Page`]=v}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(F(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:wt})}catch(t){if(F(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:wt})}catch(n){if(F(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:wt})}catch(n){if(F(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:n}}catch(t){if(F(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(F(t))return{data:null,error:t};throw t}}}const _h={getItem:r=>Lr()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{Lr()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{Lr()&&globalThis.localStorage.removeItem(r)}};function Vs(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function mh(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Xt={debug:!!(globalThis&&Lr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ga extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class yh extends ga{}async function wh(r,e,t){Xt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Xt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Xt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,i.name);try{return await t()}finally{Xt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,i.name)}}else{if(e===0)throw Xt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new yh(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Xt.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}mh();const bh={url:Dc,storageKey:jc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ic,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ys(r,e,t){return await t()}class Br{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Br.nextInstanceID,Br.nextInstanceID+=1,this.instanceID>0&&Ve()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},bh),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new gh({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=pa(i.fetch),this.lock=i.lock||Ys,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ve()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=wh:this.lock=Ys,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Lr()?this.storage=_h:(this.memoryStorage={},this.storage=Vs(this.memoryStorage)):(this.memoryStorage={},this.storage=Vs(this.memoryStorage)),Ve()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ca}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Yc(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Ve()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Fc(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return F(t)?{error:t}:{error:new da("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,i;try{const s=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:vt}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(F(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,n,i;try{let s;if("email"in e){const{email:c,password:h,options:d}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Kt(this.storage,this.storageKey)),s=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:c,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:p},xform:vt})}else if("phone"in e){const{phone:c,password:h,options:d}=e;s=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},channel:(i=d==null?void 0:d.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:vt})}else throw new an("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(F(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Js})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Js})}else throw new an("You must provide either an email or phone number and a password");const{data:n,error:i}=t;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ci}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(t){if(F(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await un(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(t??"").split("/");try{const{data:s,error:o}=await q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:vt});if(await cn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new ci}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(F(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:n,token:i,access_token:s,nonce:o}=e,a=await q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:vt}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new ci}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(F(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Kt(this.storage,this.storageKey));const{error:h}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new an("You must provide either an email or phone number.")}catch(a){if(F(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:vt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(F(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,n,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Kt(this.storage,this.storageKey)),await q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:hh})}catch(s){if(F(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new pt;const{error:i}=await q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(F(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:o}=await q(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:o,error:a}=await q(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new an("You must provide either an email or phone number and a type")}catch(t){if(F(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await un(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<ui:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:wt}):await this._useSession(async t=>{var n,i,s;const{data:o,error:a}=t;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pt}:await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:wt})})}catch(t){if(F(t))return Uc(t)&&(await this._removeSession(),await cn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new pt;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Kt(this.storage,this.storageKey));const{data:u,error:c}=await q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:wt});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(F(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new pt;const t=Date.now()/1e3;let n=t,i=!0,s=null;const{payload:o}=di(e.access_token);if(o.exp&&(n=o.exp,i=n<=t),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(F(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new pt;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(F(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ve())throw new ln("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ln(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Bs("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ln("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Bs("No code detected.");const{data:m,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const y=new URL(window.location.href);return y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",y.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!s||!a||!o||!u)throw new ln("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(a);let d=c+h;l&&(d=parseInt(l));const f=d-c;f*1e3<=tr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const p=d-h;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,c);const{data:v,error:g}=await this._getUser(s);if(g)throw g;const _={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:d,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:e.type},error:null}}catch(n){if(F(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await un(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s)return{error:s};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Mc(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await cn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Vc(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Kt(this.storage,this.storageKey,!0));try{return await q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(F(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(F(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:i}=await this._useSession(async s=>{var o,a,l,u,c;const{data:h,error:d}=s;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await q(this.fetch,"GET",f,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return Ve()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(F(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,i;const{data:s,error:o}=t;if(o)throw o;return await q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(F(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await Qc(async i=>(i>0&&await Xc(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:vt})),(i,s)=>{const o=200*Math.pow(2,i);return s&&hi(s)&&Date.now()+o-n<tr})}catch(n){if(this._debug(t,"error",n),F(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Ve()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await un(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<ui;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${ui}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:s}=await this._callRefreshToken(n.refresh_token);s&&(console.error(s),hi(s)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new pt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Gn;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new pt;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),F(s)){const o={session:null,error:s};return hi(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await va(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await cn(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ve()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),tr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/tr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${tr}ms, refresh threshold is ${Di} ticks`),i<=Di&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ga)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ve()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const i=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await Kt(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;return s?{data:null,error:s}:await q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(F(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await q(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(F(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:a}=await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(F(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;return s?{data:null,error:s}:await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(F(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=di(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(t=i.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+Lc>Date.now()))return n;const{data:i,error:s}=await q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!i.keys||i.keys.length===0)throw new Rr("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),n=i.keys.find(o=>o.kid===e),!n)throw new Rr("No matching signing key found in JWKS");return n}async getClaims(e,t={keys:[]}){try{let n=e;if(!n){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};n=f.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=di(n);if(sh(s.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:s,header:i,signature:o},error:null}}const u=oh(i.alg),c=await this.fetchJwk(i.kid,t),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Gc(`${a}.${l}`)))throw new Rr("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(n){if(F(n))return{data:null,error:n};throw n}}}Br.nextInstanceID=0;const Eh=Br;class Sh extends Eh{constructor(e){super(e)}}var kh=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class Th{constructor(e,t,n){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=xc(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:Ec,realtime:kc,auth:Object.assign(Object.assign({},Sc),{storageKey:l}),global:bc},c=Cc(n??{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=Ac(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new Hu(`${a}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new xu(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new mc(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return kh(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,storageKey:s,flowType:o,lock:a,debug:l},u,c){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Sh({url:this.authUrl,headers:Object.assign(Object.assign({},h),u),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new ic(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Oh=(r,e,t)=>new Th(r,e,t),hn=Oh("https://ptmcrrrrdsjgzfdawzkg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB0bWNycnJyZHNqZ3pmZGF3emtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUwMDI4MzYsImV4cCI6MjA2MDU3ODgzNn0.E_jnXoiniR8-X_VBw3BebpeuBCSTGtZb5qgzMONcvDI");/**
 * @license lucide-svelte v0.503.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const $h={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Ah=bl("<svg><!><!></svg>");function Ut(r,e){const t=at(e,["children","$$slots","$$events","$$legacy"]),n=at(t,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);pr(e,!1);let i=Ce(e,"name",8,void 0),s=Ce(e,"color",8,"currentColor"),o=Ce(e,"size",8,24),a=Ce(e,"strokeWidth",8,2),l=Ce(e,"absoluteStrokeWidth",8,!1),u=Ce(e,"iconNode",24,()=>[]);const c=(...v)=>v.filter((g,_,m)=>!!g&&m.indexOf(g)===_).join(" ");Vr();var h=Ah();let d;var f=H(h);Co(f,1,u,Tl,(v,g)=>{let _=()=>I(g)[0],m=()=>I(g)[1];var w=ct(),y=Je(w);xl(y,_,!0,(b,x)=>{let O;xe(()=>O=hs(b,O,{...m()}))}),K(v,w)});var p=se(f);Ot(p,e,"default",{}),xe((v,g)=>d=hs(h,d,{...$h,...n,width:o(),height:o(),stroke:s(),"stroke-width":v,class:g}),[()=>l()?Number(a())*24/Number(o()):a(),()=>c("lucide-icon","lucide",i()?`lucide-${i()}`:"",t.class)],We),K(r,h),vr()}function Ph(r,e){const t=at(e,["children","$$slots","$$events","$$legacy"]);Ut(r,Nt({name:"book"},()=>t,{iconNode:[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}]],children:(i,s)=>{var o=ct(),a=Je(o);Ot(a,e,"default",{}),K(i,o)},$$slots:{default:!0}}))}function xh(r,e){const t=at(e,["children","$$slots","$$events","$$legacy"]);Ut(r,Nt({name:"chevron-down"},()=>t,{iconNode:[["path",{d:"m6 9 6 6 6-6"}]],children:(i,s)=>{var o=ct(),a=Je(o);Ot(a,e,"default",{}),K(i,o)},$$slots:{default:!0}}))}function Ch(r,e){const t=at(e,["children","$$slots","$$events","$$legacy"]);Ut(r,Nt({name:"chevron-right"},()=>t,{iconNode:[["path",{d:"m9 18 6-6-6-6"}]],children:(i,s)=>{var o=ct(),a=Je(o);Ot(a,e,"default",{}),K(i,o)},$$slots:{default:!0}}))}function Dh(r,e){const t=at(e,["children","$$slots","$$events","$$legacy"]);Ut(r,Nt({name:"github"},()=>t,{iconNode:[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}],["path",{d:"M9 18c-4.51 2-5-2-7-2"}]],children:(i,s)=>{var o=ct(),a=Je(o);Ot(a,e,"default",{}),K(i,o)},$$slots:{default:!0}}))}function jh(r,e){const t=at(e,["children","$$slots","$$events","$$legacy"]);Ut(r,Nt({name:"globe"},()=>t,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}],["path",{d:"M2 12h20"}]],children:(i,s)=>{var o=ct(),a=Je(o);Ot(a,e,"default",{}),K(i,o)},$$slots:{default:!0}}))}function Ih(r,e){const t=at(e,["children","$$slots","$$events","$$legacy"]);Ut(r,Nt({name:"loader"},()=>t,{iconNode:[["path",{d:"M12 2v4"}],["path",{d:"m16.2 7.8 2.9-2.9"}],["path",{d:"M18 12h4"}],["path",{d:"m16.2 16.2 2.9 2.9"}],["path",{d:"M12 18v4"}],["path",{d:"m4.9 19.1 2.9-2.9"}],["path",{d:"M2 12h4"}],["path",{d:"m4.9 4.9 2.9 2.9"}]],children:(i,s)=>{var o=ct(),a=Je(o);Ot(a,e,"default",{}),K(i,o)},$$slots:{default:!0}}))}function Rh(r,e){const t=at(e,["children","$$slots","$$events","$$legacy"]);Ut(r,Nt({name:"lock"},()=>t,{iconNode:[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}]],children:(i,s)=>{var o=ct(),a=Je(o);Ot(a,e,"default",{}),K(i,o)},$$slots:{default:!0}}))}const Lh="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20aria-hidden='true'%20role='img'%20class='iconify%20iconify--logos'%20width='26.6'%20height='32'%20preserveAspectRatio='xMidYMid%20meet'%20viewBox='0%200%20256%20308'%3e%3cpath%20fill='%23FF3E00'%20d='M239.682%2040.707C211.113-.182%20154.69-12.301%20113.895%2013.69L42.247%2059.356a82.198%2082.198%200%200%200-37.135%2055.056a86.566%2086.566%200%200%200%208.536%2055.576a82.425%2082.425%200%200%200-12.296%2030.719a87.596%2087.596%200%200%200%2014.964%2066.244c28.574%2040.893%2084.997%2053.007%20125.787%2027.016l71.648-45.664a82.182%2082.182%200%200%200%2037.135-55.057a86.601%2086.601%200%200%200-8.53-55.577a82.409%2082.409%200%200%200%2012.29-30.718a87.573%2087.573%200%200%200-14.963-66.244'%3e%3c/path%3e%3cpath%20fill='%23FFF'%20d='M106.889%20270.841c-23.102%206.007-47.497-3.036-61.103-22.648a52.685%2052.685%200%200%201-9.003-39.85a49.978%2049.978%200%200%201%201.713-6.693l1.35-4.115l3.671%202.697a92.447%2092.447%200%200%200%2028.036%2014.007l2.663.808l-.245%202.659a16.067%2016.067%200%200%200%202.89%2010.656a17.143%2017.143%200%200%200%2018.397%206.828a15.786%2015.786%200%200%200%204.403-1.935l71.67-45.672a14.922%2014.922%200%200%200%206.734-9.977a15.923%2015.923%200%200%200-2.713-12.011a17.156%2017.156%200%200%200-18.404-6.832a15.78%2015.78%200%200%200-4.396%201.933l-27.35%2017.434a52.298%2052.298%200%200%201-14.553%206.391c-23.101%206.007-47.497-3.036-61.101-22.649a52.681%2052.681%200%200%201-9.004-39.849a49.428%2049.428%200%200%201%2022.34-33.114l71.664-45.677a52.218%2052.218%200%200%201%2014.563-6.398c23.101-6.007%2047.497%203.036%2061.101%2022.648a52.685%2052.685%200%200%201%209.004%2039.85a50.559%2050.559%200%200%201-1.713%206.692l-1.35%204.116l-3.67-2.693a92.373%2092.373%200%200%200-28.037-14.013l-2.664-.809l.246-2.658a16.099%2016.099%200%200%200-2.89-10.656a17.143%2017.143%200%200%200-18.398-6.828a15.786%2015.786%200%200%200-4.402%201.935l-71.67%2045.674a14.898%2014.898%200%200%200-6.73%209.975a15.9%2015.9%200%200%200%202.709%2012.012a17.156%2017.156%200%200%200%2018.404%206.832a15.841%2015.841%200%200%200%204.402-1.935l27.345-17.427a52.147%2052.147%200%200%201%2014.552-6.397c23.101-6.006%2047.497%203.037%2061.102%2022.65a52.681%2052.681%200%200%201%209.003%2039.848a49.453%2049.453%200%200%201-22.34%2033.12l-71.664%2045.673a52.218%2052.218%200%200%201-14.563%206.398'%3e%3c/path%3e%3c/svg%3e";var Nh=ge('<img alt="Avatar" class="w-8 h-8 rounded-full">'),Mh=ge('<div class="absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-md p-2"><a target="_blank" class="block px-4 py-2 hover:bg-githubButtonHoverBgColor">GitHub Profile</a> <a target="_blank" class="block px-4 py-2 hover:bg-githubButtonHoverBgColor">GitHub Projects</a> <button class="block w-full text-left px-4 py-2 hover:bg-githubRedHoverBgColor hover:text-githubRedColor">Logout</button></div>'),Uh=ge('<div class="relative"><button class="flex items-center gap-3"><span class="text-sm font-bold"> </span> <!></button> <!></div>'),Fh=ge('<nav class="text-githubPrimaryTextColor font-semibold flex gap-2"><a href="https://github.com/weibeld/github-projects-dashboard" target="_blank" class="_box-link font-semibold"><!>Docs</a> <a href="https://github.com/weibeld/github-projects-dashboard" target="_blank" class="_box-link font-semibold"><!>GitHub</a></nav>'),Bh=ge('<header class="h-16 flex items-center justify-between px-4 bg-githubBgColor border-b border-githubBorderColor"><div class="text-xl font-semibold flex items-center gap-2"><img alt="Logo" class="w-8 h-8"> GitHub Projects Dashboard</div> <!></header>');function qh(r,e){pr(e,!1);const t=Le(),n=Le(),i=Le(),s=Le(),o=Le();let a=Ce(e,"session",8),l=Ce(e,"onLogout",8),u=Le(!1);function c(){re(u,!1)}Zt(()=>zn(a()),()=>{var _;re(t,((_=a())==null?void 0:_.user)??null)}),Zt(()=>I(t),()=>{var _,m;re(n,(m=(_=I(t))==null?void 0:_.user_metadata)==null?void 0:m.user_name)}),Zt(()=>I(t),()=>{var _,m;re(i,(m=(_=I(t))==null?void 0:_.user_metadata)==null?void 0:m.avatar_url)}),Zt(()=>I(n),()=>{re(s,`https://github.com/${I(n)}`)}),Zt(()=>I(s),()=>{re(o,`${I(s)}?tab=projects`)}),_o(),Vr();var h=Bh(),d=H(h),f=H(d);Rt(f,"src",Lh);var p=se(d,2);{var v=_=>{var m=Uh(),w=H(m),y=H(w),b=H(y),x=se(y,2);{var O=D=>{var C=Nh();xe(()=>Rt(C,"src",I(i))),K(D,C)};ze(x,D=>{I(i)&&D(O)})}var P=se(w,2);{var j=D=>{var C=Mh(),Q=H(C),Y=se(Q,2),$=se(Y,2);xe(()=>{Rt(Q,"href",I(s)),Rt(Y,"href",I(o))}),$n("click",$,function(...S){var E;(E=l())==null||E.apply(this,S)}),K(D,C)};ze(P,D=>{I(u)&&D(j)})}Cl(m,(D,C)=>clickOutside==null?void 0:clickOutside(D,C),()=>c),xe(()=>Ie(b,I(n))),$n("click",w,()=>re(u,!I(u))),K(_,m)},g=_=>{var m=Fh(),w=H(m),y=H(w);Ph(y,{class:"_icon"});var b=se(w,2),x=H(b);Dh(x,{class:"_icon"}),K(_,m)};ze(p,_=>{a()?_(v):_(g,!1)})}K(r,h),vr()}function Hh(r){const e=r-1;return e*e*e+1}function zh(r,{delay:e=0,duration:t=400,easing:n=Hh,axis:i="y"}={}){const s=getComputedStyle(r),o=+s.opacity,a=i==="y"?"height":"width",l=parseFloat(s[a]),u=i==="y"?["top","bottom"]:["left","right"],c=u.map(_=>`${_[0].toUpperCase()}${_.slice(1)}`),h=parseFloat(s[`padding${c[0]}`]),d=parseFloat(s[`padding${c[1]}`]),f=parseFloat(s[`margin${c[0]}`]),p=parseFloat(s[`margin${c[1]}`]),v=parseFloat(s[`border${c[0]}Width`]),g=parseFloat(s[`border${c[1]}Width`]);return{delay:e,duration:t,easing:n,css:_=>`overflow: hidden;opacity: ${Math.min(_*20,1)*o};${a}: ${_*l}px;padding-${u[0]}: ${_*h}px;padding-${u[1]}: ${_*d}px;margin-${u[0]}: ${_*f}px;margin-${u[1]}: ${_*p}px;border-${u[0]}-width: ${_*v}px;border-${u[1]}-width: ${_*g}px;min-${a}: 0`}}var yn={exports:{}},Wh=yn.exports,Ks;function Gh(){return Ks||(Ks=1,function(r,e){(function(t,n){r.exports=n()})(Wh,function(){var t=1e3,n=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",u="day",c="week",h="month",d="quarter",f="year",p="date",v="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var S=["th","st","nd","rd"],E=$%100;return"["+$+(S[(E-20)%10]||S[E]||S[0])+"]"}},w=function($,S,E){var A=String($);return!A||A.length>=S?$:""+Array(S+1-A.length).join(E)+$},y={s:w,z:function($){var S=-$.utcOffset(),E=Math.abs(S),A=Math.floor(E/60),T=E%60;return(S<=0?"+":"-")+w(A,2,"0")+":"+w(T,2,"0")},m:function $(S,E){if(S.date()<E.date())return-$(E,S);var A=12*(E.year()-S.year())+(E.month()-S.month()),T=S.clone().add(A,h),N=E-T<0,M=S.clone().add(A+(N?-1:1),h);return+(-(A+(E-T)/(N?T-M:M-T))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:h,y:f,w:c,d:u,D:p,h:l,m:a,s:o,ms:s,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},b="en",x={};x[b]=m;var O="$isDayjsObject",P=function($){return $ instanceof Q||!(!$||!$[O])},j=function $(S,E,A){var T;if(!S)return b;if(typeof S=="string"){var N=S.toLowerCase();x[N]&&(T=N),E&&(x[N]=E,T=N);var M=S.split("-");if(!T&&M.length>1)return $(M[0])}else{var G=S.name;x[G]=S,T=G}return!A&&T&&(b=T),T||!A&&b},D=function($,S){if(P($))return $.clone();var E=typeof S=="object"?S:{};return E.date=$,E.args=arguments,new Q(E)},C=y;C.l=j,C.i=P,C.w=function($,S){return D($,{locale:S.$L,utc:S.$u,x:S.$x,$offset:S.$offset})};var Q=function(){function $(E){this.$L=j(E.locale,null,!0),this.parse(E),this.$x=this.$x||E.x||{},this[O]=!0}var S=$.prototype;return S.parse=function(E){this.$d=function(A){var T=A.date,N=A.utc;if(T===null)return new Date(NaN);if(C.u(T))return new Date;if(T instanceof Date)return new Date(T);if(typeof T=="string"&&!/Z$/i.test(T)){var M=T.match(g);if(M){var G=M[2]-1||0,Z=(M[7]||"0").substring(0,3);return N?new Date(Date.UTC(M[1],G,M[3]||1,M[4]||0,M[5]||0,M[6]||0,Z)):new Date(M[1],G,M[3]||1,M[4]||0,M[5]||0,M[6]||0,Z)}}return new Date(T)}(E),this.init()},S.init=function(){var E=this.$d;this.$y=E.getFullYear(),this.$M=E.getMonth(),this.$D=E.getDate(),this.$W=E.getDay(),this.$H=E.getHours(),this.$m=E.getMinutes(),this.$s=E.getSeconds(),this.$ms=E.getMilliseconds()},S.$utils=function(){return C},S.isValid=function(){return this.$d.toString()!==v},S.isSame=function(E,A){var T=D(E);return this.startOf(A)<=T&&T<=this.endOf(A)},S.isAfter=function(E,A){return D(E)<this.startOf(A)},S.isBefore=function(E,A){return this.endOf(A)<D(E)},S.$g=function(E,A,T){return C.u(E)?this[A]:this.set(T,E)},S.unix=function(){return Math.floor(this.valueOf()/1e3)},S.valueOf=function(){return this.$d.getTime()},S.startOf=function(E,A){var T=this,N=!!C.u(A)||A,M=C.p(E),G=function(Fe,he){var dt=C.w(T.$u?Date.UTC(T.$y,he,Fe):new Date(T.$y,he,Fe),T);return N?dt:dt.endOf(u)},Z=function(Fe,he){return C.w(T.toDate()[Fe].apply(T.toDate("s"),(N?[0,0,0,0]:[23,59,59,999]).slice(he)),T)},ae=this.$W,ce=this.$M,W=this.$D,ne="set"+(this.$u?"UTC":"");switch(M){case f:return N?G(1,0):G(31,11);case h:return N?G(1,ce):G(0,ce+1);case c:var pe=this.$locale().weekStart||0,Ue=(ae<pe?ae+7:ae)-pe;return G(N?W-Ue:W+(6-Ue),ce);case u:case p:return Z(ne+"Hours",0);case l:return Z(ne+"Minutes",1);case a:return Z(ne+"Seconds",2);case o:return Z(ne+"Milliseconds",3);default:return this.clone()}},S.endOf=function(E){return this.startOf(E,!1)},S.$set=function(E,A){var T,N=C.p(E),M="set"+(this.$u?"UTC":""),G=(T={},T[u]=M+"Date",T[p]=M+"Date",T[h]=M+"Month",T[f]=M+"FullYear",T[l]=M+"Hours",T[a]=M+"Minutes",T[o]=M+"Seconds",T[s]=M+"Milliseconds",T)[N],Z=N===u?this.$D+(A-this.$W):A;if(N===h||N===f){var ae=this.clone().set(p,1);ae.$d[G](Z),ae.init(),this.$d=ae.set(p,Math.min(this.$D,ae.daysInMonth())).$d}else G&&this.$d[G](Z);return this.init(),this},S.set=function(E,A){return this.clone().$set(E,A)},S.get=function(E){return this[C.p(E)]()},S.add=function(E,A){var T,N=this;E=Number(E);var M=C.p(A),G=function(ce){var W=D(N);return C.w(W.date(W.date()+Math.round(ce*E)),N)};if(M===h)return this.set(h,this.$M+E);if(M===f)return this.set(f,this.$y+E);if(M===u)return G(1);if(M===c)return G(7);var Z=(T={},T[a]=n,T[l]=i,T[o]=t,T)[M]||1,ae=this.$d.getTime()+E*Z;return C.w(ae,this)},S.subtract=function(E,A){return this.add(-1*E,A)},S.format=function(E){var A=this,T=this.$locale();if(!this.isValid())return T.invalidDate||v;var N=E||"YYYY-MM-DDTHH:mm:ssZ",M=C.z(this),G=this.$H,Z=this.$m,ae=this.$M,ce=T.weekdays,W=T.months,ne=T.meridiem,pe=function(he,dt,yr,Qr){return he&&(he[dt]||he(A,N))||yr[dt].slice(0,Qr)},Ue=function(he){return C.s(G%12||12,he,"0")},Fe=ne||function(he,dt,yr){var Qr=he<12?"AM":"PM";return yr?Qr.toLowerCase():Qr};return N.replace(_,function(he,dt){return dt||function(yr){switch(yr){case"YY":return String(A.$y).slice(-2);case"YYYY":return C.s(A.$y,4,"0");case"M":return ae+1;case"MM":return C.s(ae+1,2,"0");case"MMM":return pe(T.monthsShort,ae,W,3);case"MMMM":return pe(W,ae);case"D":return A.$D;case"DD":return C.s(A.$D,2,"0");case"d":return String(A.$W);case"dd":return pe(T.weekdaysMin,A.$W,ce,2);case"ddd":return pe(T.weekdaysShort,A.$W,ce,3);case"dddd":return ce[A.$W];case"H":return String(G);case"HH":return C.s(G,2,"0");case"h":return Ue(1);case"hh":return Ue(2);case"a":return Fe(G,Z,!0);case"A":return Fe(G,Z,!1);case"m":return String(Z);case"mm":return C.s(Z,2,"0");case"s":return String(A.$s);case"ss":return C.s(A.$s,2,"0");case"SSS":return C.s(A.$ms,3,"0");case"Z":return M}return null}(he)||M.replace(":","")})},S.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},S.diff=function(E,A,T){var N,M=this,G=C.p(A),Z=D(E),ae=(Z.utcOffset()-this.utcOffset())*n,ce=this-Z,W=function(){return C.m(M,Z)};switch(G){case f:N=W()/12;break;case h:N=W();break;case d:N=W()/3;break;case c:N=(ce-ae)/6048e5;break;case u:N=(ce-ae)/864e5;break;case l:N=ce/i;break;case a:N=ce/n;break;case o:N=ce/t;break;default:N=ce}return T?N:C.a(N)},S.daysInMonth=function(){return this.endOf(h).$D},S.$locale=function(){return x[this.$L]},S.locale=function(E,A){if(!E)return this.$L;var T=this.clone(),N=j(E,A,!0);return N&&(T.$L=N),T},S.clone=function(){return C.w(this.$d,this)},S.toDate=function(){return new Date(this.valueOf())},S.toJSON=function(){return this.isValid()?this.toISOString():null},S.toISOString=function(){return this.$d.toISOString()},S.toString=function(){return this.$d.toUTCString()},$}(),Y=Q.prototype;return D.prototype=Y,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",u],["$M",h],["$y",f],["$D",p]].forEach(function($){Y[$[1]]=function(S){return this.$g(S,$[0],$[1])}}),D.extend=function($,S){return $.$i||($(S,Q,D),$.$i=!0),D},D.locale=j,D.isDayjs=P,D.unix=function($){return D(1e3*$)},D.en=x[b],D.Ls=x,D.p={},D})}(yn)),yn.exports}var Jh=Gh();const fi=Vi(Jh);var wn={exports:{}},Vh=wn.exports,Xs;function Yh(){return Xs||(Xs=1,function(r,e){(function(t,n){r.exports=n()})(Vh,function(){return function(t,n,i){t=t||{};var s=n.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(u,c,h,d){return s.fromToBase(u,c,h,d)}i.en.relativeTime=o,s.fromToBase=function(u,c,h,d,f){for(var p,v,g,_=h.$locale().relativeTime||o,m=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],w=m.length,y=0;y<w;y+=1){var b=m[y];b.d&&(p=d?i(u).diff(h,b.d,!0):h.diff(u,b.d,!0));var x=(t.rounding||Math.round)(Math.abs(p));if(g=p>0,x<=b.r||!b.r){x<=1&&y>0&&(b=m[y-1]);var O=_[b.l];f&&(x=f(""+x)),v=typeof O=="string"?O.replace("%d",x):O(x,c,b.l,g);break}}if(c)return v;var P=g?_.future:_.past;return typeof P=="function"?P(v):P.replace("%s",v)},s.to=function(u,c){return a(u,c,this,!0)},s.from=function(u,c){return a(u,c,this)};var l=function(u){return u.$u?i.utc():i()};s.toNow=function(u){return this.to(l(this),u)},s.fromNow=function(u){return this.from(l(this),u)}}})}(wn)),wn.exports}var Kh=Yh();const Xh=Vi(Kh);var Qh=ge("<div><span>Closed:</span> <span> </span></div>"),Zh=ge("<div><span>Updated:</span> <span> </span></div>"),ed=ge('<div class="text-center italic my-1"><blockquote class="text-githubSecondaryTextColor"> </blockquote></div>'),td=ge("<!> Public",1),rd=ge("<!> Private",1),nd=ge('<div class="mt-2 text-xs space-y-1 bg-githubBgColor rounded border border-githubBordercolor p-2"><div><span> </span></div> <!> <div><span>Created:</span> <span> </span></div> <!> <div><span class="inline-flex items-center gap-0.5 border border-githubBorderColor text-xs text-githubSecondaryTextColor px-1 py-0.5 rounded-full"><!></span></div></div>'),id=ge('<div class="p-2 bg-white text-left rounded border shadow-sm cursor-grab"><div><span class="text-githubSecondaryTextColor font-semibold"> </span> <a target="_blank" class="_classic-link font-semibold"> </a></div> <div class="text-sm text-githubSecondaryTextColor mt-0.5"><!></div> <button class="_button gap-0.5 text-sm mt-1 px-1 py-0.5"><!> Details</button> <!></div>');function sd(r,e){pr(e,!1);let t=Ce(e,"project",8);fi.extend(Xh);let n=Le(!1);const i=()=>{re(n,!I(n))},s=O=>O?fi(O).format("D MMM YYYY HH:mm"):"â",o=O=>O?fi(O).fromNow():"";Vr();var a=id(),l=H(a),u=H(l),c=H(u),h=se(u,2),d=H(h),f=se(l,2),p=H(f);{var v=O=>{var P=os();xe(j=>Ie(P,`Closed ${j??""}`),[()=>o(t().closedAt)],We),K(O,P)},g=O=>{var P=os();xe(j=>Ie(P,`Updated ${j??""}`),[()=>o(t().updatedAt)],We),K(O,P)};ze(p,O=>{t().closed?O(v):O(g,!1)})}var _=se(f,2),m=H(_);{var w=O=>{xh(O,{class:"_icon"})},y=O=>{Ch(O,{class:"_icon"})};ze(m,O=>{I(n)?O(w):O(y,!1)})}var b=se(_,2);{var x=O=>{var P=nd(),j=H(P),D=H(j),C=H(D),Q=se(j,2);{var Y=W=>{var ne=Qh(),pe=se(H(ne),2),Ue=H(pe);xe((Fe,he)=>Ie(Ue,`${Fe??""} (${he??""})`),[()=>s(t().closedAt),()=>o(t().closedAt)],We),K(W,ne)},$=W=>{var ne=Zh(),pe=se(H(ne),2),Ue=H(pe);xe((Fe,he)=>Ie(Ue,`${Fe??""} (${he??""})`),[()=>s(t().updatedAt),()=>o(t().updatedAt)],We),K(W,ne)};ze(Q,W=>{t().closed?W(Y):W($,!1)})}var S=se(Q,2),E=se(H(S),2),A=H(E),T=se(S,2);{var N=W=>{var ne=ed(),pe=H(ne),Ue=H(pe);xe(()=>Ie(Ue,`â${t().shortDescription??""}â`)),K(W,ne)};ze(T,W=>{t().shortDescription&&W(N)})}var M=se(T,2),G=H(M),Z=H(G);{var ae=W=>{var ne=td(),pe=Je(ne);jh(pe,{class:"w-3 h-3"}),K(W,ne)},ce=W=>{var ne=rd(),pe=Je(ne);Rh(pe,{class:"w-3 h-3"}),K(W,ne)};ze(Z,W=>{t().public?W(ae):W(ce,!1)})}xe((W,ne)=>{Ie(C,`${t().items.totalCount??""} ${t().items.totalCount===1?"item":"items"}`),Ie(A,`${W??""} (${ne??""})`)},[()=>s(t().createdAt),()=>o(t().createdAt)],We),Hl(3,P,()=>zh),K(O,P)};ze(b,O=>{I(n)&&O(x)})}xe(()=>{Ie(c,`#${t().number??""}`),Rt(h,"href",t().url),Ie(d,t().title)}),$n("click",_,i),K(r,a),vr()}var od=ge('<div class="bg-githubBgColor border border-githubBorderColor p-3 rounded flex flex-col"><h2 class="text-lg text-left font-semibold mb-2 capitalize"> <span class="text-githubSecondaryTextColor text-sm"> </span></h2> <div class="space-y-2 min-h-[50px]"></div></div>');function pi(r,e){pr(e,!1);let t=Ce(e,"title",8),n=Ce(e,"projects",24,()=>[]),i=Ce(e,"bindRef",8,null),s=Le();Zt(()=>(zn(i()),I(s)),()=>{i()&&i().set(I(s))}),_o(),Vr();var o=od(),a=H(o),l=H(a),u=se(l),c=H(u),h=se(a,2);Co(h,5,n,d=>d.id,(d,f)=>{sd(d,{get project(){return I(f)}})}),zl(h,d=>re(s,d),()=>I(s)),xe(()=>{Ie(l,`${t()??""} `),Ie(c,`(${n().length??""})`)}),K(r,o),vr()}var ad=ge('<button class="_button text-githubPrimaryTextColor px-4 py-2">Log in with GitHub</button>'),ld=ge('<div class="flex flex-col items-center"><!> <p class="text-lg font-semibold text-githubSecondaryTextColor animate-pulse duration-100">Loading projects</p></div>'),ud=ge('<div class="pt-4 pb-2 px-4 flex-1 grid grid-cols-1 sm:grid-cols-3 gap-4 items-stretch"><!> <!> <!></div>'),cd=ge('<main class="flex flex-col min-h-screen"><!> <div class="flex-1 flex flex-col items-center justify-center"><!></div></main>');function hd(r,e){pr(e,!1);let t=Le(null),n=null,i=Le([]),s={};const o=["todo","doing","done"];let a=Kn(null),l=Kn(null),u=Kn(null);const c="https://api.github.com/graphql",h=async()=>{await hn.auth.signInWithOAuth({provider:"github",options:{redirectTo:window.location.origin+window.location.pathname,scopes:"repo read:user read:project"}})},d=async()=>{await hn.auth.signOut(),re(t,null),n=null},f=async()=>{const D=await(await fetch(c,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({query:`{
      viewer {
        projectsV2(first: 50) {
          nodes {
            id
            number
            title
            url
            closed
            createdAt
            updatedAt
            closedAt
            public
            shortDescription
            items {
              totalCount
            }
          }
        }
      }
    }`})})).json();console.log("GitHub response:",D),re(i,D.data.viewer.projectsV2.nodes),p(),g()},p=()=>{const P=localStorage.getItem("projectStatuses");P&&(s=JSON.parse(P))},v=()=>{localStorage.setItem("projectStatuses",JSON.stringify(s))};function g(){const P={todo:Xn(a),doing:Xn(l),done:Xn(u)};for(const j of o){const D=P[j];D&&L.create(D,{group:"columns",animation:150,swapThreshold:.5,chosenClass:"_sortable-chosen",forceFallback:!0,fallbackOnBody:!0,onStart:()=>{document.body.classList.add("_disable-pointer-events"),document.body.classList.add("cursor-grabbing"),document.body.classList.add("_cursor-grab-to-grabbing")},onEnd:C=>{var Y,$;document.body.classList.remove("_disable-pointer-events"),document.body.classList.remove("cursor-grabbing"),document.body.classList.remove("_cursor-grab-to-grabbing");const Q=($=(Y=C.item)==null?void 0:Y.dataset)==null?void 0:$.id;Q&&(s[Q]=j,v())}})}}Yl(async()=>{const{data:P}=await hn.auth.getSession();re(t,P.session),hn.auth.onAuthStateChange((j,D)=>{re(t,D),n=D==null?void 0:D.provider_token,n&&f()}),I(t)&&(n=I(t).provider_token,console.log("session:",I(t)),await f())});const _=P=>I(i).filter(j=>(s[j.id]||"todo")===P);Vr();var m=cd(),w=H(m);qh(w,{get session(){return I(t)},onLogout:d});var y=se(w,2),b=H(y);{var x=P=>{var j=ad();$n("click",j,h),K(P,j)},O=P=>{var j=ct(),D=Je(j);{var C=Y=>{var $=ld(),S=H($);Ih(S,{class:"w-8 h-8 animate-spin mb-2"}),K(Y,$)},Q=Y=>{var $=ud(),S=H($);const E=We(()=>_(o[0]));pi(S,{get title(){return o[0]},get projects(){return I(E)},bindRef:a});var A=se(S,2);const T=We(()=>_(o[1]));pi(A,{get title(){return o[1]},get projects(){return I(T)},bindRef:l});var N=se(A,2);const M=We(()=>_(o[2]));pi(N,{get title(){return o[2]},get projects(){return I(M)},bindRef:u}),K(Y,$)};ze(D,Y=>{I(i).length===0?Y(C):Y(Q,!1)})}K(P,j)};ze(b,P=>{I(t)?P(O,!1):P(x)})}K(r,m),vr()}El(hd,{target:document.getElementById("app")});export{Vi as g};
