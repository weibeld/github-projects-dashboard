(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const Ci=!1;var pi=Array.isArray,Mo=Array.prototype.indexOf,vi=Array.from,No=Object.defineProperty,Ht=Object.getOwnPropertyDescriptor,Ps=Object.getOwnPropertyDescriptors,Uo=Object.prototype,Fo=Array.prototype,gi=Object.getPrototypeOf,ji=Object.isExtensible;function Bo(r){return typeof r=="function"}const We=()=>{};function qo(r){return r()}function Vn(r){for(var e=0;e<r.length;e++)r[e]()}const Ie=2,$s=4,fn=8,pn=16,Ke=32,Kt=64,Kr=128,Te=256,Xr=512,pe=1024,Fe=2048,dt=4096,Je=8192,vn=16384,xs=32768,gn=65536,Ho=1<<17,zo=1<<19,Ds=1<<20,Yn=1<<21,St=Symbol("$state"),Wo=Symbol("legacy props");function Cs(r){return r===this.v}function js(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function _i(r){return!js(r,this.v)}function Go(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Jo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Vo(r){throw new Error("https://svelte.dev/e/effect_orphan")}function Yo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ko(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function Xo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Qo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Zo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Xt=!1,ea=!1;function ta(){Xt=!0}const ra=1,na=2,ia=16,sa=1,oa=2,aa=4,la=8,ua=16,ca=4,ha=1,da=2,me=Symbol(),fa="http://www.w3.org/1999/xhtml";function pa(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Y=null;function Ii(r){Y=r}function _n(r,e=!1,t){var n=Y={p:Y,c:null,d:!1,e:null,m:!1,s:r,x:null,l:null};Xt&&!e&&(Y.l={s:null,u:null,r1:[],r2:wr(!1)}),zs(()=>{n.d=!0})}function mn(r){const e=Y;if(e!==null){const o=e.e;if(o!==null){var t=G,n=W;e.e=null;try{for(var i=0;i<o.length;i++){var s=o[i];Be(s.effect),$e(s.reaction),bn(s.fn)}}finally{Be(t),$e(n)}}Y=e.p,e.m=!0}return{}}function yn(){return!Xt||Y!==null&&Y.l===null}function bt(r){if(typeof r!="object"||r===null||St in r)return r;const e=gi(r);if(e!==Uo&&e!==Fo)return r;var t=new Map,n=pi(r),i=Ze(0),s=W,o=a=>{var l=W;$e(s);var u=a();return $e(l),u};return n&&t.set("length",Ze(r.length)),new Proxy(r,{defineProperty(a,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Xo();var c=t.get(l);return c===void 0?(c=o(()=>Ze(u.value)),t.set(l,c)):ce(c,o(()=>bt(u.value))),!0},deleteProperty(a,l){var u=t.get(l);if(u===void 0)l in a&&(t.set(l,o(()=>Ze(me))),Pn(i));else{if(n&&typeof l=="string"){var c=t.get("length"),h=Number(l);Number.isInteger(h)&&h<c.v&&ce(c,h)}ce(u,me),Pn(i)}return!0},get(a,l,u){var f;if(l===St)return r;var c=t.get(l),h=l in a;if(c===void 0&&(!h||(f=Ht(a,l))!=null&&f.writable)&&(c=o(()=>Ze(bt(h?a[l]:me))),t.set(l,c)),c!==void 0){var d=H(c);return d===me?void 0:d}return Reflect.get(a,l,u)},getOwnPropertyDescriptor(a,l){var u=Reflect.getOwnPropertyDescriptor(a,l);if(u&&"value"in u){var c=t.get(l);c&&(u.value=H(c))}else if(u===void 0){var h=t.get(l),d=h==null?void 0:h.v;if(h!==void 0&&d!==me)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return u},has(a,l){var d;if(l===St)return!0;var u=t.get(l),c=u!==void 0&&u.v!==me||Reflect.has(a,l);if(u!==void 0||G!==null&&(!c||(d=Ht(a,l))!=null&&d.writable)){u===void 0&&(u=o(()=>Ze(c?bt(a[l]):me)),t.set(l,u));var h=H(u);if(h===me)return!1}return c},set(a,l,u,c){var T;var h=t.get(l),d=l in a;if(n&&l==="length")for(var f=u;f<h.v;f+=1){var p=t.get(f+"");p!==void 0?ce(p,me):f in a&&(p=o(()=>Ze(me)),t.set(f+"",p))}h===void 0?(!d||(T=Ht(a,l))!=null&&T.writable)&&(h=o(()=>Ze(void 0)),ce(h,o(()=>bt(u))),t.set(l,h)):(d=h.v!==me,ce(h,o(()=>bt(u))));var v=Reflect.getOwnPropertyDescriptor(a,l);if(v!=null&&v.set&&v.set.call(c,u),!d){if(n&&typeof l=="string"){var g=t.get("length"),m=Number(l);Number.isInteger(m)&&m>=g.v&&ce(g,m+1)}Pn(i)}return!0},ownKeys(a){H(i);var l=Reflect.ownKeys(a).filter(h=>{var d=t.get(h);return d===void 0||d.v!==me});for(var[u,c]of t)c.v!==me&&!(u in a)&&l.push(u);return l},setPrototypeOf(){Qo()}})}function Pn(r,e=1){ce(r,r.v+e)}function mr(r){var e=Ie|Fe,t=W!==null&&(W.f&Ie)!==0?W:null;return G===null||t!==null&&(t.f&Te)!==0?e|=Te:G.f|=Ds,{ctx:Y,deps:null,effects:null,equals:Cs,f:e,fn:r,reactions:null,rv:0,v:null,wv:0,parent:t??G}}function ut(r){const e=mr(r);return e.equals=_i,e}function Is(r){var e=r.effects;if(e!==null){r.effects=null;for(var t=0;t<e.length;t+=1)ct(e[t])}}function va(r){for(var e=r.parent;e!==null;){if((e.f&Ie)===0)return e;e=e.parent}return null}function Rs(r){var e,t=G;Be(va(r));try{Is(r),e=Zs(r)}finally{Be(t)}return e}function Ls(r){var e=Rs(r),t=(at||(r.f&Te)!==0)&&r.deps!==null?dt:pe;xe(r,t),r.equals(e)||(r.v=e,r.wv=Xs())}const yr=new Map;function wr(r,e){var t={f:0,v:r,reactions:null,equals:Cs,rv:0,wv:0};return t}function Ze(r,e){const t=wr(r);return Pa(t),t}function Gt(r,e=!1){var n;const t=wr(r);return e||(t.equals=_i),Xt&&Y!==null&&Y.l!==null&&((n=Y.l).s??(n.s=[])).push(t),t}function ce(r,e,t=!1){W!==null&&!Me&&yn()&&(W.f&(Ie|pn))!==0&&!(fe!=null&&fe.includes(r))&&Zo();let n=t?bt(e):e;return Ms(r,n)}function Ms(r,e){if(!r.equals(e)){var t=r.v;Sr?yr.set(r,e):yr.set(r,t),r.v=e,(r.f&Ie)!==0&&((r.f&Fe)!==0&&Rs(r),xe(r,(r.f&Te)===0?pe:dt)),r.wv=Xs(),Ns(r,Fe),yn()&&G!==null&&(G.f&pe)!==0&&(G.f&(Ke|Kt))===0&&(Ae===null?$a([r]):Ae.push(r))}return e}function Ns(r,e){var t=r.reactions;if(t!==null)for(var n=yn(),i=t.length,s=0;s<i;s++){var o=t[s],a=o.f;(a&Fe)===0&&(!n&&o===G||(xe(o,e),(a&(pe|Te))!==0&&((a&Ie)!==0?Ns(o,dt):Tn(o))))}}let ga=!1;var Ri,Us,Fs,Bs;function _a(){if(Ri===void 0){Ri=window,Us=/Firefox/.test(navigator.userAgent);var r=Element.prototype,e=Node.prototype,t=Text.prototype;Fs=Ht(e,"firstChild").get,Bs=Ht(e,"nextSibling").get,ji(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),ji(t)&&(t.__t=void 0)}}function qs(r=""){return document.createTextNode(r)}function Qr(r){return Fs.call(r)}function wn(r){return Bs.call(r)}function ee(r,e){return Qr(r)}function ma(r,e){{var t=Qr(r);return t instanceof Comment&&t.data===""?wn(t):t}}function ye(r,e=1,t=!1){let n=r;for(;e--;)n=wn(n);return n}function ya(r){r.textContent=""}function Hs(r){G===null&&W===null&&Vo(),W!==null&&(W.f&Te)!==0&&G===null&&Jo(),Sr&&Go()}function wa(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function Qt(r,e,t,n=!0){var i=G,s={ctx:Y,deps:null,nodes_start:null,nodes_end:null,f:r|Fe,first:null,fn:e,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(t)try{kn(s),s.f|=xs}catch(l){throw ct(s),l}else e!==null&&Tn(s);var o=t&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(Ds|Kr))===0;if(!o&&n&&(i!==null&&wa(s,i),W!==null&&(W.f&Ie)!==0)){var a=W;(a.effects??(a.effects=[])).push(s)}return s}function zs(r){const e=Qt(fn,null,!1);return xe(e,pe),e.teardown=r,e}function Kn(r){Hs();var e=G!==null&&(G.f&Ke)!==0&&Y!==null&&!Y.m;if(e){var t=Y;(t.e??(t.e=[])).push({fn:r,effect:G,reaction:W})}else{var n=bn(r);return n}}function ba(r){return Hs(),En(r)}function Ea(r){const e=Qt(Kt,r,!0);return(t={})=>new Promise(n=>{t.outro?Zr(e,()=>{ct(e),n(void 0)}):(ct(e),n(void 0))})}function bn(r){return Qt($s,r,!1)}function Sa(r,e){var t=Y,n={effect:null,ran:!1};t.l.r1.push(n),n.effect=En(()=>{r(),!n.ran&&(n.ran=!0,ce(t.l.r2,!0),ht(e))})}function ka(){var r=Y;En(()=>{if(H(r.l.r2)){for(var e of r.l.r1){var t=e.effect;(t.f&pe)!==0&&xe(t,dt),Zt(t)&&kn(t),e.ran=!1}r.l.r2.v=!1}})}function En(r){return Qt(fn,r,!0)}function Bt(r,e=[],t=mr){const n=e.map(t);return mi(()=>r(...n.map(H)))}function mi(r,e=0){return Qt(fn|pn|e,r,!0)}function br(r,e=!0){return Qt(fn|Ke,r,!0,e)}function Ws(r){var e=r.teardown;if(e!==null){const t=Sr,n=W;Li(!0),$e(null);try{e.call(null)}finally{Li(t),$e(n)}}}function Gs(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){var n=t.next;(t.f&Kt)!==0?t.parent=null:ct(t,e),t=n}}function Ta(r){for(var e=r.first;e!==null;){var t=e.next;(e.f&Ke)===0&&ct(e),e=t}}function ct(r,e=!0){var t=!1;(e||(r.f&zo)!==0)&&r.nodes_start!==null&&(Oa(r.nodes_start,r.nodes_end),t=!0),Gs(r,e&&!t),sn(r,0),xe(r,vn);var n=r.transitions;if(n!==null)for(const s of n)s.stop();Ws(r);var i=r.parent;i!==null&&i.first!==null&&Js(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=null}function Oa(r,e){for(;r!==null;){var t=r===e?null:wn(r);r.remove(),r=t}}function Js(r){var e=r.parent,t=r.prev,n=r.next;t!==null&&(t.next=n),n!==null&&(n.prev=t),e!==null&&(e.first===r&&(e.first=n),e.last===r&&(e.last=t))}function Zr(r,e){var t=[];yi(r,t,!0),Vs(t,()=>{ct(r),e&&e()})}function Vs(r,e){var t=r.length;if(t>0){var n=()=>--t||e();for(var i of r)i.out(n)}else e()}function yi(r,e,t){if((r.f&Je)===0){if(r.f^=Je,r.transitions!==null)for(const o of r.transitions)(o.is_global||t)&&e.push(o);for(var n=r.first;n!==null;){var i=n.next,s=(n.f&gn)!==0||(n.f&Ke)!==0;yi(n,e,s?t:!1),n=i}}}function en(r){Ys(r,!0)}function Ys(r,e){if((r.f&Je)!==0){r.f^=Je,(r.f&pe)===0&&(r.f^=pe),Zt(r)&&(xe(r,Fe),Tn(r));for(var t=r.first;t!==null;){var n=t.next,i=(t.f&gn)!==0||(t.f&Ke)!==0;Ys(t,i?e:!1),t=n}if(r.transitions!==null)for(const s of r.transitions)(s.is_global||e)&&s.in()}}let tn=[];function Aa(){var r=tn;tn=[],Vn(r)}function wi(r){tn.length===0&&queueMicrotask(Aa),tn.push(r)}let Fr=!1,Xn=!1,rn=null,kt=!1,Sr=!1;function Li(r){Sr=r}let Br=[];let W=null,Me=!1;function $e(r){W=r}let G=null;function Be(r){G=r}let fe=null;function Pa(r){W!==null&&W.f&Yn&&(fe===null?fe=[r]:fe.push(r))}let de=null,Ee=0,Ae=null;function $a(r){Ae=r}let Ks=1,nn=0,at=!1;function Xs(){return++Ks}function Zt(r){var h;var e=r.f;if((e&Fe)!==0)return!0;if((e&dt)!==0){var t=r.deps,n=(e&Te)!==0;if(t!==null){var i,s,o=(e&Xr)!==0,a=n&&G!==null&&!at,l=t.length;if(o||a){var u=r,c=u.parent;for(i=0;i<l;i++)s=t[i],(o||!((h=s==null?void 0:s.reactions)!=null&&h.includes(u)))&&(s.reactions??(s.reactions=[])).push(u);o&&(u.f^=Xr),a&&c!==null&&(c.f&Te)===0&&(u.f^=Te)}for(i=0;i<l;i++)if(s=t[i],Zt(s)&&Ls(s),s.wv>r.wv)return!0}(!n||G!==null&&!at)&&xe(r,pe)}return!1}function xa(r,e){for(var t=e;t!==null;){if((t.f&Kr)!==0)try{t.fn(r);return}catch{t.f^=Kr}t=t.parent}throw Fr=!1,r}function Mi(r){return(r.f&vn)===0&&(r.parent===null||(r.parent.f&Kr)===0)}function Sn(r,e,t,n){if(Fr){if(t===null&&(Fr=!1),Mi(e))throw r;return}if(t!==null&&(Fr=!0),xa(r,e),Mi(e))throw r}function Qs(r,e,t=!0){var n=r.reactions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];fe!=null&&fe.includes(r)||((s.f&Ie)!==0?Qs(s,e,!1):e===s&&(t?xe(s,Fe):(s.f&pe)!==0&&xe(s,dt),Tn(s)))}}function Zs(r){var f;var e=de,t=Ee,n=Ae,i=W,s=at,o=fe,a=Y,l=Me,u=r.f;de=null,Ee=0,Ae=null,at=(u&Te)!==0&&(Me||!kt||W===null),W=(u&(Ke|Kt))===0?r:null,fe=null,Ii(r.ctx),Me=!1,nn++,r.f|=Yn;try{var c=(0,r.fn)(),h=r.deps;if(de!==null){var d;if(sn(r,Ee),h!==null&&Ee>0)for(h.length=Ee+de.length,d=0;d<de.length;d++)h[Ee+d]=de[d];else r.deps=h=de;if(!at)for(d=Ee;d<h.length;d++)((f=h[d]).reactions??(f.reactions=[])).push(r)}else h!==null&&Ee<h.length&&(sn(r,Ee),h.length=Ee);if(yn()&&Ae!==null&&!Me&&h!==null&&(r.f&(Ie|dt|Fe))===0)for(d=0;d<Ae.length;d++)Qs(Ae[d],r);return i!==null&&i!==r&&(nn++,Ae!==null&&(n===null?n=Ae:n.push(...Ae))),c}finally{de=e,Ee=t,Ae=n,W=i,at=s,fe=o,Ii(a),Me=l,r.f^=Yn}}function Da(r,e){let t=e.reactions;if(t!==null){var n=Mo.call(t,r);if(n!==-1){var i=t.length-1;i===0?t=e.reactions=null:(t[n]=t[i],t.pop())}}t===null&&(e.f&Ie)!==0&&(de===null||!de.includes(e))&&(xe(e,dt),(e.f&(Te|Xr))===0&&(e.f^=Xr),Is(e),sn(e,0))}function sn(r,e){var t=r.deps;if(t!==null)for(var n=e;n<t.length;n++)Da(r,t[n])}function kn(r){var e=r.f;if((e&vn)===0){xe(r,pe);var t=G,n=Y,i=kt;G=r,kt=!0;try{(e&pn)!==0?Ta(r):Gs(r),Ws(r);var s=Zs(r);r.teardown=typeof s=="function"?s:null,r.wv=Ks;var o=r.deps,a;Ci&&ea&&r.f&Fe}catch(l){Sn(l,r,t,n||r.ctx)}finally{kt=i,G=t}}}function Ca(){try{Yo()}catch(r){if(rn!==null)Sn(r,rn,null);else throw r}}function ja(){var r=kt;try{var e=0;for(kt=!0;Br.length>0;){e++>1e3&&Ca();var t=Br,n=t.length;Br=[];for(var i=0;i<n;i++){var s=Ra(t[i]);Ia(s)}yr.clear()}}finally{Xn=!1,kt=r,rn=null}}function Ia(r){var e=r.length;if(e!==0)for(var t=0;t<e;t++){var n=r[t];if((n.f&(vn|Je))===0)try{Zt(n)&&(kn(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?Js(n):n.fn=null))}catch(i){Sn(i,n,null,n.ctx)}}}function Tn(r){Xn||(Xn=!0,queueMicrotask(ja));for(var e=rn=r;e.parent!==null;){e=e.parent;var t=e.f;if((t&(Kt|Ke))!==0){if((t&pe)===0)return;e.f^=pe}}Br.push(e)}function Ra(r){for(var e=[],t=r;t!==null;){var n=t.f,i=(n&(Ke|Kt))!==0,s=i&&(n&pe)!==0;if(!s&&(n&Je)===0){if((n&$s)!==0)e.push(t);else if(i)t.f^=pe;else{var o=W;try{W=t,Zt(t)&&kn(t)}catch(u){Sn(u,t,null,t.ctx)}finally{W=o}}var a=t.first;if(a!==null){t=a;continue}}var l=t.parent;for(t=t.next;t===null&&l!==null;)t=l.next,l=l.parent}return e}function H(r){var e=r.f,t=(e&Ie)!==0;if(W!==null&&!Me){if(!(fe!=null&&fe.includes(r))){var n=W.deps;r.rv<nn&&(r.rv=nn,de===null&&n!==null&&n[Ee]===r?Ee++:de===null?de=[r]:(!at||!de.includes(r))&&de.push(r))}}else if(t&&r.deps===null&&r.effects===null){var i=r,s=i.parent;s!==null&&(s.f&Te)===0&&(i.f^=Te)}return t&&(i=r,Zt(i)&&Ls(i)),Sr&&yr.has(r)?yr.get(r):r.v}function ht(r){var e=Me;try{return Me=!0,r()}finally{Me=e}}const La=-7169;function xe(r,e){r.f=r.f&La|e}function eo(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(St in r)Qn(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&St in t&&Qn(t)}}}function Qn(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let n in r)try{Qn(r[n],e)}catch{}const t=gi(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const n=Ps(t);for(let i in n){const s=n[i].get;if(s)try{s.call(r)}catch{}}}}}const Ma=["touchstart","touchmove"];function Na(r){return Ma.includes(r)}function to(r){var e=W,t=G;$e(null),Be(null);try{return r()}finally{$e(e),Be(t)}}const Ua=new Set,Ni=new Set;function Fa(r,e,t,n={}){function i(s){if(n.capture||sr.call(e,s),!s.cancelBubble)return to(()=>t==null?void 0:t.call(this,s))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?wi(()=>{e.addEventListener(r,i,n)}):e.addEventListener(r,i,n),i}function Zn(r,e,t,n,i){var s={capture:n,passive:i},o=Fa(r,e,t,s);(e===document.body||e===window||e===document)&&zs(()=>{e.removeEventListener(r,o,s)})}function sr(r){var T;var e=this,t=e.ownerDocument,n=r.type,i=((T=r.composedPath)==null?void 0:T.call(r))||[],s=i[0]||r.target,o=0,a=r.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(e===document||e===window)){r.__root=e;return}var u=i.indexOf(e);if(u===-1)return;l<=u&&(o=l)}if(s=i[o]||r.target,s!==e){No(r,"currentTarget",{configurable:!0,get(){return s||t}});var c=W,h=G;$e(null),Be(null);try{for(var d,f=[];s!==null;){var p=s.assignedSlot||s.parentNode||s.host||null;try{var v=s["__"+n];if(v!=null&&(!s.disabled||r.target===s))if(pi(v)){var[g,...m]=v;g.apply(s,[r,...m])}else v.call(s,r)}catch($){d?f.push($):d=$}if(r.cancelBubble||p===e||p===null)break;s=p}if(d){for(let $ of f)queueMicrotask(()=>{throw $});throw d}}finally{r.__root=e,delete r.currentTarget,$e(c),Be(h)}}}function Ba(r){var e=document.createElement("template");return e.innerHTML=r,e.content}function Ui(r,e){var t=G;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function He(r,e){var t=(e&ha)!==0,n=(e&da)!==0,i,s=!r.startsWith("<!>");return()=>{i===void 0&&(i=Ba(s?r:"<!>"+r),t||(i=Qr(i)));var o=n||Us?document.importNode(i,!0):i.cloneNode(!0);if(t){var a=Qr(o),l=o.lastChild;Ui(a,l)}else Ui(o,o);return o}}function Ne(r,e){r!==null&&r.before(e)}let ei=!0;function Le(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t+"")}function qa(r,e){return Ha(r,e)}const At=new Map;function Ha(r,{target:e,anchor:t,props:n={},events:i,context:s,intro:o=!0}){_a();var a=new Set,l=h=>{for(var d=0;d<h.length;d++){var f=h[d];if(!a.has(f)){a.add(f);var p=Na(f);e.addEventListener(f,sr,{passive:p});var v=At.get(f);v===void 0?(document.addEventListener(f,sr,{passive:p}),At.set(f,1)):At.set(f,v+1)}}};l(vi(Ua)),Ni.add(l);var u=void 0,c=Ea(()=>{var h=t??e.appendChild(qs());return br(()=>{if(s){_n({});var d=Y;d.c=s}i&&(n.$$events=i),ei=o,u=r(h,n)||{},ei=!0,s&&mn()}),()=>{var p;for(var d of a){e.removeEventListener(d,sr);var f=At.get(d);--f===0?(document.removeEventListener(d,sr),At.delete(d)):At.set(d,f)}Ni.delete(l),h!==t&&((p=h.parentNode)==null||p.removeChild(h))}});return za.set(u,c),u}let za=new WeakMap;function on(r,e,[t,n]=[0,0]){var i=r,s=null,o=null,a=me,l=t>0?gn:0,u=!1;const c=(d,f=!0)=>{u=!0,h(f,d)},h=(d,f)=>{a!==(a=d)&&(a?(s?en(s):f&&(s=br(()=>f(i))),o&&Zr(o,()=>{o=null})):(o?en(o):f&&(o=br(()=>f(i,[t+1,n]))),s&&Zr(s,()=>{s=null})))};mi(()=>{u=!1,e(c),u||h(null,null)},l)}function Wa(r,e,t,n){for(var i=[],s=e.length,o=0;o<s;o++)yi(e[o].e,i,!0);var a=s>0&&i.length===0&&t!==null;if(a){var l=t.parentNode;ya(l),l.append(t),n.clear(),rt(r,e[0].prev,e[s-1].next)}Vs(i,()=>{for(var u=0;u<s;u++){var c=e[u];a||(n.delete(c.k),rt(r,c.prev,c.next)),ct(c.e,!a)}})}function Ga(r,e,t,n,i,s=null){var o=r,a={flags:e,items:new Map,first:null};{var l=r;o=l.appendChild(qs())}var u=null,c=!1,h=ut(()=>{var d=t();return pi(d)?d:d==null?[]:vi(d)});mi(()=>{var d=H(h),f=d.length;c&&f===0||(c=f===0,Ja(d,a,o,i,e,n,t),s!==null&&(f===0?u?en(u):u=br(()=>s(o)):u!==null&&Zr(u,()=>{u=null})),H(h))})}function Ja(r,e,t,n,i,s,o){var a=r.length,l=e.items,u=e.first,c=u,h,d=null,f=[],p=[],v,g,m,T;for(T=0;T<a;T+=1){if(v=r[T],g=s(v,T),m=l.get(g),m===void 0){var $=c?c.e.nodes_start:t;d=Ya($,e,d,d===null?e.first:d.next,v,g,T,n,i,o),l.set(g,d),f=[],p=[],c=d.next;continue}if(Va(m,v,T),(m.e.f&Je)!==0&&en(m.e),m!==c){if(h!==void 0&&h.has(m)){if(f.length<p.length){var A=p[0],E;d=A.prev;var P=f[0],O=f[f.length-1];for(E=0;E<f.length;E+=1)Fi(f[E],A,t);for(E=0;E<p.length;E+=1)h.delete(p[E]);rt(e,P.prev,O.next),rt(e,d,P),rt(e,O,A),c=A,d=O,T-=1,f=[],p=[]}else h.delete(m),Fi(m,c,t),rt(e,m.prev,m.next),rt(e,m,d===null?e.first:d.next),rt(e,d,m),d=m;continue}for(f=[],p=[];c!==null&&c.k!==g;)(c.e.f&Je)===0&&(h??(h=new Set)).add(c),p.push(c),c=c.next;if(c===null)continue;m=c}f.push(m),d=m,c=m.next}if(c!==null||h!==void 0){for(var L=h===void 0?[]:vi(h);c!==null;)(c.e.f&Je)===0&&L.push(c),c=c.next;var N=L.length;if(N>0){var q=a===0?t:null;Wa(e,L,q,l)}}G.first=e.first&&e.first.e,G.last=d&&d.e}function Va(r,e,t,n){Ms(r.v,e),r.i=t}function Ya(r,e,t,n,i,s,o,a,l,u){var c=(l&ra)!==0,h=(l&ia)===0,d=c?h?Gt(i):wr(i):i,f=(l&na)===0?o:wr(o),p={i:f,v:d,k:s,a:null,e:null,prev:t,next:n};try{return p.e=br(()=>a(r,d,f,u),ga),p.e.prev=t&&t.e,p.e.next=n&&n.e,t===null?e.first=p:(t.next=p,t.e.next=p.e),n!==null&&(n.prev=p,n.e.prev=p.e),p}finally{}}function Fi(r,e,t){for(var n=r.next?r.next.e.nodes_start:t,i=e?e.e.nodes_start:t,s=r.e.nodes_start;s!==n;){var o=wn(s);i.before(s),s=o}}function rt(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const Ka=Symbol("is custom element"),Xa=Symbol("is html");function Qa(r,e,t,n){var i=Za(r);i[e]!==(i[e]=t)&&(t==null?r.removeAttribute(e):typeof t!="string"&&el(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function Za(r){return r.__attributes??(r.__attributes={[Ka]:r.nodeName.includes("-"),[Xa]:r.namespaceURI===fa})}var Bi=new Map;function el(r){var e=Bi.get(r.nodeName);if(e)return e;Bi.set(r.nodeName,e=[]);for(var t,n=r,i=Element.prototype;i!==n;){t=Ps(n);for(var s in t)t[s].set&&e.push(s);n=gi(n)}return e}const tl=()=>performance.now(),Ge={tick:r=>requestAnimationFrame(r),now:()=>tl(),tasks:new Set};function ro(){const r=Ge.now();Ge.tasks.forEach(e=>{e.c(r)||(Ge.tasks.delete(e),e.f())}),Ge.tasks.size!==0&&Ge.tick(ro)}function rl(r){let e;return Ge.tasks.size===0&&Ge.tick(ro),{promise:new Promise(t=>{Ge.tasks.add(e={c:r,f:t})}),abort(){Ge.tasks.delete(e)}}}function Pr(r,e){to(()=>{r.dispatchEvent(new CustomEvent(e))})}function nl(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const e=r.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function qi(r){const e={},t=r.split(";");for(const n of t){const[i,s]=n.split(":");if(!i||s===void 0)break;const o=nl(i.trim());e[o]=s.trim()}return e}const il=r=>r;function sl(r,e,t,n){var i=(r&ca)!==0,s="both",o,a=e.inert,l=e.style.overflow,u,c;function h(){var g=W,m=G;$e(null),Be(null);try{return o??(o=t()(e,(n==null?void 0:n())??{},{direction:s}))}finally{$e(g),Be(m)}}var d={is_global:i,in(){e.inert=a,Pr(e,"introstart"),u=ti(e,h(),c,1,()=>{Pr(e,"introend"),u==null||u.abort(),u=o=void 0,e.style.overflow=l})},out(g){e.inert=!0,Pr(e,"outrostart"),c=ti(e,h(),u,0,()=>{Pr(e,"outroend"),g==null||g()})},stop:()=>{u==null||u.abort(),c==null||c.abort()}},f=G;if((f.transitions??(f.transitions=[])).push(d),ei){var p=i;if(!p){for(var v=f.parent;v&&(v.f&gn)!==0;)for(;(v=v.parent)&&(v.f&pn)===0;);p=!v||(v.f&xs)!==0}p&&bn(()=>{ht(()=>d.in())})}}function ti(r,e,t,n,i){var s=n===1;if(Bo(e)){var o,a=!1;return wi(()=>{if(!a){var g=e({direction:s?"in":"out"});o=ti(r,g,t,n,i)}}),{abort:()=>{a=!0,o==null||o.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(t==null||t.deactivate(),!(e!=null&&e.duration))return i(),{abort:We,deactivate:We,reset:We,t:()=>n};const{delay:l=0,css:u,tick:c,easing:h=il}=e;var d=[];if(s&&t===void 0&&(c&&c(0,1),u)){var f=qi(u(0,1));d.push(f,f)}var p=()=>1-n,v=r.animate(d,{duration:l});return v.onfinish=()=>{var g=(t==null?void 0:t.t())??1-n;t==null||t.abort();var m=n-g,T=e.duration*Math.abs(m),$=[];if(T>0){var A=!1;if(u)for(var E=Math.ceil(T/16.666666666666668),P=0;P<=E;P+=1){var O=g+m*h(P/E),L=qi(u(O,1-O));$.push(L),A||(A=L.overflow==="hidden")}A&&(r.style.overflow="hidden"),p=()=>{var N=v.currentTime;return g+m*h(N/T)},c&&rl(()=>{if(v.playState!=="running")return!1;var N=p();return c(N,1-N),!0})}v=r.animate($,{duration:T,fill:"forwards"}),v.onfinish=()=>{p=()=>n,c==null||c(n,1-n),i()}},{abort:()=>{v&&(v.cancel(),v.effect=null,v.onfinish=We)},deactivate:()=>{i=We},reset:()=>{n===0&&(c==null||c(1,0))},t:()=>p()}}function Hi(r,e){return r===e||(r==null?void 0:r[St])===e}function ol(r={},e,t,n){return bn(()=>{var i,s;return En(()=>{i=s,s=[],ht(()=>{r!==t(...s)&&(e(r,...s),i&&Hi(t(...i),r)&&e(null,...i))})}),()=>{wi(()=>{s&&Hi(t(...s),r)&&e(null,...s)})}}),r}function bi(r=!1){const e=Y,t=e.l.u;if(!t)return;let n=()=>eo(e.s);if(r){let i=0,s={};const o=mr(()=>{let a=!1;const l=e.s;for(const u in l)l[u]!==s[u]&&(s[u]=l[u],a=!0);return a&&i++,i});n=()=>H(o)}t.b.length&&ba(()=>{zi(e,n),Vn(t.b)}),Kn(()=>{const i=ht(()=>t.m.map(qo));return()=>{for(const s of i)typeof s=="function"&&s()}}),t.a.length&&Kn(()=>{zi(e,n),Vn(t.a)})}function zi(r,e){if(r.l.s)for(const t of r.l.s)H(t);e()}function al(r,e,t){if(r==null)return e(void 0),We;const n=ht(()=>r.subscribe(e,t));return n.unsubscribe?()=>n.unsubscribe():n}const Pt=[];function $n(r,e=We){let t=null;const n=new Set;function i(a){if(js(r,a)&&(r=a,t)){const l=!Pt.length;for(const u of n)u[1](),Pt.push(u,r);if(l){for(let u=0;u<Pt.length;u+=2)Pt[u][0](Pt[u+1]);Pt.length=0}}}function s(a){i(a(r))}function o(a,l=We){const u=[a,l];return n.add(u),n.size===1&&(t=e(i,s)||We),a(r),()=>{n.delete(u),n.size===0&&t&&(t(),t=null)}}return{set:i,update:s,subscribe:o}}function xn(r){let e;return al(r,t=>e=t)(),e}let $r=!1;function ll(r){var e=$r;try{return $r=!1,[r(),$r]}finally{$r=e}}function Wi(r){var e;return((e=r.ctx)==null?void 0:e.d)??!1}function qr(r,e,t,n){var P;var i=(t&sa)!==0,s=!Xt||(t&oa)!==0,o=(t&la)!==0,a=(t&ua)!==0,l=!1,u;o?[u,l]=ll(()=>r[e]):u=r[e];var c=St in r||Wo in r,h=o&&(((P=Ht(r,e))==null?void 0:P.set)??(c&&e in r&&(O=>r[e]=O)))||void 0,d=n,f=!0,p=!1,v=()=>(p=!0,f&&(f=!1,a?d=ht(n):d=n),d);u===void 0&&n!==void 0&&(h&&s&&Ko(),u=v(),h&&h(u));var g;if(s)g=()=>{var O=r[e];return O===void 0?v():(f=!0,p=!1,O)};else{var m=(i?mr:ut)(()=>r[e]);m.f|=Ho,g=()=>{var O=H(m);return O!==void 0&&(d=void 0),O===void 0?d:O}}if((t&aa)===0)return g;if(h){var T=r.$$legacy;return function(O,L){return arguments.length>0?((!s||!L||T||l)&&h(L?g():O),O):g()}}var $=!1,A=Gt(u),E=mr(()=>{var O=g(),L=H(A);return $?($=!1,L):A.v=O});return o&&H(E),i||(E.equals=_i),function(O,L){if(arguments.length>0){const N=L?H(E):s&&o?bt(O):O;if(!E.equals(N)){if($=!0,ce(A,N),p&&d!==void 0&&(d=N),Wi(E))return O;ht(()=>H(E))}return O}return Wi(E)?E.v:H(E)}}function ul(r){Y===null&&pa(),Xt&&Y.l!==null?cl(Y).m.push(r):Kn(()=>{const e=ht(r);if(typeof e=="function")return e})}function cl(r){var e=r.l;return e.u??(e.u={a:[],b:[],m:[]})}const hl="5";var As;typeof window<"u"&&((As=window.__svelte??(window.__svelte={})).v??(As.v=new Set)).add(hl);ta();/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Gi(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function qe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Gi(Object(t),!0).forEach(function(n){dl(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Gi(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Hr(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Hr=function(e){return typeof e}:Hr=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hr(r)}function dl(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ye(){return Ye=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ye.apply(this,arguments)}function fl(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function pl(r,e){if(r==null)return{};var t=fl(r,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}var vl="1.15.6";function Ve(r){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(r)}var Xe=Ve(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),kr=Ve(/Edge/i),Ji=Ve(/firefox/i),cr=Ve(/safari/i)&&!Ve(/chrome/i)&&!Ve(/android/i),Ei=Ve(/iP(ad|od|hone)/i),no=Ve(/chrome/i)&&Ve(/android/i),io={capture:!1,passive:!1};function B(r,e,t){r.addEventListener(e,t,!Xe&&io)}function U(r,e,t){r.removeEventListener(e,t,!Xe&&io)}function an(r,e){if(e){if(e[0]===">"&&(e=e.substring(1)),r)try{if(r.matches)return r.matches(e);if(r.msMatchesSelector)return r.msMatchesSelector(e);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(e)}catch{return!1}return!1}}function so(r){return r.host&&r!==document&&r.host.nodeType?r.host:r.parentNode}function Ce(r,e,t,n){if(r){t=t||document;do{if(e!=null&&(e[0]===">"?r.parentNode===t&&an(r,e):an(r,e))||n&&r===t)return r;if(r===t)break}while(r=so(r))}return null}var Vi=/\s+/g;function be(r,e,t){if(r&&e)if(r.classList)r.classList[t?"add":"remove"](e);else{var n=(" "+r.className+" ").replace(Vi," ").replace(" "+e+" "," ");r.className=(n+(t?" "+e:"")).replace(Vi," ")}}function x(r,e,t){var n=r&&r.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(r,""):r.currentStyle&&(t=r.currentStyle),e===void 0?t:t[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=t+(typeof t=="string"?"":"px")}}function zt(r,e){var t="";if(typeof r=="string")t=r;else do{var n=x(r,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!e&&(r=r.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function oo(r,e,t){if(r){var n=r.getElementsByTagName(e),i=0,s=n.length;if(t)for(;i<s;i++)t(n[i],i);return n}return[]}function Ue(){var r=document.scrollingElement;return r||document.documentElement}function re(r,e,t,n,i){if(!(!r.getBoundingClientRect&&r!==window)){var s,o,a,l,u,c,h;if(r!==window&&r.parentNode&&r!==Ue()?(s=r.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,u=s.right,c=s.height,h=s.width):(o=0,a=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,h=window.innerWidth),(e||t)&&r!==window&&(i=i||r.parentNode,!Xe))do if(i&&i.getBoundingClientRect&&(x(i,"transform")!=="none"||t&&x(i,"position")!=="static")){var d=i.getBoundingClientRect();o-=d.top+parseInt(x(i,"border-top-width")),a-=d.left+parseInt(x(i,"border-left-width")),l=o+s.height,u=a+s.width;break}while(i=i.parentNode);if(n&&r!==window){var f=zt(i||r),p=f&&f.a,v=f&&f.d;f&&(o/=v,a/=p,h/=p,c/=v,l=o+c,u=a+h)}return{top:o,left:a,bottom:l,right:u,width:h,height:c}}}function Yi(r,e,t){for(var n=lt(r,!0),i=re(r)[e];n;){var s=re(n)[t],o=void 0;if(o=i>=s,!o)return n;if(n===Ue())break;n=lt(n,!1)}return!1}function Jt(r,e,t,n){for(var i=0,s=0,o=r.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==D.ghost&&(n||o[s]!==D.dragged)&&Ce(o[s],t.draggable,r,!1)){if(i===e)return o[s];i++}s++}return null}function Si(r,e){for(var t=r.lastElementChild;t&&(t===D.ghost||x(t,"display")==="none"||e&&!an(t,e));)t=t.previousElementSibling;return t||null}function Pe(r,e){var t=0;if(!r||!r.parentNode)return-1;for(;r=r.previousElementSibling;)r.nodeName.toUpperCase()!=="TEMPLATE"&&r!==D.clone&&(!e||an(r,e))&&t++;return t}function Ki(r){var e=0,t=0,n=Ue();if(r)do{var i=zt(r),s=i.a,o=i.d;e+=r.scrollLeft*s,t+=r.scrollTop*o}while(r!==n&&(r=r.parentNode));return[e,t]}function gl(r,e){for(var t in r)if(r.hasOwnProperty(t)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===r[t][n])return Number(t)}return-1}function lt(r,e){if(!r||!r.getBoundingClientRect)return Ue();var t=r,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=x(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Ue();if(n||e)return t;n=!0}}while(t=t.parentNode);return Ue()}function _l(r,e){if(r&&e)for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}function Dn(r,e){return Math.round(r.top)===Math.round(e.top)&&Math.round(r.left)===Math.round(e.left)&&Math.round(r.height)===Math.round(e.height)&&Math.round(r.width)===Math.round(e.width)}var hr;function ao(r,e){return function(){if(!hr){var t=arguments,n=this;t.length===1?r.call(n,t[0]):r.apply(n,t),hr=setTimeout(function(){hr=void 0},e)}}}function ml(){clearTimeout(hr),hr=void 0}function lo(r,e,t){r.scrollLeft+=e,r.scrollTop+=t}function uo(r){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(r).cloneNode(!0):t?t(r).clone(!0)[0]:r.cloneNode(!0)}function co(r,e,t){var n={};return Array.from(r.children).forEach(function(i){var s,o,a,l;if(!(!Ce(i,e.draggable,r,!1)||i.animated||i===t)){var u=re(i);n.left=Math.min((s=n.left)!==null&&s!==void 0?s:1/0,u.left),n.top=Math.min((o=n.top)!==null&&o!==void 0?o:1/0,u.top),n.right=Math.max((a=n.right)!==null&&a!==void 0?a:-1/0,u.right),n.bottom=Math.max((l=n.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var we="Sortable"+new Date().getTime();function yl(){var r=[],e;return{captureAnimationState:function(){if(r=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(i){if(!(x(i,"display")==="none"||i===D.ghost)){r.push({target:i,rect:re(i)});var s=qe({},r[r.length-1].rect);if(i.thisAnimationDuration){var o=zt(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(n){r.push(n)},removeAnimationState:function(n){r.splice(gl(r,{target:n}),1)},animateAll:function(n){var i=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var s=!1,o=0;r.forEach(function(a){var l=0,u=a.target,c=u.fromRect,h=re(u),d=u.prevFromRect,f=u.prevToRect,p=a.rect,v=zt(u,!0);v&&(h.top-=v.f,h.left-=v.e),u.toRect=h,u.thisAnimationDuration&&Dn(d,h)&&!Dn(c,h)&&(p.top-h.top)/(p.left-h.left)===(c.top-h.top)/(c.left-h.left)&&(l=bl(p,d,f,i.options)),Dn(h,c)||(u.prevFromRect=c,u.prevToRect=h,l||(l=i.options.animation),i.animate(u,p,h,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof n=="function"&&n()},o):typeof n=="function"&&n(),r=[]},animate:function(n,i,s,o){if(o){x(n,"transition",""),x(n,"transform","");var a=zt(this.el),l=a&&a.a,u=a&&a.d,c=(i.left-s.left)/(l||1),h=(i.top-s.top)/(u||1);n.animatingX=!!c,n.animatingY=!!h,x(n,"transform","translate3d("+c+"px,"+h+"px,0)"),this.forRepaintDummy=wl(n),x(n,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),x(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){x(n,"transition",""),x(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},o)}}}}function wl(r){return r.offsetWidth}function bl(r,e,t,n){return Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*n.animation}var $t=[],Cn={initializeByDefault:!0},Tr={mount:function(e){for(var t in Cn)Cn.hasOwnProperty(t)&&!(t in e)&&(e[t]=Cn[t]);$t.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),$t.push(e)},pluginEvent:function(e,t,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var s=e+"Global";$t.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][s]&&t[o.pluginName][s](qe({sortable:t},n)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](qe({sortable:t},n)))})},initializePlugins:function(e,t,n,i){$t.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var u=new a(e,t,e.options);u.sortable=e,u.options=e.options,e[l]=u,Ye(n,u.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,t){var n={};return $t.forEach(function(i){typeof i.eventProperties=="function"&&Ye(n,i.eventProperties.call(t[i.pluginName],e))}),n},modifyOption:function(e,t,n){var i;return $t.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(i=s.optionListeners[t].call(e[s.pluginName],n))}),i}};function El(r){var e=r.sortable,t=r.rootEl,n=r.name,i=r.targetEl,s=r.cloneEl,o=r.toEl,a=r.fromEl,l=r.oldIndex,u=r.newIndex,c=r.oldDraggableIndex,h=r.newDraggableIndex,d=r.originalEvent,f=r.putSortable,p=r.extraEventProperties;if(e=e||t&&t[we],!!e){var v,g=e.options,m="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Xe&&!kr?v=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(n,!0,!0)),v.to=o||t,v.from=a||t,v.item=i||t,v.clone=s,v.oldIndex=l,v.newIndex=u,v.oldDraggableIndex=c,v.newDraggableIndex=h,v.originalEvent=d,v.pullMode=f?f.lastPutMode:void 0;var T=qe(qe({},p),Tr.getEventProperties(n,e));for(var $ in T)v[$]=T[$];t&&t.dispatchEvent(v),g[m]&&g[m].call(e,v)}}var Sl=["evt"],ge=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.evt,s=pl(n,Sl);Tr.pluginEvent.bind(D)(e,t,qe({dragEl:y,parentEl:Z,ghostEl:R,rootEl:K,nextEl:yt,lastDownEl:zr,cloneEl:Q,cloneHidden:st,dragStarted:or,putSortable:ae,activeSortable:D.active,originalEvent:i,oldIndex:qt,oldDraggableIndex:dr,newIndex:Se,newDraggableIndex:nt,hideGhostForTarget:vo,unhideGhostForTarget:go,cloneNowHidden:function(){st=!0},cloneNowShown:function(){st=!1},dispatchSortableEvent:function(a){he({sortable:t,name:a,originalEvent:i})}},s))};function he(r){El(qe({putSortable:ae,cloneEl:Q,targetEl:y,rootEl:K,oldIndex:qt,oldDraggableIndex:dr,newIndex:Se,newDraggableIndex:nt},r))}var y,Z,R,K,yt,zr,Q,st,qt,Se,dr,nt,xr,ae,Ut=!1,ln=!1,un=[],gt,De,jn,In,Xi,Qi,or,xt,fr,pr=!1,Dr=!1,Wr,ue,Rn=[],ri=!1,cn=[],On=typeof document<"u",Cr=Ei,Zi=kr||Xe?"cssFloat":"float",kl=On&&!no&&!Ei&&"draggable"in document.createElement("div"),ho=function(){if(On){if(Xe)return!1;var r=document.createElement("x");return r.style.cssText="pointer-events:auto",r.style.pointerEvents==="auto"}}(),fo=function(e,t){var n=x(e),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),s=Jt(e,0,t),o=Jt(e,1,t),a=s&&x(s),l=o&&x(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+re(s).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+re(o).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=i&&n[Zi]==="none"||o&&n[Zi]==="none"&&u+c>i)?"vertical":"horizontal"},Tl=function(e,t,n){var i=n?e.left:e.top,s=n?e.right:e.bottom,o=n?e.width:e.height,a=n?t.left:t.top,l=n?t.right:t.bottom,u=n?t.width:t.height;return i===a||s===l||i+o/2===a+u/2},Ol=function(e,t){var n;return un.some(function(i){var s=i[we].options.emptyInsertThreshold;if(!(!s||Si(i))){var o=re(i),a=e>=o.left-s&&e<=o.right+s,l=t>=o.top-s&&t<=o.bottom+s;if(a&&l)return n=i}}),n},po=function(e){function t(s,o){return function(a,l,u,c){var h=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||h))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(a,l,u,c),o)(a,l,u,c);var d=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===d||s.join&&s.indexOf(d)>-1}}var n={},i=e.group;(!i||Hr(i)!="object")&&(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},vo=function(){!ho&&R&&x(R,"display","none")},go=function(){!ho&&R&&x(R,"display","")};On&&!no&&document.addEventListener("click",function(r){if(ln)return r.preventDefault(),r.stopPropagation&&r.stopPropagation(),r.stopImmediatePropagation&&r.stopImmediatePropagation(),ln=!1,!1},!0);var _t=function(e){if(y){e=e.touches?e.touches[0]:e;var t=Ol(e.clientX,e.clientY);if(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[we]._onDragOver(n)}}},Al=function(e){y&&y.parentNode[we]._isOutsideThisEl(e.target)};function D(r,e){if(!(r&&r.nodeType&&r.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(r));this.el=r,this.options=e=Ye({},e),r[we]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(r.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return fo(r,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:D.supportPointer!==!1&&"PointerEvent"in window&&(!cr||Ei),emptyInsertThreshold:5};Tr.initializePlugins(this,r,t);for(var n in t)!(n in e)&&(e[n]=t[n]);po(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:kl,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?B(r,"pointerdown",this._onTapStart):(B(r,"mousedown",this._onTapStart),B(r,"touchstart",this._onTapStart)),this.nativeDraggable&&(B(r,"dragover",this),B(r,"dragenter",this)),un.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ye(this,yl())}D.prototype={constructor:D,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(xt=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,y):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=i.filter;if(Rl(n),!y&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&cr&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Ce(l,i.draggable,n,!1),!(l&&l.animated)&&zr!==l)){if(qt=Pe(l),dr=Pe(l,i.draggable),typeof c=="function"){if(c.call(this,e,l,this)){he({sortable:t,rootEl:u,name:"filter",targetEl:l,toEl:n,fromEl:n}),ge("filter",t,{evt:e}),s&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(h){if(h=Ce(u,h.trim(),n,!1),h)return he({sortable:t,rootEl:h,name:"filter",targetEl:l,fromEl:n,toEl:n}),ge("filter",t,{evt:e}),!0}),c)){s&&e.preventDefault();return}i.handle&&!Ce(u,i.handle,n,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,n){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(n&&!y&&n.parentNode===s){var u=re(n);if(K=s,y=n,Z=y.parentNode,yt=y.nextSibling,zr=n,xr=o.group,D.dragged=y,gt={target:y,clientX:(t||e).clientX,clientY:(t||e).clientY},Xi=gt.clientX-u.left,Qi=gt.clientY-u.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,y.style["will-change"]="all",l=function(){if(ge("delayEnded",i,{evt:e}),D.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Ji&&i.nativeDraggable&&(y.draggable=!0),i._triggerDragStart(e,t),he({sortable:i,name:"choose",originalEvent:e}),be(y,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){oo(y,c.trim(),Ln)}),B(a,"dragover",_t),B(a,"mousemove",_t),B(a,"touchmove",_t),o.supportPointer?(B(a,"pointerup",i._onDrop),!this.nativeDraggable&&B(a,"pointercancel",i._onDrop)):(B(a,"mouseup",i._onDrop),B(a,"touchend",i._onDrop),B(a,"touchcancel",i._onDrop)),Ji&&this.nativeDraggable&&(this.options.touchStartThreshold=4,y.draggable=!0),ge("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(kr||Xe))){if(D.eventCanceled){this._onDrop();return}o.supportPointer?(B(a,"pointerup",i._disableDelayedDrag),B(a,"pointercancel",i._disableDelayedDrag)):(B(a,"mouseup",i._disableDelayedDrag),B(a,"touchend",i._disableDelayedDrag),B(a,"touchcancel",i._disableDelayedDrag)),B(a,"mousemove",i._delayedDragTouchMoveHandler),B(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&B(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){y&&Ln(y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;U(e,"mouseup",this._disableDelayedDrag),U(e,"touchend",this._disableDelayedDrag),U(e,"touchcancel",this._disableDelayedDrag),U(e,"pointerup",this._disableDelayedDrag),U(e,"pointercancel",this._disableDelayedDrag),U(e,"mousemove",this._delayedDragTouchMoveHandler),U(e,"touchmove",this._delayedDragTouchMoveHandler),U(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?B(document,"pointermove",this._onTouchMove):t?B(document,"touchmove",this._onTouchMove):B(document,"mousemove",this._onTouchMove):(B(y,"dragend",this),B(K,"dragstart",this._onDragStart));try{document.selection?Gr(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Ut=!1,K&&y){ge("dragStarted",this,{evt:t}),this.nativeDraggable&&B(document,"dragover",Al);var n=this.options;!e&&be(y,n.dragClass,!1),be(y,n.ghostClass,!0),D.active=this,e&&this._appendGhost(),he({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(De){this._lastX=De.clientX,this._lastY=De.clientY,vo();for(var e=document.elementFromPoint(De.clientX,De.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(De.clientX,De.clientY),e!==t);)t=e;if(y.parentNode[we]._isOutsideThisEl(e),t)do{if(t[we]){var n=void 0;if(n=t[we]._onDragOver({clientX:De.clientX,clientY:De.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=so(t));go()}},_onTouchMove:function(e){if(gt){var t=this.options,n=t.fallbackTolerance,i=t.fallbackOffset,s=e.touches?e.touches[0]:e,o=R&&zt(R,!0),a=R&&o&&o.a,l=R&&o&&o.d,u=Cr&&ue&&Ki(ue),c=(s.clientX-gt.clientX+i.x)/(a||1)+(u?u[0]-Rn[0]:0)/(a||1),h=(s.clientY-gt.clientY+i.y)/(l||1)+(u?u[1]-Rn[1]:0)/(l||1);if(!D.active&&!Ut){if(n&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(R){o?(o.e+=c-(jn||0),o.f+=h-(In||0)):o={a:1,b:0,c:0,d:1,e:c,f:h};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");x(R,"webkitTransform",d),x(R,"mozTransform",d),x(R,"msTransform",d),x(R,"transform",d),jn=c,In=h,De=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!R){var e=this.options.fallbackOnBody?document.body:K,t=re(y,!0,Cr,!0,e),n=this.options;if(Cr){for(ue=e;x(ue,"position")==="static"&&x(ue,"transform")==="none"&&ue!==document;)ue=ue.parentNode;ue!==document.body&&ue!==document.documentElement?(ue===document&&(ue=Ue()),t.top+=ue.scrollTop,t.left+=ue.scrollLeft):ue=Ue(),Rn=Ki(ue)}R=y.cloneNode(!0),be(R,n.ghostClass,!1),be(R,n.fallbackClass,!0),be(R,n.dragClass,!0),x(R,"transition",""),x(R,"transform",""),x(R,"box-sizing","border-box"),x(R,"margin",0),x(R,"top",t.top),x(R,"left",t.left),x(R,"width",t.width),x(R,"height",t.height),x(R,"opacity","0.8"),x(R,"position",Cr?"absolute":"fixed"),x(R,"zIndex","100000"),x(R,"pointerEvents","none"),D.ghost=R,e.appendChild(R),x(R,"transform-origin",Xi/parseInt(R.style.width)*100+"% "+Qi/parseInt(R.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,s=n.options;if(ge("dragStart",this,{evt:e}),D.eventCanceled){this._onDrop();return}ge("setupClone",this),D.eventCanceled||(Q=uo(y),Q.removeAttribute("id"),Q.draggable=!1,Q.style["will-change"]="",this._hideClone(),be(Q,this.options.chosenClass,!1),D.clone=Q),n.cloneId=Gr(function(){ge("clone",n),!D.eventCanceled&&(n.options.removeCloneOnHide||K.insertBefore(Q,y),n._hideClone(),he({sortable:n,name:"clone"}))}),!t&&be(y,s.dragClass,!0),t?(ln=!0,n._loopId=setInterval(n._emulateDragOver,50)):(U(document,"mouseup",n._onDrop),U(document,"touchend",n._onDrop),U(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(n,i,y)),B(document,"drop",n),x(y,"transform","translateZ(0)")),Ut=!0,n._dragStartId=Gr(n._dragStarted.bind(n,t,e)),B(document,"selectstart",n),or=!0,window.getSelection().removeAllRanges(),cr&&x(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,i,s,o,a=this.options,l=a.group,u=D.active,c=xr===l,h=a.sort,d=ae||u,f,p=this,v=!1;if(ri)return;function g(b,C){ge(b,p,qe({evt:e,isOwner:c,axis:f?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:h,fromSortable:d,target:n,completed:T,onMove:function(z,V){return jr(K,t,y,i,z,re(z),e,V)},changed:$},C))}function m(){g("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function T(b){return g("dragOverCompleted",{insertion:b}),b&&(c?u._hideClone():u._showClone(p),p!==d&&(be(y,ae?ae.options.ghostClass:u.options.ghostClass,!1),be(y,a.ghostClass,!0)),ae!==p&&p!==D.active?ae=p:p===D.active&&ae&&(ae=null),d===p&&(p._ignoreWhileAnimating=n),p.animateAll(function(){g("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(n===y&&!y.animated||n===t&&!n.animated)&&(xt=null),!a.dragoverBubble&&!e.rootEl&&n!==document&&(y.parentNode[we]._isOutsideThisEl(e.target),!b&&_t(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function $(){Se=Pe(y),nt=Pe(y,a.draggable),he({sortable:p,name:"change",toEl:t,newIndex:Se,newDraggableIndex:nt,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=Ce(n,a.draggable,t,!0),g("dragOver"),D.eventCanceled)return v;if(y.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||p._ignoreWhileAnimating===n)return T(!1);if(ln=!1,u&&!a.disabled&&(c?h||(o=Z!==K):ae===this||(this.lastPutMode=xr.checkPull(this,u,y,e))&&l.checkPut(this,u,y,e))){if(f=this._getDirection(e,n)==="vertical",i=re(y),g("dragOverValid"),D.eventCanceled)return v;if(o)return Z=K,m(),this._hideClone(),g("revert"),D.eventCanceled||(yt?K.insertBefore(y,yt):K.appendChild(y)),T(!0);var A=Si(t,a.draggable);if(!A||Dl(e,f,this)&&!A.animated){if(A===y)return T(!1);if(A&&t===e.target&&(n=A),n&&(s=re(n)),jr(K,t,y,i,n,s,e,!!n)!==!1)return m(),A&&A.nextSibling?t.insertBefore(y,A.nextSibling):t.appendChild(y),Z=t,$(),T(!0)}else if(A&&xl(e,f,this)){var E=Jt(t,0,a,!0);if(E===y)return T(!1);if(n=E,s=re(n),jr(K,t,y,i,n,s,e,!1)!==!1)return m(),t.insertBefore(y,E),Z=t,$(),T(!0)}else if(n.parentNode===t){s=re(n);var P=0,O,L=y.parentNode!==t,N=!Tl(y.animated&&y.toRect||i,n.animated&&n.toRect||s,f),q=f?"top":"left",j=Yi(n,"top","top")||Yi(y,"top","top"),oe=j?j.scrollTop:void 0;xt!==n&&(O=s[q],pr=!1,Dr=!N&&a.invertSwap||L),P=Cl(e,n,s,f,N?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,Dr,xt===n);var X;if(P!==0){var k=Pe(y);do k-=P,X=Z.children[k];while(X&&(x(X,"display")==="none"||X===R))}if(P===0||X===n)return T(!1);xt=n,fr=P;var w=n.nextElementSibling,_=!1;_=P===1;var S=jr(K,t,y,i,n,s,e,_);if(S!==!1)return(S===1||S===-1)&&(_=S===1),ri=!0,setTimeout($l,30),m(),_&&!w?t.appendChild(y):n.parentNode.insertBefore(y,_?w:n),j&&lo(j,0,oe-j.scrollTop),Z=y.parentNode,O!==void 0&&!Dr&&(Wr=Math.abs(O-re(n)[q])),$(),T(!0)}if(t.contains(y))return T(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){U(document,"mousemove",this._onTouchMove),U(document,"touchmove",this._onTouchMove),U(document,"pointermove",this._onTouchMove),U(document,"dragover",_t),U(document,"mousemove",_t),U(document,"touchmove",_t)},_offUpEvents:function(){var e=this.el.ownerDocument;U(e,"mouseup",this._onDrop),U(e,"touchend",this._onDrop),U(e,"pointerup",this._onDrop),U(e,"pointercancel",this._onDrop),U(e,"touchcancel",this._onDrop),U(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(Se=Pe(y),nt=Pe(y,n.draggable),ge("drop",this,{evt:e}),Z=y&&y.parentNode,Se=Pe(y),nt=Pe(y,n.draggable),D.eventCanceled){this._nulling();return}Ut=!1,Dr=!1,pr=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ni(this.cloneId),ni(this._dragStartId),this.nativeDraggable&&(U(document,"drop",this),U(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),cr&&x(document.body,"user-select",""),x(y,"transform",""),e&&(or&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),R&&R.parentNode&&R.parentNode.removeChild(R),(K===Z||ae&&ae.lastPutMode!=="clone")&&Q&&Q.parentNode&&Q.parentNode.removeChild(Q),y&&(this.nativeDraggable&&U(y,"dragend",this),Ln(y),y.style["will-change"]="",or&&!Ut&&be(y,ae?ae.options.ghostClass:this.options.ghostClass,!1),be(y,this.options.chosenClass,!1),he({sortable:this,name:"unchoose",toEl:Z,newIndex:null,newDraggableIndex:null,originalEvent:e}),K!==Z?(Se>=0&&(he({rootEl:Z,name:"add",toEl:Z,fromEl:K,originalEvent:e}),he({sortable:this,name:"remove",toEl:Z,originalEvent:e}),he({rootEl:Z,name:"sort",toEl:Z,fromEl:K,originalEvent:e}),he({sortable:this,name:"sort",toEl:Z,originalEvent:e})),ae&&ae.save()):Se!==qt&&Se>=0&&(he({sortable:this,name:"update",toEl:Z,originalEvent:e}),he({sortable:this,name:"sort",toEl:Z,originalEvent:e})),D.active&&((Se==null||Se===-1)&&(Se=qt,nt=dr),he({sortable:this,name:"end",toEl:Z,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ge("nulling",this),K=y=Z=R=yt=Q=zr=st=gt=De=or=Se=nt=qt=dr=xt=fr=ae=xr=D.dragged=D.ghost=D.clone=D.active=null,cn.forEach(function(e){e.checked=!0}),cn.length=jn=In=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":y&&(this._onDragOver(e),Pl(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,i=0,s=n.length,o=this.options;i<s;i++)t=n[i],Ce(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||Il(t));return e},sort:function(e,t){var n={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];Ce(a,this.options.draggable,i,!1)&&(n[s]=a)},this),t&&this.captureAnimationState(),e.forEach(function(s){n[s]&&(i.removeChild(n[s]),i.appendChild(n[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Ce(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var i=Tr.modifyOption(this,e,t);typeof i<"u"?n[e]=i:n[e]=t,e==="group"&&po(n)},destroy:function(){ge("destroy",this);var e=this.el;e[we]=null,U(e,"mousedown",this._onTapStart),U(e,"touchstart",this._onTapStart),U(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(U(e,"dragover",this),U(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),un.splice(un.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!st){if(ge("hideClone",this),D.eventCanceled)return;x(Q,"display","none"),this.options.removeCloneOnHide&&Q.parentNode&&Q.parentNode.removeChild(Q),st=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(st){if(ge("showClone",this),D.eventCanceled)return;y.parentNode==K&&!this.options.group.revertClone?K.insertBefore(Q,y):yt?K.insertBefore(Q,yt):K.appendChild(Q),this.options.group.revertClone&&this.animate(y,Q),x(Q,"display",""),st=!1}}};function Pl(r){r.dataTransfer&&(r.dataTransfer.dropEffect="move"),r.cancelable&&r.preventDefault()}function jr(r,e,t,n,i,s,o,a){var l,u=r[we],c=u.options.onMove,h;return window.CustomEvent&&!Xe&&!kr?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=r,l.dragged=t,l.draggedRect=n,l.related=i||e,l.relatedRect=s||re(e),l.willInsertAfter=a,l.originalEvent=o,r.dispatchEvent(l),c&&(h=c.call(u,l,o)),h}function Ln(r){r.draggable=!1}function $l(){ri=!1}function xl(r,e,t){var n=re(Jt(t.el,0,t.options,!0)),i=co(t.el,t.options,R),s=10;return e?r.clientX<i.left-s||r.clientY<n.top&&r.clientX<n.right:r.clientY<i.top-s||r.clientY<n.bottom&&r.clientX<n.left}function Dl(r,e,t){var n=re(Si(t.el,t.options.draggable)),i=co(t.el,t.options,R),s=10;return e?r.clientX>i.right+s||r.clientY>n.bottom&&r.clientX>n.left:r.clientY>i.bottom+s||r.clientX>n.right&&r.clientY>n.top}function Cl(r,e,t,n,i,s,o,a){var l=n?r.clientY:r.clientX,u=n?t.height:t.width,c=n?t.top:t.left,h=n?t.bottom:t.right,d=!1;if(!o){if(a&&Wr<u*i){if(!pr&&(fr===1?l>c+u*s/2:l<h-u*s/2)&&(pr=!0),pr)d=!0;else if(fr===1?l<c+Wr:l>h-Wr)return-fr}else if(l>c+u*(1-i)/2&&l<h-u*(1-i)/2)return jl(e)}return d=d||o,d&&(l<c+u*s/2||l>h-u*s/2)?l>c+u/2?1:-1:0}function jl(r){return Pe(y)<Pe(r)?1:-1}function Il(r){for(var e=r.tagName+r.className+r.src+r.href+r.textContent,t=e.length,n=0;t--;)n+=e.charCodeAt(t);return n.toString(36)}function Rl(r){cn.length=0;for(var e=r.getElementsByTagName("input"),t=e.length;t--;){var n=e[t];n.checked&&cn.push(n)}}function Gr(r){return setTimeout(r,0)}function ni(r){return clearTimeout(r)}On&&B(document,"touchmove",function(r){(D.active||Ut)&&r.cancelable&&r.preventDefault()});D.utils={on:B,off:U,css:x,find:oo,is:function(e,t){return!!Ce(e,t,e,!1)},extend:_l,throttle:ao,closest:Ce,toggleClass:be,clone:uo,index:Pe,nextTick:Gr,cancelNextTick:ni,detectDirection:fo,getChild:Jt,expando:we};D.get=function(r){return r[we]};D.mount=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(D.utils=qe(qe({},D.utils),n.utils)),Tr.mount(n)})};D.create=function(r,e){return new D(r,e)};D.version=vl;var te=[],ar,ii,si=!1,Mn,Nn,hn,lr;function Ll(){function r(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return r.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?B(document,"dragover",this._handleAutoScroll):this.options.supportPointer?B(document,"pointermove",this._handleFallbackAutoScroll):n.touches?B(document,"touchmove",this._handleFallbackAutoScroll):B(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?U(document,"dragover",this._handleAutoScroll):(U(document,"pointermove",this._handleFallbackAutoScroll),U(document,"touchmove",this._handleFallbackAutoScroll),U(document,"mousemove",this._handleFallbackAutoScroll)),es(),Jr(),ml()},nulling:function(){hn=ii=ar=si=lr=Mn=Nn=null,te.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var i=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(s,o);if(hn=t,n||this.options.forceAutoScrollFallback||kr||Xe||cr){Un(t,this.options,a,n);var l=lt(a,!0);si&&(!lr||s!==Mn||o!==Nn)&&(lr&&es(),lr=setInterval(function(){var u=lt(document.elementFromPoint(s,o),!0);u!==l&&(l=u,Jr()),Un(t,i.options,u,n)},10),Mn=s,Nn=o)}else{if(!this.options.bubbleScroll||lt(a,!0)===Ue()){Jr();return}Un(t,this.options,lt(a,!1),!1)}}},Ye(r,{pluginName:"scroll",initializeByDefault:!0})}function Jr(){te.forEach(function(r){clearInterval(r.pid)}),te=[]}function es(){clearInterval(lr)}var Un=ao(function(r,e,t,n){if(e.scroll){var i=(r.touches?r.touches[0]:r).clientX,s=(r.touches?r.touches[0]:r).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Ue(),u=!1,c;ii!==t&&(ii=t,Jr(),ar=e.scroll,c=e.scrollFn,ar===!0&&(ar=lt(t,!0)));var h=0,d=ar;do{var f=d,p=re(f),v=p.top,g=p.bottom,m=p.left,T=p.right,$=p.width,A=p.height,E=void 0,P=void 0,O=f.scrollWidth,L=f.scrollHeight,N=x(f),q=f.scrollLeft,j=f.scrollTop;f===l?(E=$<O&&(N.overflowX==="auto"||N.overflowX==="scroll"||N.overflowX==="visible"),P=A<L&&(N.overflowY==="auto"||N.overflowY==="scroll"||N.overflowY==="visible")):(E=$<O&&(N.overflowX==="auto"||N.overflowX==="scroll"),P=A<L&&(N.overflowY==="auto"||N.overflowY==="scroll"));var oe=E&&(Math.abs(T-i)<=o&&q+$<O)-(Math.abs(m-i)<=o&&!!q),X=P&&(Math.abs(g-s)<=o&&j+A<L)-(Math.abs(v-s)<=o&&!!j);if(!te[h])for(var k=0;k<=h;k++)te[k]||(te[k]={});(te[h].vx!=oe||te[h].vy!=X||te[h].el!==f)&&(te[h].el=f,te[h].vx=oe,te[h].vy=X,clearInterval(te[h].pid),(oe!=0||X!=0)&&(u=!0,te[h].pid=setInterval((function(){n&&this.layer===0&&D.active._onTouchMove(hn);var w=te[this.layer].vy?te[this.layer].vy*a:0,_=te[this.layer].vx?te[this.layer].vx*a:0;typeof c=="function"&&c.call(D.dragged.parentNode[we],_,w,r,hn,te[this.layer].el)!=="continue"||lo(te[this.layer].el,_,w)}).bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==l&&(d=lt(d,!1)));si=u}},30),_o=function(e){var t=e.originalEvent,n=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var u=n||s;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,h=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(h)&&(o("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function ki(){}ki.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=Jt(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:_o};Ye(ki,{pluginName:"revertOnSpill"});function Ti(){}Ti.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,i=n||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:_o};Ye(Ti,{pluginName:"removeOnSpill"});D.mount(new Ll);D.mount(Ti,ki);const Ml="modulepreload",Nl=function(r){return"/github-projects-dashboard/"+r},ts={},Vt=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let o=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=o(t.map(u=>{if(u=Nl(u),u in ts)return;ts[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Ml,c||(d.as="script"),d.crossOrigin="",d.href=u,l&&d.setAttribute("nonce",l),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},Ul=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Vt(async()=>{const{default:n}=await Promise.resolve().then(()=>er);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class Oi extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Fl extends Oi{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Bl extends Oi{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ql extends Oi{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var oi;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(oi||(oi={}));var Hl=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class zl{constructor(e,{headers:t={},customFetch:n,region:i=oi.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=Ul(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return Hl(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=t;let a={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:u}).catch(p=>{throw new Fl(p)}),h=c.headers.get("x-relay-error");if(h&&h==="true")throw new Bl(c);if(!c.ok)throw new ql(c);let d=((n=c.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),f;return d==="application/json"?f=yield c.json():d==="application/octet-stream"?f=yield c.blob():d==="text/event-stream"?f=c:d==="multipart/form-data"?f=yield c.formData():f=yield c.text(),{data:f,error:null}}catch(i){return{data:null,error:i}}})}}function Ai(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Wl(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var ie={},Dt={},Ct={},jt={},It={},Rt={},Gl=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Yt=Gl();const Jl=Yt.fetch,mo=Yt.fetch.bind(Yt),yo=Yt.Headers,Vl=Yt.Request,Yl=Yt.Response,er=Object.freeze(Object.defineProperty({__proto__:null,Headers:yo,Request:Vl,Response:Yl,default:mo,fetch:Jl},Symbol.toStringTag,{value:"Module"})),Kl=Wl(er);var Ir={},rs;function wo(){if(rs)return Ir;rs=1,Object.defineProperty(Ir,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Ir.default=r,Ir}var ns;function bo(){if(ns)return Rt;ns=1;var r=Rt&&Rt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Rt,"__esModule",{value:!0});const e=r(Kl),t=r(wo());class n{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=Object.assign({},this.headers),this.headers[s]=o,this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var c,h,d;let f=null,p=null,v=null,g=u.status,m=u.statusText;if(u.ok){if(this.method!=="HEAD"){const E=await u.text();E===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=E:p=JSON.parse(E))}const $=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),A=(h=u.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");$&&A&&A.length>1&&(v=parseInt(A[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(f={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,v=null,g=406,m="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const $=await u.text();try{f=JSON.parse($),Array.isArray(f)&&u.status===404&&(p=[],f=null,g=200,m="OK")}catch{u.status===404&&$===""?(g=204,m="No Content"):f={message:$}}if(f&&this.isMaybeSingle&&(!((d=f==null?void 0:f.details)===null||d===void 0)&&d.includes("0 rows"))&&(f=null,g=200,m="OK"),f&&this.shouldThrowOnError)throw new t.default(f)}return{error:f,data:p,count:v,status:g,statusText:m}});return this.shouldThrowOnError||(l=l.catch(u=>{var c,h,d;return{error:{message:`${(c=u==null?void 0:u.name)!==null&&c!==void 0?c:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(d=u==null?void 0:u.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),l.then(s,o)}returns(){return this}overrideTypes(){return this}}return Rt.default=n,Rt}var is;function Eo(){if(is)return It;is=1;var r=It&&It.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(It,"__esModule",{value:!0});const e=r(bo());class t extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var c;const h=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),d=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${d}"; options=${h};`,u==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return It.default=t,It}var ss;function Pi(){if(ss)return jt;ss=1;var r=jt&&jt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(jt,"__esModule",{value:!0});const e=r(Eo());class t extends e.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${u}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return jt.default=t,jt}var os;function So(){if(os)return Ct;os=1;var r=Ct&&Ct.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ct,"__esModule",{value:!0});const e=r(Pi());class t{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=s,this.schema=o,this.fetch=a}select(i,{head:s=!1,count:o}={}){const a=s?"HEAD":"GET";let l=!1;const u=(i??"*").split("").map(c=>/\s/.test(c)&&!l?"":(c==='"'&&(l=!l),c)).join("");return this.url.searchParams.set("select",u),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:s,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){const u=i.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const u="POST",c=[`resolution=${o?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(i)){const h=i.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(h.length>0){const d=[...new Set(h)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:s}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const s="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Ct.default=t,Ct}var nr={},ir={},as;function Xl(){return as||(as=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.version=void 0,ir.version="0.0.0-automated"),ir}var ls;function Ql(){if(ls)return nr;ls=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.DEFAULT_HEADERS=void 0;const r=Xl();return nr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${r.version}`},nr}var us;function Zl(){if(us)return Dt;us=1;var r=Dt&&Dt.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Dt,"__esModule",{value:!0});const e=r(So()),t=r(Pi()),n=Ql();class i{constructor(o,{headers:a={},schema:l,fetch:u}={}){this.url=o,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=u}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:u=!1,count:c}={}){let h;const d=new URL(`${this.url}/rpc/${o}`);let f;l||u?(h=l?"HEAD":"GET",Object.entries(a).filter(([v,g])=>g!==void 0).map(([v,g])=>[v,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([v,g])=>{d.searchParams.append(v,g)})):(h="POST",f=a);const p=Object.assign({},this.headers);return c&&(p.Prefer=`count=${c}`),new t.default({method:h,url:d,headers:p,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}}return Dt.default=i,Dt}var cs;function eu(){if(cs)return ie;cs=1;var r=ie&&ie.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ie,"__esModule",{value:!0}),ie.PostgrestError=ie.PostgrestBuilder=ie.PostgrestTransformBuilder=ie.PostgrestFilterBuilder=ie.PostgrestQueryBuilder=ie.PostgrestClient=void 0;const e=r(Zl());ie.PostgrestClient=e.default;const t=r(So());ie.PostgrestQueryBuilder=t.default;const n=r(Pi());ie.PostgrestFilterBuilder=n.default;const i=r(Eo());ie.PostgrestTransformBuilder=i.default;const s=r(bo());ie.PostgrestBuilder=s.default;const o=r(wo());return ie.PostgrestError=o.default,ie.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:o.default},ie}var tu=eu();const ru=Ai(tu),{PostgrestClient:nu,PostgrestQueryBuilder:lh,PostgrestFilterBuilder:uh,PostgrestTransformBuilder:ch,PostgrestBuilder:hh,PostgrestError:dh}=ru,iu="2.11.2",su={"X-Client-Info":`realtime-js/${iu}`},ou="1.0.0",ko=1e4,au=1e3;var Wt;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Wt||(Wt={}));var ke;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(ke||(ke={}));var je;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(je||(je={}));var ai;(function(r){r.websocket="websocket"})(ai||(ai={}));var Et;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Et||(Et={}));class lu{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+i));o=o+i;const l=n.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class To{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var J;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(J||(J={}));const hs=(r,e,t={})=>{var n;const i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((s,o)=>(s[o]=uu(o,r,e,i),s),{})},uu=(r,e,t,n)=>{const i=e.find(a=>a.name===r),s=i==null?void 0:i.type,o=t[r];return s&&!n.includes(s)?Oo(s,o):li(o)},Oo=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return fu(e,t)}switch(r){case J.bool:return cu(e);case J.float4:case J.float8:case J.int2:case J.int4:case J.int8:case J.numeric:case J.oid:return hu(e);case J.json:case J.jsonb:return du(e);case J.timestamp:return pu(e);case J.abstime:case J.date:case J.daterange:case J.int4range:case J.int8range:case J.money:case J.reltime:case J.text:case J.time:case J.timestamptz:case J.timetz:case J.tsrange:case J.tstzrange:return li(e);default:return li(e)}},li=r=>r,cu=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},hu=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},du=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},fu=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let s;const o=r.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Oo(e,a))}return r},pu=r=>typeof r=="string"?r.replace(" ","T"):r,Ao=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Fn{constructor(e,t,n={},i=ko){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ds;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(ds||(ds={}));class vr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vr.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=vr.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=vr.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const h=s[u];if(h){const d=c.map(g=>g.presence_ref),f=h.map(g=>g.presence_ref),p=c.filter(g=>f.indexOf(g.presence_ref)<0),v=h.filter(g=>d.indexOf(g.presence_ref)<0);p.length>0&&(a[u]=p),v.length>0&&(l[u]=v)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},n,i)}static syncDiff(e,t,n,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const h=e[a].map(f=>f.presence_ref),d=c.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...d)}n(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return"metas"in i?t[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[n]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var fs;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(fs||(fs={}));var ps;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(ps||(ps={}));var ze;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(ze||(ze={}));class $i{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=ke.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Fn(this,je.join,this.params,this.timeout),this.rejoinTimer=new To(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ke.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ke.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this._on(je.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new vr(this),this.broadcastEndpointURL=Ao(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(c=>e==null?void 0:e(ze.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(ze.CLOSED));const l={},u={broadcast:s,presence:o,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(c=>c.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:c})=>{var h;if(this.socket.setAuth(),c===void 0){e==null||e(ze.SUBSCRIBED);return}else{const d=this.bindings.postgres_changes,f=(h=d==null?void 0:d.length)!==null&&h!==void 0?h:0,p=[];for(let v=0;v<f;v++){const g=d[v],{filter:{event:m,schema:T,table:$,filter:A}}=g,E=c&&c[v];if(E&&E.event===m&&E.schema===T&&E.table===$&&E.filter===A)p.push(Object.assign(Object.assign({},g),{id:E.id}));else{this.unsubscribe(),e==null||e(ze.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(ze.SUBSCRIBED);return}}).receive("error",c=>{e==null||e(ze.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ze.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ke.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(je.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const i=new Fn(this,je.leave,{},e);i.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,t,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Fn(this,e,t,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=je;if(n&&[a,l,u,c].indexOf(o)>=0&&n!==this._joinRef())return;let d=this._onMessage(o,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var p,v,g;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((g=(v=f.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(f=>f.callback(d,n)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var p,v,g,m,T,$;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const A=f.id,E=(p=f.filter)===null||p===void 0?void 0:p.event;return A&&((v=t.ids)===null||v===void 0?void 0:v.includes(A))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((g=t.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const A=(T=(m=f==null?void 0:f.filter)===null||m===void 0?void 0:m.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return A==="*"||A===(($=t==null?void 0:t.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const p=d.data,{schema:v,table:g,commit_timestamp:m,type:T,errors:$}=p;d=Object.assign(Object.assign({},{schema:v,table:g,commit_timestamp:m,eventType:T,new:{},old:{},errors:$}),this._getPayloadRecords(p))}f.callback(d,n)})}_isClosed(){return this.state===ke.closed}_isJoined(){return this.state===ke.joined}_isJoining(){return this.state===ke.joining}_isLeaving(){return this.state===ke.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&$i.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(je.close,{},e)}_onError(e){this._on(je.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ke.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=hs(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=hs(e.columns,e.old_record)),t}}const vu=()=>{},gu=typeof WebSocket<"u",_u=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class mu{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=su,this.params={},this.timeout=ko,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=vu,this.conn=null,this.sendBuffer=[],this.serializer=new lu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>Vt(async()=>{const{default:l}=await Promise.resolve().then(()=>er);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${ai.websocket}`,this.httpEndpoint=Ao(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new To(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(gu){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new yu(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Vt(async()=>{const{default:e}=await import("./browser-D8EsAss3.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ou}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Wt.connecting:return Et.Connecting;case Wt.open:return Et.Open;case Wt.closing:return Et.Closing;default:return Et.Closed}}isConnected(){return this.connectionState()===Et.Open}channel(e,t={config:{}}){const n=new $i(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let n=null;try{n=JSON.parse(atob(t.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=t,this.channels.forEach(i=>{t&&i.updateJoinPayload({access_token:t}),i.joinedOnce&&i._isJoined()&&i._push(je.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(au,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:i,payload:s,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${n} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(n)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(je.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([_u],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class yu{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Wt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class xi extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function se(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class wu extends xi{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ui extends xi{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var bu=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const Po=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Vt(async()=>{const{default:n}=await Promise.resolve().then(()=>er);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},Eu=()=>bu(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Vt(()=>Promise.resolve().then(()=>er),void 0)).Response:Response}),ci=r=>{if(Array.isArray(r))return r.map(t=>ci(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=ci(n)}),e};var Tt=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const Bn=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Su=(r,e,t)=>Tt(void 0,void 0,void 0,function*(){const n=yield Eu();r instanceof n&&!(t!=null&&t.noResolveJson)?r.json().then(i=>{e(new wu(Bn(i),r.status||500))}).catch(i=>{e(new ui(Bn(i),i))}):e(new ui(Bn(r),r))}),ku=(r,e,t,n)=>{const i={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),t))};function Or(r,e,t,n,i,s){return Tt(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,ku(e,n,i,s)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Su(l,a,n))})})}function dn(r,e,t,n){return Tt(this,void 0,void 0,function*(){return Or(r,"GET",e,t,n)})}function it(r,e,t,n,i){return Tt(this,void 0,void 0,function*(){return Or(r,"POST",e,n,i,t)})}function Tu(r,e,t,n,i){return Tt(this,void 0,void 0,function*(){return Or(r,"PUT",e,n,i,t)})}function Ou(r,e,t,n){return Tt(this,void 0,void 0,function*(){return Or(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function $o(r,e,t,n,i){return Tt(this,void 0,void 0,function*(){return Or(r,"DELETE",e,n,i,t)})}var _e=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const Au={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vs={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Pu{constructor(e,t={},n,i){this.url=e,this.headers=t,this.bucketId=n,this.fetch=Po(i)}uploadOrUpdate(e,t,n,i){return _e(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},vs),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),d=yield h.json();return h.ok?{data:{path:u,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(s){if(se(s))return{data:null,error:s};throw s}})}upload(e,t,n){return _e(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,i){return _e(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:vs.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),d=yield h.json();return h.ok?{data:{path:s,fullPath:d.Key},error:null}:{data:null,error:d}}catch(l){if(se(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return _e(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield it(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new xi("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}})}update(e,t,n){return _e(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return _e(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(se(i))return{data:null,error:i};throw i}})}copy(e,t,n){return _e(this,void 0,void 0,function*(){try{return{data:{path:(yield it(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(se(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,n){return _e(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield it(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(se(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,n){return _e(this,void 0,void 0,function*(){try{const i=yield it(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(se(i))return{data:null,error:i};throw i}})}download(e,t){return _e(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield dn(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(se(a))return{data:null,error:a};throw a}})}info(e){return _e(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield dn(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:ci(n),error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}})}exists(e){return _e(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Ou(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(se(n)&&n instanceof ui){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(e){return _e(this,void 0,void 0,function*(){try{return{data:yield $o(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}list(e,t,n){return _e(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Au),t),{prefix:e||""});return{data:yield it(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(se(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const $u="2.7.1",xu={"X-Client-Info":`storage-js/${$u}`};var Lt=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class Du{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},xu),t),this.fetch=Po(n)}listBuckets(){return Lt(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(se(e))return{data:null,error:e};throw e}})}getBucket(e){return Lt(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Lt(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Lt(this,void 0,void 0,function*(){try{return{data:yield Tu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Lt(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Lt(this,void 0,void 0,function*(){try{return{data:yield $o(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}}class Cu extends Du{constructor(e,t={},n){super(e,t,n)}from(e){return new Pu(this.url,this.headers,e,this.fetch)}}const ju="2.49.4";let ur="";typeof Deno<"u"?ur="deno":typeof document<"u"?ur="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ur="react-native":ur="node";const Iu={"X-Client-Info":`supabase-js-${ur}/${ju}`},Ru={headers:Iu},Lu={schema:"public"},Mu={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Nu={};var Uu=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const Fu=r=>{let e;return r?e=r:typeof fetch>"u"?e=mo:e=fetch,(...t)=>e(...t)},Bu=()=>typeof Headers>"u"?yo:Headers,qu=(r,e,t)=>{const n=Fu(t),i=Bu();return(s,o)=>Uu(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:r;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",r),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(s,Object.assign(Object.assign({},o),{headers:u}))})};var Hu=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function zu(r){return r.replace(/\/$/,"")}function Wu(r,e){const{db:t,auth:n,realtime:i,global:s}=r,{db:o,auth:a,realtime:l,global:u}=e,c={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},u),s),accessToken:()=>Hu(this,void 0,void 0,function*(){return""})};return r.accessToken?c.accessToken=r.accessToken:delete c.accessToken,c}const xo="2.69.1",Ft=30*1e3,hi=3,qn=hi*Ft,Gu="http://localhost:9999",Ju="supabase.auth.token",Vu={"X-Client-Info":`gotrue-js/${xo}`},di="X-Supabase-Api-Version",Do={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Yu=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ku=6e5;class Di extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function M(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Xu extends Di{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function Qu(r){return M(r)&&r.name==="AuthApiError"}class Co extends Di{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ft extends Di{constructor(e,t,n,i){super(e,n,i),this.name=t,this.status=n}}class et extends ft{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Zu(r){return M(r)&&r.name==="AuthSessionMissingError"}class Hn extends ft{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Rr extends ft{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Lr extends ft{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ec(r){return M(r)&&r.name==="AuthImplicitGrantRedirectError"}class gs extends ft{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fi extends ft{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function zn(r){return M(r)&&r.name==="AuthRetryableFetchError"}class _s extends ft{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class gr extends ft{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ms="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ys=` 	
\r=`.split(""),tc=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<ys.length;e+=1)r[ys[e].charCodeAt(0)]=-2;for(let e=0;e<ms.length;e+=1)r[ms[e].charCodeAt(0)]=e;return r})();function jo(r,e,t){const n=tc[r];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function ws(r){const e=[],t=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{ic(o,n,t)};for(let o=0;o<r.length;o+=1)jo(r.charCodeAt(o),i,s);return e.join("")}function rc(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function nc(r,e){for(let t=0;t<r.length;t+=1){let n=r.charCodeAt(t);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(r.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}rc(n,e)}}function ic(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let n=1;n<6;n+=1)if((r>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function sc(r){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<r.length;i+=1)jo(r.charCodeAt(i),t,n);return new Uint8Array(e)}function oc(r){const e=[];return nc(r,t=>e.push(t)),new Uint8Array(e)}function ac(r){return Math.round(Date.now()/1e3)+r}function lc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Re=()=>typeof window<"u"&&typeof document<"u",mt={tested:!1,writable:!1},_r=()=>{if(!Re())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(mt.tested)return mt.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),mt.tested=!0,mt.writable=!0}catch{mt.tested=!0,mt.writable=!1}return mt.writable};function uc(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((n,i)=>{e[i]=n}),e}const Io=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Vt(async()=>{const{default:n}=await Promise.resolve().then(()=>er);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},cc=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Ro=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Mr=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Nr=async(r,e)=>{await r.removeItem(e)};class An{constructor(){this.promise=new An.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}An.promiseConstructor=Promise;function Wn(r){const e=r.split(".");if(e.length!==3)throw new gr("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Yu.test(e[n]))throw new gr("JWT not in base64url format");return{header:JSON.parse(ws(e[0])),payload:JSON.parse(ws(e[1])),signature:sc(e[2]),raw:{header:e[0],payload:e[1]}}}async function hc(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function dc(r,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await r(s);if(!e(s,null,o)){n(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function fc(r){return("0"+r.toString(16)).substr(-2)}function pc(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,fc).join("")}async function vc(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function gc(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await vc(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Mt(r,e,t=!1){const n=pc();let i=n;t&&(i+="/PASSWORD_RECOVERY"),await Ro(r,`${e}-code-verifier`,i);const s=await gc(n);return[s,n===s?"plain":"s256"]}const _c=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mc(r){const e=r.headers.get(di);if(!e||!e.match(_c))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function yc(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function wc(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var bc=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const wt=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Ec=[502,503,504];async function bs(r){var e;if(!cc(r))throw new fi(wt(r),0);if(Ec.includes(r.status))throw new fi(wt(r),r.status);let t;try{t=await r.json()}catch(s){throw new Co(wt(s),s)}let n;const i=mc(r);if(i&&i.getTime()>=Do["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new _s(wt(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new et}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new _s(wt(t),r.status,t.weak_password.reasons);throw new Xu(wt(t),r.status||500,n)}const Sc=(r,e,t,n)=>{const i={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};async function F(r,e,t,n){var i;const s=Object.assign({},n==null?void 0:n.headers);s[di]||(s[di]=Do["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await kc(r,e,t+a,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function kc(r,e,t,n,i,s){const o=Sc(e,n,i,s);let a;try{a=await r(t,Object.assign({},o))}catch(l){throw console.error(l),new fi(wt(l),0)}if(a.ok||await bs(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await bs(l)}}function tt(r){var e;let t=null;Pc(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=ac(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function Es(r){const e=tt(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function ot(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Tc(r){return{data:r,error:null}}function Oc(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:s}=r,o=bc(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Ac(r){return r}function Pc(r){return r.access_token&&r.refresh_token&&r.expires_in}var $c=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class xc{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Io(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await F(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await F(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ot})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=$c(e,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await F(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Oc,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(M(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await F(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ot})}catch(t){if(M(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await F(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Ac});if(c.error)throw c.error;const h=await c.json(),d=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(p=>{const v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(p.split(";")[1].split("=")[1]);u[`${g}Page`]=v}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(M(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await F(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ot})}catch(t){if(M(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await F(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ot})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await F(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ot})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await F(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:n}}catch(t){if(M(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await F(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(M(t))return{data:null,error:t};throw t}}}const Dc={getItem:r=>_r()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{_r()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{_r()&&globalThis.localStorage.removeItem(r)}};function Ss(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function Cc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Nt={debug:!!(globalThis&&_r()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Lo extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class jc extends Lo{}async function Ic(r,e,t){Nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Nt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,i.name);try{return await t()}finally{Nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,i.name)}}else{if(e===0)throw Nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new jc(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Nt.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Cc();const Rc={url:Gu,storageKey:Ju,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Vu,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ks(r,e,t){return await t()}class Er{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Er.nextInstanceID,Er.nextInstanceID+=1,this.instanceID>0&&Re()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Rc),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new xc({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Io(i.fetch),this.lock=i.lock||ks,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Re()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Ic:this.lock=ks,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:_r()?this.storage=Dc:(this.memoryStorage={},this.storage=Ss(this.memoryStorage)):(this.memoryStorage={},this.storage=Ss(this.memoryStorage)),Re()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${xo}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=uc(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Re()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),ec(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return M(t)?{error:t}:{error:new Co("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,i;try{const s=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:tt}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(M(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,n,i;try{let s;if("email"in e){const{email:c,password:h,options:d}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Mt(this.storage,this.storageKey)),s=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:c,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:p},xform:tt})}else if("phone"in e){const{phone:c,password:h,options:d}=e;s=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},channel:(i=d==null?void 0:d.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:tt})}else throw new Rr("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(M(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Es})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Es})}else throw new Rr("You must provide either an email or phone number and a password");const{data:n,error:i}=t;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Hn}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(t){if(M(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Mr(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(t??"").split("/");try{const{data:s,error:o}=await F(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:tt});if(await Nr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Hn}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(M(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:n,token:i,access_token:s,nonce:o}=e,a=await F(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:tt}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Hn}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(M(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Mt(this.storage,this.storageKey));const{error:h}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Rr("You must provide either an email or phone number.")}catch(a){if(M(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await F(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:tt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(M(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,n,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Mt(this.storage,this.storageKey)),await F(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:Tc})}catch(s){if(M(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new et;const{error:i}=await F(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(M(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:o}=await F(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:o,error:a}=await F(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Rr("You must provide either an email or phone number and a type")}catch(t){if(M(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Mr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<qn:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ot}):await this._useSession(async t=>{var n,i,s;const{data:o,error:a}=t;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new et}:await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:ot})})}catch(t){if(M(t))return Zu(t)&&(await this._removeSession(),await Nr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new et;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Mt(this.storage,this.storageKey));const{data:u,error:c}=await F(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:ot});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new et;const t=Date.now()/1e3;let n=t,i=!0,s=null;const{payload:o}=Wn(e.access_token);if(o.exp&&(n=o.exp,i=n<=t),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(M(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new et;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(M(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Re())throw new Lr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Lr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new gs("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Lr("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new gs("No code detected.");const{data:T,error:$}=await this._exchangeCodeForSession(e.code);if($)throw $;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!s||!a||!o||!u)throw new Lr("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(a);let d=c+h;l&&(d=parseInt(l));const f=d-c;f*1e3<=Ft&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const p=d-h;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,c);const{data:v,error:g}=await this._getUser(s);if(g)throw g;const m={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:d,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(M(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Mr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s)return{error:s};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Qu(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Nr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=lc(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Mt(this.storage,this.storageKey,!0));try{return await F(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(M(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(M(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:i}=await this._useSession(async s=>{var o,a,l,u,c;const{data:h,error:d}=s;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await F(this.fetch,"GET",f,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return Re()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(M(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,i;const{data:s,error:o}=t;if(o)throw o;return await F(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(M(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await dc(async i=>(i>0&&await hc(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await F(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:tt})),(i,s)=>{const o=200*Math.pow(2,i);return s&&zn(s)&&Date.now()+o-n<Ft})}catch(n){if(this._debug(t,"error",n),M(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Re()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Mr(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<qn;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${qn}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:s}=await this._callRefreshToken(n.refresh_token);s&&(console.error(s),zn(s)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new et;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new An;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new et;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),M(s)){const o={session:null,error:s};return zn(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ro(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Nr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Re()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ft);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Ft);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ft}ms, refresh threshold is ${hi} ticks`),i<=hi&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Lo)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Re()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const i=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await Mt(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;return s?{data:null,error:s}:await F(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(M(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await F(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(M(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:a}=await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(M(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;return s?{data:null,error:s}:await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(M(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Wn(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(t=i.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+Ku>Date.now()))return n;const{data:i,error:s}=await F(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!i.keys||i.keys.length===0)throw new gr("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),n=i.keys.find(o=>o.kid===e),!n)throw new gr("No matching signing key found in JWKS");return n}async getClaims(e,t={keys:[]}){try{let n=e;if(!n){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};n=f.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=Wn(n);if(yc(s.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:s,header:i,signature:o},error:null}}const u=wc(i.alg),c=await this.fetchJwk(i.kid,t),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,oc(`${a}.${l}`)))throw new gr("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}}}Er.nextInstanceID=0;const Lc=Er;class Mc extends Lc{constructor(e){super(e)}}var Nc=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class Uc{constructor(e,t,n){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=zu(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:Lu,realtime:Nu,auth:Object.assign(Object.assign({},Mu),{storageKey:l}),global:Ru},c=Wu(n??{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=qu(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new nu(`${a}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new zl(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Cu(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Nc(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,storageKey:s,flowType:o,lock:a,debug:l},u,c){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Mc({url:this.authUrl,headers:Object.assign(Object.assign({},h),u),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new mu(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Fc=(r,e,t)=>new Uc(r,e,t),Ur=Fc("https://ptmcrrrrdsjgzfdawzkg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB0bWNycnJyZHNqZ3pmZGF3emtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUwMDI4MzYsImV4cCI6MjA2MDU3ODgzNn0.E_jnXoiniR8-X_VBw3BebpeuBCSTGtZb5qgzMONcvDI");function Bc(r){const e=r-1;return e*e*e+1}function qc(r,{delay:e=0,duration:t=400,easing:n=Bc,axis:i="y"}={}){const s=getComputedStyle(r),o=+s.opacity,a=i==="y"?"height":"width",l=parseFloat(s[a]),u=i==="y"?["top","bottom"]:["left","right"],c=u.map(m=>`${m[0].toUpperCase()}${m.slice(1)}`),h=parseFloat(s[`padding${c[0]}`]),d=parseFloat(s[`padding${c[1]}`]),f=parseFloat(s[`margin${c[0]}`]),p=parseFloat(s[`margin${c[1]}`]),v=parseFloat(s[`border${c[0]}Width`]),g=parseFloat(s[`border${c[1]}Width`]);return{delay:e,duration:t,easing:n,css:m=>`overflow: hidden;opacity: ${Math.min(m*20,1)*o};${a}: ${m*l}px;padding-${u[0]}: ${m*h}px;padding-${u[1]}: ${m*d}px;margin-${u[0]}: ${m*f}px;margin-${u[1]}: ${m*p}px;border-${u[0]}-width: ${m*v}px;border-${u[1]}-width: ${m*g}px;min-${a}: 0`}}var Vr={exports:{}},Hc=Vr.exports,Ts;function zc(){return Ts||(Ts=1,function(r,e){(function(t,n){r.exports=n()})(Hc,function(){var t=1e3,n=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",u="day",c="week",h="month",d="quarter",f="year",p="date",v="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,T={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(k){var w=["th","st","nd","rd"],_=k%100;return"["+k+(w[(_-20)%10]||w[_]||w[0])+"]"}},$=function(k,w,_){var S=String(k);return!S||S.length>=w?k:""+Array(w+1-S.length).join(_)+k},A={s:$,z:function(k){var w=-k.utcOffset(),_=Math.abs(w),S=Math.floor(_/60),b=_%60;return(w<=0?"+":"-")+$(S,2,"0")+":"+$(b,2,"0")},m:function k(w,_){if(w.date()<_.date())return-k(_,w);var S=12*(_.year()-w.year())+(_.month()-w.month()),b=w.clone().add(S,h),C=_-b<0,I=w.clone().add(S+(C?-1:1),h);return+(-(S+(_-b)/(C?b-I:I-b))||0)},a:function(k){return k<0?Math.ceil(k)||0:Math.floor(k)},p:function(k){return{M:h,y:f,w:c,d:u,D:p,h:l,m:a,s:o,ms:s,Q:d}[k]||String(k||"").toLowerCase().replace(/s$/,"")},u:function(k){return k===void 0}},E="en",P={};P[E]=T;var O="$isDayjsObject",L=function(k){return k instanceof oe||!(!k||!k[O])},N=function k(w,_,S){var b;if(!w)return E;if(typeof w=="string"){var C=w.toLowerCase();P[C]&&(b=C),_&&(P[C]=_,b=C);var I=w.split("-");if(!b&&I.length>1)return k(I[0])}else{var z=w.name;P[z]=w,b=z}return!S&&b&&(E=b),b||!S&&E},q=function(k,w){if(L(k))return k.clone();var _=typeof w=="object"?w:{};return _.date=k,_.args=arguments,new oe(_)},j=A;j.l=N,j.i=L,j.w=function(k,w){return q(k,{locale:w.$L,utc:w.$u,x:w.$x,$offset:w.$offset})};var oe=function(){function k(_){this.$L=N(_.locale,null,!0),this.parse(_),this.$x=this.$x||_.x||{},this[O]=!0}var w=k.prototype;return w.parse=function(_){this.$d=function(S){var b=S.date,C=S.utc;if(b===null)return new Date(NaN);if(j.u(b))return new Date;if(b instanceof Date)return new Date(b);if(typeof b=="string"&&!/Z$/i.test(b)){var I=b.match(g);if(I){var z=I[2]-1||0,V=(I[7]||"0").substring(0,3);return C?new Date(Date.UTC(I[1],z,I[3]||1,I[4]||0,I[5]||0,I[6]||0,V)):new Date(I[1],z,I[3]||1,I[4]||0,I[5]||0,I[6]||0,V)}}return new Date(b)}(_),this.init()},w.init=function(){var _=this.$d;this.$y=_.getFullYear(),this.$M=_.getMonth(),this.$D=_.getDate(),this.$W=_.getDay(),this.$H=_.getHours(),this.$m=_.getMinutes(),this.$s=_.getSeconds(),this.$ms=_.getMilliseconds()},w.$utils=function(){return j},w.isValid=function(){return this.$d.toString()!==v},w.isSame=function(_,S){var b=q(_);return this.startOf(S)<=b&&b<=this.endOf(S)},w.isAfter=function(_,S){return q(_)<this.startOf(S)},w.isBefore=function(_,S){return this.endOf(S)<q(_)},w.$g=function(_,S,b){return j.u(_)?this[S]:this.set(b,_)},w.unix=function(){return Math.floor(this.valueOf()/1e3)},w.valueOf=function(){return this.$d.getTime()},w.startOf=function(_,S){var b=this,C=!!j.u(S)||S,I=j.p(_),z=function(vt,ve){var Qe=j.w(b.$u?Date.UTC(b.$y,ve,vt):new Date(b.$y,ve,vt),b);return C?Qe:Qe.endOf(u)},V=function(vt,ve){return j.w(b.toDate()[vt].apply(b.toDate("s"),(C?[0,0,0,0]:[23,59,59,999]).slice(ve)),b)},ne=this.$W,le=this.$M,Oe=this.$D,Ot="set"+(this.$u?"UTC":"");switch(I){case f:return C?z(1,0):z(31,11);case h:return C?z(1,le):z(0,le+1);case c:var pt=this.$locale().weekStart||0,tr=(ne<pt?ne+7:ne)-pt;return z(C?Oe-tr:Oe+(6-tr),le);case u:case p:return V(Ot+"Hours",0);case l:return V(Ot+"Minutes",1);case a:return V(Ot+"Seconds",2);case o:return V(Ot+"Milliseconds",3);default:return this.clone()}},w.endOf=function(_){return this.startOf(_,!1)},w.$set=function(_,S){var b,C=j.p(_),I="set"+(this.$u?"UTC":""),z=(b={},b[u]=I+"Date",b[p]=I+"Date",b[h]=I+"Month",b[f]=I+"FullYear",b[l]=I+"Hours",b[a]=I+"Minutes",b[o]=I+"Seconds",b[s]=I+"Milliseconds",b)[C],V=C===u?this.$D+(S-this.$W):S;if(C===h||C===f){var ne=this.clone().set(p,1);ne.$d[z](V),ne.init(),this.$d=ne.set(p,Math.min(this.$D,ne.daysInMonth())).$d}else z&&this.$d[z](V);return this.init(),this},w.set=function(_,S){return this.clone().$set(_,S)},w.get=function(_){return this[j.p(_)]()},w.add=function(_,S){var b,C=this;_=Number(_);var I=j.p(S),z=function(le){var Oe=q(C);return j.w(Oe.date(Oe.date()+Math.round(le*_)),C)};if(I===h)return this.set(h,this.$M+_);if(I===f)return this.set(f,this.$y+_);if(I===u)return z(1);if(I===c)return z(7);var V=(b={},b[a]=n,b[l]=i,b[o]=t,b)[I]||1,ne=this.$d.getTime()+_*V;return j.w(ne,this)},w.subtract=function(_,S){return this.add(-1*_,S)},w.format=function(_){var S=this,b=this.$locale();if(!this.isValid())return b.invalidDate||v;var C=_||"YYYY-MM-DDTHH:mm:ssZ",I=j.z(this),z=this.$H,V=this.$m,ne=this.$M,le=b.weekdays,Oe=b.months,Ot=b.meridiem,pt=function(ve,Qe,rr,Ar){return ve&&(ve[Qe]||ve(S,C))||rr[Qe].slice(0,Ar)},tr=function(ve){return j.s(z%12||12,ve,"0")},vt=Ot||function(ve,Qe,rr){var Ar=ve<12?"AM":"PM";return rr?Ar.toLowerCase():Ar};return C.replace(m,function(ve,Qe){return Qe||function(rr){switch(rr){case"YY":return String(S.$y).slice(-2);case"YYYY":return j.s(S.$y,4,"0");case"M":return ne+1;case"MM":return j.s(ne+1,2,"0");case"MMM":return pt(b.monthsShort,ne,Oe,3);case"MMMM":return pt(Oe,ne);case"D":return S.$D;case"DD":return j.s(S.$D,2,"0");case"d":return String(S.$W);case"dd":return pt(b.weekdaysMin,S.$W,le,2);case"ddd":return pt(b.weekdaysShort,S.$W,le,3);case"dddd":return le[S.$W];case"H":return String(z);case"HH":return j.s(z,2,"0");case"h":return tr(1);case"hh":return tr(2);case"a":return vt(z,V,!0);case"A":return vt(z,V,!1);case"m":return String(V);case"mm":return j.s(V,2,"0");case"s":return String(S.$s);case"ss":return j.s(S.$s,2,"0");case"SSS":return j.s(S.$ms,3,"0");case"Z":return I}return null}(ve)||I.replace(":","")})},w.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},w.diff=function(_,S,b){var C,I=this,z=j.p(S),V=q(_),ne=(V.utcOffset()-this.utcOffset())*n,le=this-V,Oe=function(){return j.m(I,V)};switch(z){case f:C=Oe()/12;break;case h:C=Oe();break;case d:C=Oe()/3;break;case c:C=(le-ne)/6048e5;break;case u:C=(le-ne)/864e5;break;case l:C=le/i;break;case a:C=le/n;break;case o:C=le/t;break;default:C=le}return b?C:j.a(C)},w.daysInMonth=function(){return this.endOf(h).$D},w.$locale=function(){return P[this.$L]},w.locale=function(_,S){if(!_)return this.$L;var b=this.clone(),C=N(_,S,!0);return C&&(b.$L=C),b},w.clone=function(){return j.w(this.$d,this)},w.toDate=function(){return new Date(this.valueOf())},w.toJSON=function(){return this.isValid()?this.toISOString():null},w.toISOString=function(){return this.$d.toISOString()},w.toString=function(){return this.$d.toUTCString()},k}(),X=oe.prototype;return q.prototype=X,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",u],["$M",h],["$y",f],["$D",p]].forEach(function(k){X[k[1]]=function(w){return this.$g(w,k[0],k[1])}}),q.extend=function(k,w){return k.$i||(k(w,oe,q),k.$i=!0),q},q.locale=N,q.isDayjs=L,q.unix=function(k){return q(1e3*k)},q.en=P[E],q.Ls=P,q.p={},q})}(Vr)),Vr.exports}var Wc=zc();const Gn=Ai(Wc);var Yr={exports:{}},Gc=Yr.exports,Os;function Jc(){return Os||(Os=1,function(r,e){(function(t,n){r.exports=n()})(Gc,function(){return function(t,n,i){t=t||{};var s=n.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(u,c,h,d){return s.fromToBase(u,c,h,d)}i.en.relativeTime=o,s.fromToBase=function(u,c,h,d,f){for(var p,v,g,m=h.$locale().relativeTime||o,T=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],$=T.length,A=0;A<$;A+=1){var E=T[A];E.d&&(p=d?i(u).diff(h,E.d,!0):h.diff(u,E.d,!0));var P=(t.rounding||Math.round)(Math.abs(p));if(g=p>0,P<=E.r||!E.r){P<=1&&A>0&&(E=T[A-1]);var O=m[E.l];f&&(P=f(""+P)),v=typeof O=="string"?O.replace("%d",P):O(P,c,E.l,g);break}}if(c)return v;var L=g?m.future:m.past;return typeof L=="function"?L(v):L.replace("%s",v)},s.to=function(u,c){return a(u,c,this,!0)},s.from=function(u,c){return a(u,c,this)};var l=function(u){return u.$u?i.utc():i()};s.toNow=function(u){return this.to(l(this),u)},s.fromNow=function(u){return this.from(l(this),u)}}})}(Yr)),Yr.exports}var Vc=Jc();const Yc=Ai(Vc);var Kc=He("<div><span>Closed:</span> <span> </span></div>"),Xc=He("<div><span>Updated:</span> <span> </span></div>"),Qc=He('<div class="mt-2 text-xs space-y-1"><div><span> </span></div> <!> <div><span>Created:</span> <span> </span></div> <div><span> </span></div></div>'),Zc=He('<div class="p-2 bg-white text-left rounded border shadow-sm cursor-default"><a target="_blank" class="hover:underline text-blue-600 block"> </a> <button class="text-sm mt-1 flex items-center gap-1 px-1 py-0.5 rounded hover:bg-gray-100 transition-colors"><span> </span> Details</button> <!></div>');function eh(r,e){_n(e,!1);let t=qr(e,"project",8);Gn.extend(Yc);let n=Gt(!1);const i=()=>{ce(n,!H(n))},s=v=>v?Gn(v).format("D MMM YYYY HH:mm"):"–",o=v=>v?Gn(v).fromNow():"";bi();var a=Zc(),l=ee(a),u=ee(l),c=ye(l,2),h=ee(c),d=ee(h),f=ye(c,2);{var p=v=>{var g=Qc(),m=ee(g),T=ee(m),$=ee(T),A=ye(m,2);{var E=X=>{var k=Kc(),w=ye(ee(k),2),_=ee(w);Bt((S,b)=>Le(_,`${S??""} (${b??""})`),[()=>s(t().closedAt),()=>o(t().closedAt)],ut),Ne(X,k)},P=X=>{var k=Xc(),w=ye(ee(k),2),_=ee(w);Bt((S,b)=>Le(_,`${S??""} (${b??""})`),[()=>s(t().updatedAt),()=>o(t().updatedAt)],ut),Ne(X,k)};on(A,X=>{t().closed?X(E):X(P,!1)})}var O=ye(A,2),L=ye(ee(O),2),N=ee(L),q=ye(O,2),j=ee(q),oe=ee(j);Bt((X,k)=>{Le($,t().public?"Public":"Private"),Le(N,`${X??""} (${k??""})`),Le(oe,t().id)},[()=>s(t().createdAt),()=>o(t().createdAt)],ut),sl(3,g,()=>qc),Ne(v,g)};on(f,v=>{H(n)&&v(p)})}Bt(()=>{Qa(l,"href",t().url),Le(u,t().title),Le(d,H(n)?"▼":"►")}),Zn("click",c,i),Ne(r,a),mn()}var th=He('<div class="bg-gray-100 p-3 rounded shadow flex flex-col"><h2 class="text-lg text-left font-semibold mb-2 capitalize"> <span class="text-gray-500 text-sm"> </span></h2> <div class="space-y-2 min-h-[50px]"></div></div>');function Jn(r,e){_n(e,!1);let t=qr(e,"title",8),n=qr(e,"projects",24,()=>[]),i=qr(e,"bindRef",8,null),s=Gt();Sa(()=>(eo(i()),H(s)),()=>{i()&&i().set(H(s))}),ka(),bi();var o=th(),a=ee(o),l=ee(a),u=ye(l),c=ee(u),h=ye(a,2);Ga(h,5,n,d=>d.id,(d,f)=>{eh(d,{get project(){return H(f)}})}),ol(h,d=>ce(s,d),()=>H(s)),Bt(()=>{Le(l,`${t()??""} `),Le(c,`(${n().length??""})`)}),Ne(r,o),mn()}var rh=He('<button class="px-4 py-2 rounded shadow">Log in with GitHub</button>'),nh=He("<p>Loading projects...</p>"),ih=He('<div class="grid grid-cols-1 sm:grid-cols-3 gap-4 items-stretch"><!> <!> <!></div>'),sh=He('<div class="mb-4 flex justify-between items-center"><p class="text-sm"> </p> <button class="text-sm text-red-600">Log out</button></div> <!>',1),oh=He('<main class="p-4 text-gray-800"><!></main>');function ah(r,e){_n(e,!1);let t=Gt(null),n=null,i=Gt([]),s={};const o=["todo","doing","done"];let a=$n(null),l=$n(null),u=$n(null);const c="https://api.github.com/graphql",h=async()=>{await Ur.auth.signInWithOAuth({provider:"github",options:{redirectTo:window.location.origin+window.location.pathname,scopes:"repo read:user read:project"}})},d=async()=>{await Ur.auth.signOut(),ce(t,null),n=null},f=async()=>{const L=await(await fetch(c,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({query:`{
      viewer {
        projectsV2(first: 50) {
          nodes {
            id
            title
            url
            closed
            createdAt
            updatedAt
            closedAt
            public
          }
        }
      }
    }`})})).json();console.log("GitHub response:",L),ce(i,L.data.viewer.projectsV2.nodes),p(),g()},p=()=>{const P=localStorage.getItem("projectStatuses");P&&(s=JSON.parse(P))},v=()=>{localStorage.setItem("projectStatuses",JSON.stringify(s))};function g(){const P={todo:xn(a),doing:xn(l),done:xn(u)};for(const O of o){const L=P[O];L&&D.create(L,{group:"columns",animation:150,swapThreshold:.5,ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",onEnd:N=>{var j,oe;const q=(oe=(j=N.item)==null?void 0:j.dataset)==null?void 0:oe.id;q&&(s[q]=O,v())}})}}ul(async()=>{const{data:P}=await Ur.auth.getSession();ce(t,P.session),Ur.auth.onAuthStateChange((O,L)=>{ce(t,L),n=L==null?void 0:L.provider_token,n&&f()}),H(t)&&(n=H(t).provider_token,await f())});const m=P=>H(i).filter(O=>(s[O.id]||"todo")===P);bi();var T=oh(),$=ee(T);{var A=P=>{var O=rh();Zn("click",O,h),Ne(P,O)},E=P=>{var O=sh(),L=ma(O),N=ee(L),q=ee(N),j=ye(N,2),oe=ye(L,2);{var X=w=>{var _=nh();Ne(w,_)},k=w=>{var _=ih(),S=ee(_);const b=ut(()=>m(o[0]));Jn(S,{get title(){return o[0]},get projects(){return H(b)},bindRef:a});var C=ye(S,2);const I=ut(()=>m(o[1]));Jn(C,{get title(){return o[1]},get projects(){return H(I)},bindRef:l});var z=ye(C,2);const V=ut(()=>m(o[2]));Jn(z,{get title(){return o[2]},get projects(){return H(V)},bindRef:u}),Ne(w,_)};on(oe,w=>{H(i).length===0?w(X):w(k,!1)})}Bt(()=>Le(q,`Signed in as ${H(t).user.email??""}`)),Zn("click",j,d),Ne(P,O)};on($,P=>{H(t)?P(E,!1):P(A)})}Ne(r,T),mn()}qa(ah,{target:document.getElementById("app")});export{Ai as g};
