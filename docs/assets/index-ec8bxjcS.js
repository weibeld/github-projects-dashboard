(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const Ii=!1;var vi=Array.isArray,No=Array.prototype.indexOf,gi=Array.from,Uo=Object.defineProperty,Ht=Object.getOwnPropertyDescriptor,$s=Object.getOwnPropertyDescriptors,Fo=Object.prototype,Bo=Array.prototype,_i=Object.getPrototypeOf,Ri=Object.isExtensible;function qo(r){return typeof r=="function"}const Ge=()=>{};function Ho(r){return r()}function Vn(r){for(var e=0;e<r.length;e++)r[e]()}const Le=2,Ds=4,fn=8,pn=16,Xe=32,Kt=64,Xr=128,Te=256,Qr=512,ve=1024,Be=2048,ft=4096,Ve=8192,vn=16384,Cs=32768,gn=65536,zo=1<<17,Wo=1<<19,js=1<<20,Yn=1<<21,kt=Symbol("$state"),Go=Symbol("legacy props");function Is(r){return r===this.v}function Rs(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function mi(r){return!Rs(r,this.v)}function Jo(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Vo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Yo(r){throw new Error("https://svelte.dev/e/effect_orphan")}function Ko(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Xo(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function Qo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Zo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ea(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Xt=!1,ta=!1;function ra(){Xt=!0}const na=1,ia=2,sa=16,oa=1,aa=2,la=4,ua=8,ca=16,ha=4,da=1,fa=2,ye=Symbol(),pa="http://www.w3.org/1999/xhtml";function va(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Y=null;function Li(r){Y=r}function _n(r,e=!1,t){var n=Y={p:Y,c:null,d:!1,e:null,m:!1,s:r,x:null,l:null};Xt&&!e&&(Y.l={s:null,u:null,r1:[],r2:br(!1)}),Ws(()=>{n.d=!0})}function mn(r){const e=Y;if(e!==null){const o=e.e;if(o!==null){var t=J,n=W;e.e=null;try{for(var i=0;i<o.length;i++){var s=o[i];qe(s.effect),De(s.reaction),bn(s.fn)}}finally{qe(t),De(n)}}Y=e.p,e.m=!0}return{}}function yn(){return!Xt||Y!==null&&Y.l===null}function Et(r){if(typeof r!="object"||r===null||kt in r)return r;const e=_i(r);if(e!==Fo&&e!==Bo)return r;var t=new Map,n=vi(r),i=et(0),s=W,o=a=>{var l=W;De(s);var u=a();return De(l),u};return n&&t.set("length",et(r.length)),new Proxy(r,{defineProperty(a,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Qo();var c=t.get(l);return c===void 0?(c=o(()=>et(u.value)),t.set(l,c)):ce(c,o(()=>Et(u.value))),!0},deleteProperty(a,l){var u=t.get(l);if(u===void 0)l in a&&(t.set(l,o(()=>et(ye))),Pn(i));else{if(n&&typeof l=="string"){var c=t.get("length"),h=Number(l);Number.isInteger(h)&&h<c.v&&ce(c,h)}ce(u,ye),Pn(i)}return!0},get(a,l,u){var f;if(l===kt)return r;var c=t.get(l),h=l in a;if(c===void 0&&(!h||(f=Ht(a,l))!=null&&f.writable)&&(c=o(()=>et(Et(h?a[l]:ye))),t.set(l,c)),c!==void 0){var d=z(c);return d===ye?void 0:d}return Reflect.get(a,l,u)},getOwnPropertyDescriptor(a,l){var u=Reflect.getOwnPropertyDescriptor(a,l);if(u&&"value"in u){var c=t.get(l);c&&(u.value=z(c))}else if(u===void 0){var h=t.get(l),d=h==null?void 0:h.v;if(h!==void 0&&d!==ye)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return u},has(a,l){var d;if(l===kt)return!0;var u=t.get(l),c=u!==void 0&&u.v!==ye||Reflect.has(a,l);if(u!==void 0||J!==null&&(!c||(d=Ht(a,l))!=null&&d.writable)){u===void 0&&(u=o(()=>et(c?Et(a[l]):ye)),t.set(l,u));var h=z(u);if(h===ye)return!1}return c},set(a,l,u,c){var O;var h=t.get(l),d=l in a;if(n&&l==="length")for(var f=u;f<h.v;f+=1){var p=t.get(f+"");p!==void 0?ce(p,ye):f in a&&(p=o(()=>et(ye)),t.set(f+"",p))}h===void 0?(!d||(O=Ht(a,l))!=null&&O.writable)&&(h=o(()=>et(void 0)),ce(h,o(()=>Et(u))),t.set(l,h)):(d=h.v!==ye,ce(h,o(()=>Et(u))));var v=Reflect.getOwnPropertyDescriptor(a,l);if(v!=null&&v.set&&v.set.call(c,u),!d){if(n&&typeof l=="string"){var g=t.get("length"),m=Number(l);Number.isInteger(m)&&m>=g.v&&ce(g,m+1)}Pn(i)}return!0},ownKeys(a){z(i);var l=Reflect.ownKeys(a).filter(h=>{var d=t.get(h);return d===void 0||d.v!==ye});for(var[u,c]of t)c.v!==ye&&!(u in a)&&l.push(u);return l},setPrototypeOf(){Zo()}})}function Pn(r,e=1){ce(r,r.v+e)}function yr(r){var e=Le|Be,t=W!==null&&(W.f&Le)!==0?W:null;return J===null||t!==null&&(t.f&Te)!==0?e|=Te:J.f|=js,{ctx:Y,deps:null,effects:null,equals:Is,f:e,fn:r,reactions:null,rv:0,v:null,wv:0,parent:t??J}}function Ne(r){const e=yr(r);return e.equals=mi,e}function Ls(r){var e=r.effects;if(e!==null){r.effects=null;for(var t=0;t<e.length;t+=1)ht(e[t])}}function ga(r){for(var e=r.parent;e!==null;){if((e.f&Le)===0)return e;e=e.parent}return null}function Ms(r){var e,t=J;qe(ga(r));try{Ls(r),e=eo(r)}finally{qe(t)}return e}function Ns(r){var e=Ms(r),t=(ut||(r.f&Te)!==0)&&r.deps!==null?ft:ve;Ce(r,t),r.equals(e)||(r.v=e,r.wv=Qs())}const wr=new Map;function br(r,e){var t={f:0,v:r,reactions:null,equals:Is,rv:0,wv:0};return t}function et(r,e){const t=br(r);return xa(t),t}function Gt(r,e=!1){var n;const t=br(r);return e||(t.equals=mi),Xt&&Y!==null&&Y.l!==null&&((n=Y.l).s??(n.s=[])).push(t),t}function ce(r,e,t=!1){W!==null&&!Ue&&yn()&&(W.f&(Le|pn))!==0&&!(pe!=null&&pe.includes(r))&&ea();let n=t?Et(e):e;return Us(r,n)}function Us(r,e){if(!r.equals(e)){var t=r.v;kr?wr.set(r,e):wr.set(r,t),r.v=e,(r.f&Le)!==0&&((r.f&Be)!==0&&Ms(r),Ce(r,(r.f&Te)===0?ve:ft)),r.wv=Qs(),Fs(r,Be),yn()&&J!==null&&(J.f&ve)!==0&&(J.f&(Xe|Kt))===0&&(Ae===null?$a([r]):Ae.push(r))}return e}function Fs(r,e){var t=r.reactions;if(t!==null)for(var n=yn(),i=t.length,s=0;s<i;s++){var o=t[s],a=o.f;(a&Be)===0&&(!n&&o===J||(Ce(o,e),(a&(ve|Te))!==0&&((a&Le)!==0?Fs(o,ft):Tn(o))))}}let _a=!1;var Mi,Bs,qs,Hs;function ma(){if(Mi===void 0){Mi=window,Bs=/Firefox/.test(navigator.userAgent);var r=Element.prototype,e=Node.prototype,t=Text.prototype;qs=Ht(e,"firstChild").get,Hs=Ht(e,"nextSibling").get,Ri(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),Ri(t)&&(t.__t=void 0)}}function yi(r=""){return document.createTextNode(r)}function Zr(r){return qs.call(r)}function wn(r){return Hs.call(r)}function Q(r,e){return Zr(r)}function ya(r,e){{var t=Zr(r);return t instanceof Comment&&t.data===""?wn(t):t}}function de(r,e=1,t=!1){let n=r;for(;e--;)n=wn(n);return n}function wa(r){r.textContent=""}function zs(r){J===null&&W===null&&Yo(),W!==null&&(W.f&Te)!==0&&J===null&&Vo(),kr&&Jo()}function ba(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function Qt(r,e,t,n=!0){var i=J,s={ctx:Y,deps:null,nodes_start:null,nodes_end:null,f:r|Be,first:null,fn:e,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(t)try{kn(s),s.f|=Cs}catch(l){throw ht(s),l}else e!==null&&Tn(s);var o=t&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(js|Xr))===0;if(!o&&n&&(i!==null&&ba(s,i),W!==null&&(W.f&Le)!==0)){var a=W;(a.effects??(a.effects=[])).push(s)}return s}function Ws(r){const e=Qt(fn,null,!1);return Ce(e,ve),e.teardown=r,e}function Kn(r){zs();var e=J!==null&&(J.f&Xe)!==0&&Y!==null&&!Y.m;if(e){var t=Y;(t.e??(t.e=[])).push({fn:r,effect:J,reaction:W})}else{var n=bn(r);return n}}function Ea(r){return zs(),En(r)}function Sa(r){const e=Qt(Kt,r,!0);return(t={})=>new Promise(n=>{t.outro?en(e,()=>{ht(e),n(void 0)}):(ht(e),n(void 0))})}function bn(r){return Qt(Ds,r,!1)}function ka(r,e){var t=Y,n={effect:null,ran:!1};t.l.r1.push(n),n.effect=En(()=>{r(),!n.ran&&(n.ran=!0,ce(t.l.r2,!0),dt(e))})}function Ta(){var r=Y;En(()=>{if(z(r.l.r2)){for(var e of r.l.r1){var t=e.effect;(t.f&ve)!==0&&Ce(t,ft),Zt(t)&&kn(t),e.ran=!1}r.l.r2.v=!1}})}function En(r){return Qt(fn,r,!0)}function nt(r,e=[],t=yr){const n=e.map(t);return wi(()=>r(...n.map(z)))}function wi(r,e=0){return Qt(fn|pn|e,r,!0)}function Er(r,e=!0){return Qt(fn|Xe,r,!0,e)}function Gs(r){var e=r.teardown;if(e!==null){const t=kr,n=W;Ni(!0),De(null);try{e.call(null)}finally{Ni(t),De(n)}}}function Js(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){var n=t.next;(t.f&Kt)!==0?t.parent=null:ht(t,e),t=n}}function Oa(r){for(var e=r.first;e!==null;){var t=e.next;(e.f&Xe)===0&&ht(e),e=t}}function ht(r,e=!0){var t=!1;(e||(r.f&Wo)!==0)&&r.nodes_start!==null&&(Aa(r.nodes_start,r.nodes_end),t=!0),Js(r,e&&!t),on(r,0),Ce(r,vn);var n=r.transitions;if(n!==null)for(const s of n)s.stop();Gs(r);var i=r.parent;i!==null&&i.first!==null&&Vs(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=null}function Aa(r,e){for(;r!==null;){var t=r===e?null:wn(r);r.remove(),r=t}}function Vs(r){var e=r.parent,t=r.prev,n=r.next;t!==null&&(t.next=n),n!==null&&(n.prev=t),e!==null&&(e.first===r&&(e.first=n),e.last===r&&(e.last=t))}function en(r,e){var t=[];bi(r,t,!0),Ys(t,()=>{ht(r),e&&e()})}function Ys(r,e){var t=r.length;if(t>0){var n=()=>--t||e();for(var i of r)i.out(n)}else e()}function bi(r,e,t){if((r.f&Ve)===0){if(r.f^=Ve,r.transitions!==null)for(const o of r.transitions)(o.is_global||t)&&e.push(o);for(var n=r.first;n!==null;){var i=n.next,s=(n.f&gn)!==0||(n.f&Xe)!==0;bi(n,e,s?t:!1),n=i}}}function tn(r){Ks(r,!0)}function Ks(r,e){if((r.f&Ve)!==0){r.f^=Ve,(r.f&ve)===0&&(r.f^=ve),Zt(r)&&(Ce(r,Be),Tn(r));for(var t=r.first;t!==null;){var n=t.next,i=(t.f&gn)!==0||(t.f&Xe)!==0;Ks(t,i?e:!1),t=n}if(r.transitions!==null)for(const s of r.transitions)(s.is_global||e)&&s.in()}}let rn=[];function Pa(){var r=rn;rn=[],Vn(r)}function Ei(r){rn.length===0&&queueMicrotask(Pa),rn.push(r)}let Br=!1,Xn=!1,nn=null,Tt=!1,kr=!1;function Ni(r){kr=r}let qr=[];let W=null,Ue=!1;function De(r){W=r}let J=null;function qe(r){J=r}let pe=null;function xa(r){W!==null&&W.f&Yn&&(pe===null?pe=[r]:pe.push(r))}let fe=null,Ee=0,Ae=null;function $a(r){Ae=r}let Xs=1,sn=0,ut=!1;function Qs(){return++Xs}function Zt(r){var h;var e=r.f;if((e&Be)!==0)return!0;if((e&ft)!==0){var t=r.deps,n=(e&Te)!==0;if(t!==null){var i,s,o=(e&Qr)!==0,a=n&&J!==null&&!ut,l=t.length;if(o||a){var u=r,c=u.parent;for(i=0;i<l;i++)s=t[i],(o||!((h=s==null?void 0:s.reactions)!=null&&h.includes(u)))&&(s.reactions??(s.reactions=[])).push(u);o&&(u.f^=Qr),a&&c!==null&&(c.f&Te)===0&&(u.f^=Te)}for(i=0;i<l;i++)if(s=t[i],Zt(s)&&Ns(s),s.wv>r.wv)return!0}(!n||J!==null&&!ut)&&Ce(r,ve)}return!1}function Da(r,e){for(var t=e;t!==null;){if((t.f&Xr)!==0)try{t.fn(r);return}catch{t.f^=Xr}t=t.parent}throw Br=!1,r}function Ui(r){return(r.f&vn)===0&&(r.parent===null||(r.parent.f&Xr)===0)}function Sn(r,e,t,n){if(Br){if(t===null&&(Br=!1),Ui(e))throw r;return}if(t!==null&&(Br=!0),Da(r,e),Ui(e))throw r}function Zs(r,e,t=!0){var n=r.reactions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];pe!=null&&pe.includes(r)||((s.f&Le)!==0?Zs(s,e,!1):e===s&&(t?Ce(s,Be):(s.f&ve)!==0&&Ce(s,ft),Tn(s)))}}function eo(r){var f;var e=fe,t=Ee,n=Ae,i=W,s=ut,o=pe,a=Y,l=Ue,u=r.f;fe=null,Ee=0,Ae=null,ut=(u&Te)!==0&&(Ue||!Tt||W===null),W=(u&(Xe|Kt))===0?r:null,pe=null,Li(r.ctx),Ue=!1,sn++,r.f|=Yn;try{var c=(0,r.fn)(),h=r.deps;if(fe!==null){var d;if(on(r,Ee),h!==null&&Ee>0)for(h.length=Ee+fe.length,d=0;d<fe.length;d++)h[Ee+d]=fe[d];else r.deps=h=fe;if(!ut)for(d=Ee;d<h.length;d++)((f=h[d]).reactions??(f.reactions=[])).push(r)}else h!==null&&Ee<h.length&&(on(r,Ee),h.length=Ee);if(yn()&&Ae!==null&&!Ue&&h!==null&&(r.f&(Le|ft|Be))===0)for(d=0;d<Ae.length;d++)Zs(Ae[d],r);return i!==null&&i!==r&&(sn++,Ae!==null&&(n===null?n=Ae:n.push(...Ae))),c}finally{fe=e,Ee=t,Ae=n,W=i,ut=s,pe=o,Li(a),Ue=l,r.f^=Yn}}function Ca(r,e){let t=e.reactions;if(t!==null){var n=No.call(t,r);if(n!==-1){var i=t.length-1;i===0?t=e.reactions=null:(t[n]=t[i],t.pop())}}t===null&&(e.f&Le)!==0&&(fe===null||!fe.includes(e))&&(Ce(e,ft),(e.f&(Te|Qr))===0&&(e.f^=Qr),Ls(e),on(e,0))}function on(r,e){var t=r.deps;if(t!==null)for(var n=e;n<t.length;n++)Ca(r,t[n])}function kn(r){var e=r.f;if((e&vn)===0){Ce(r,ve);var t=J,n=Y,i=Tt;J=r,Tt=!0;try{(e&pn)!==0?Oa(r):Js(r),Gs(r);var s=eo(r);r.teardown=typeof s=="function"?s:null,r.wv=Xs;var o=r.deps,a;Ii&&ta&&r.f&Be}catch(l){Sn(l,r,t,n||r.ctx)}finally{Tt=i,J=t}}}function ja(){try{Ko()}catch(r){if(nn!==null)Sn(r,nn,null);else throw r}}function Ia(){var r=Tt;try{var e=0;for(Tt=!0;qr.length>0;){e++>1e3&&ja();var t=qr,n=t.length;qr=[];for(var i=0;i<n;i++){var s=La(t[i]);Ra(s)}wr.clear()}}finally{Xn=!1,Tt=r,nn=null}}function Ra(r){var e=r.length;if(e!==0)for(var t=0;t<e;t++){var n=r[t];if((n.f&(vn|Ve))===0)try{Zt(n)&&(kn(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?Vs(n):n.fn=null))}catch(i){Sn(i,n,null,n.ctx)}}}function Tn(r){Xn||(Xn=!0,queueMicrotask(Ia));for(var e=nn=r;e.parent!==null;){e=e.parent;var t=e.f;if((t&(Kt|Xe))!==0){if((t&ve)===0)return;e.f^=ve}}qr.push(e)}function La(r){for(var e=[],t=r;t!==null;){var n=t.f,i=(n&(Xe|Kt))!==0,s=i&&(n&ve)!==0;if(!s&&(n&Ve)===0){if((n&Ds)!==0)e.push(t);else if(i)t.f^=ve;else{var o=W;try{W=t,Zt(t)&&kn(t)}catch(u){Sn(u,t,null,t.ctx)}finally{W=o}}var a=t.first;if(a!==null){t=a;continue}}var l=t.parent;for(t=t.next;t===null&&l!==null;)t=l.next,l=l.parent}return e}function z(r){var e=r.f,t=(e&Le)!==0;if(W!==null&&!Ue){if(!(pe!=null&&pe.includes(r))){var n=W.deps;r.rv<sn&&(r.rv=sn,fe===null&&n!==null&&n[Ee]===r?Ee++:fe===null?fe=[r]:(!ut||!fe.includes(r))&&fe.push(r))}}else if(t&&r.deps===null&&r.effects===null){var i=r,s=i.parent;s!==null&&(s.f&Te)===0&&(i.f^=Te)}return t&&(i=r,Zt(i)&&Ns(i)),kr&&wr.has(r)?wr.get(r):r.v}function dt(r){var e=Ue;try{return Ue=!0,r()}finally{Ue=e}}const Ma=-7169;function Ce(r,e){r.f=r.f&Ma|e}function to(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(kt in r)Qn(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&kt in t&&Qn(t)}}}function Qn(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let n in r)try{Qn(r[n],e)}catch{}const t=_i(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const n=$s(t);for(let i in n){const s=n[i].get;if(s)try{s.call(r)}catch{}}}}}const Na=["touchstart","touchmove"];function Ua(r){return Na.includes(r)}function ro(r){var e=W,t=J;De(null),qe(null);try{return r()}finally{De(e),qe(t)}}const Fa=new Set,Fi=new Set;function Ba(r,e,t,n={}){function i(s){if(n.capture||sr.call(e,s),!s.cancelBubble)return ro(()=>t==null?void 0:t.call(this,s))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?Ei(()=>{e.addEventListener(r,i,n)}):e.addEventListener(r,i,n),i}function Zn(r,e,t,n,i){var s={capture:n,passive:i},o=Ba(r,e,t,s);(e===document.body||e===window||e===document)&&Ws(()=>{e.removeEventListener(r,o,s)})}function sr(r){var O;var e=this,t=e.ownerDocument,n=r.type,i=((O=r.composedPath)==null?void 0:O.call(r))||[],s=i[0]||r.target,o=0,a=r.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(e===document||e===window)){r.__root=e;return}var u=i.indexOf(e);if(u===-1)return;l<=u&&(o=l)}if(s=i[o]||r.target,s!==e){Uo(r,"currentTarget",{configurable:!0,get(){return s||t}});var c=W,h=J;De(null),qe(null);try{for(var d,f=[];s!==null;){var p=s.assignedSlot||s.parentNode||s.host||null;try{var v=s["__"+n];if(v!=null&&(!s.disabled||r.target===s))if(vi(v)){var[g,...m]=v;g.apply(s,[r,...m])}else v.call(s,r)}catch(k){d?f.push(k):d=k}if(r.cancelBubble||p===e||p===null)break;s=p}if(d){for(let k of f)queueMicrotask(()=>{throw k});throw d}}finally{r.__root=e,delete r.currentTarget,De(c),qe(h)}}}function qa(r){var e=document.createElement("template");return e.innerHTML=r,e.content}function ei(r,e){var t=J;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function ze(r,e){var t=(e&da)!==0,n=(e&fa)!==0,i,s=!r.startsWith("<!>");return()=>{i===void 0&&(i=qa(s?r:"<!>"+r),t||(i=Zr(i)));var o=n||Bs?document.importNode(i,!0):i.cloneNode(!0);if(t){var a=Zr(o),l=o.lastChild;ei(a,l)}else ei(o,o);return o}}function Bi(r=""){{var e=yi(r+"");return ei(e,e),e}}function $e(r,e){r!==null&&r.before(e)}let ti=!0;function Pe(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t+"")}function Ha(r,e){return za(r,e)}const Pt=new Map;function za(r,{target:e,anchor:t,props:n={},events:i,context:s,intro:o=!0}){ma();var a=new Set,l=h=>{for(var d=0;d<h.length;d++){var f=h[d];if(!a.has(f)){a.add(f);var p=Ua(f);e.addEventListener(f,sr,{passive:p});var v=Pt.get(f);v===void 0?(document.addEventListener(f,sr,{passive:p}),Pt.set(f,1)):Pt.set(f,v+1)}}};l(gi(Fa)),Fi.add(l);var u=void 0,c=Sa(()=>{var h=t??e.appendChild(yi());return Er(()=>{if(s){_n({});var d=Y;d.c=s}i&&(n.$$events=i),ti=o,u=r(h,n)||{},ti=!0,s&&mn()}),()=>{var p;for(var d of a){e.removeEventListener(d,sr);var f=Pt.get(d);--f===0?(document.removeEventListener(d,sr),Pt.delete(d)):Pt.set(d,f)}Fi.delete(l),h!==t&&((p=h.parentNode)==null||p.removeChild(h))}});return Wa.set(u,c),u}let Wa=new WeakMap;function cr(r,e,[t,n]=[0,0]){var i=r,s=null,o=null,a=ye,l=t>0?gn:0,u=!1;const c=(d,f=!0)=>{u=!0,h(f,d)},h=(d,f)=>{a!==(a=d)&&(a?(s?tn(s):f&&(s=Er(()=>f(i))),o&&en(o,()=>{o=null})):(o?tn(o):f&&(o=Er(()=>f(i,[t+1,n]))),s&&en(s,()=>{s=null})))};wi(()=>{u=!1,e(c),u||h(null,null)},l)}function Ga(r,e,t,n){for(var i=[],s=e.length,o=0;o<s;o++)bi(e[o].e,i,!0);var a=s>0&&i.length===0&&t!==null;if(a){var l=t.parentNode;wa(l),l.append(t),n.clear(),it(r,e[0].prev,e[s-1].next)}Ys(i,()=>{for(var u=0;u<s;u++){var c=e[u];a||(n.delete(c.k),it(r,c.prev,c.next)),ht(c.e,!a)}})}function Ja(r,e,t,n,i,s=null){var o=r,a={flags:e,items:new Map,first:null};{var l=r;o=l.appendChild(yi())}var u=null,c=!1,h=Ne(()=>{var d=t();return vi(d)?d:d==null?[]:gi(d)});wi(()=>{var d=z(h),f=d.length;c&&f===0||(c=f===0,Va(d,a,o,i,e,n,t),s!==null&&(f===0?u?tn(u):u=Er(()=>s(o)):u!==null&&en(u,()=>{u=null})),z(h))})}function Va(r,e,t,n,i,s,o){var a=r.length,l=e.items,u=e.first,c=u,h,d=null,f=[],p=[],v,g,m,O;for(O=0;O<a;O+=1){if(v=r[O],g=s(v,O),m=l.get(g),m===void 0){var k=c?c.e.nodes_start:t;d=Ka(k,e,d,d===null?e.first:d.next,v,g,O,n,i,o),l.set(g,d),f=[],p=[],c=d.next;continue}if(Ya(m,v,O),(m.e.f&Ve)!==0&&tn(m.e),m!==c){if(h!==void 0&&h.has(m)){if(f.length<p.length){var T=p[0],E;d=T.prev;var x=f[0],P=f[f.length-1];for(E=0;E<f.length;E+=1)qi(f[E],T,t);for(E=0;E<p.length;E+=1)h.delete(p[E]);it(e,x.prev,P.next),it(e,d,x),it(e,P,T),c=T,d=P,O-=1,f=[],p=[]}else h.delete(m),qi(m,c,t),it(e,m.prev,m.next),it(e,m,d===null?e.first:d.next),it(e,d,m),d=m;continue}for(f=[],p=[];c!==null&&c.k!==g;)(c.e.f&Ve)===0&&(h??(h=new Set)).add(c),p.push(c),c=c.next;if(c===null)continue;m=c}f.push(m),d=m,c=m.next}if(c!==null||h!==void 0){for(var R=h===void 0?[]:gi(h);c!==null;)(c.e.f&Ve)===0&&R.push(c),c=c.next;var N=R.length;if(N>0){var H=a===0?t:null;Ga(e,R,H,l)}}J.first=e.first&&e.first.e,J.last=d&&d.e}function Ya(r,e,t,n){Us(r.v,e),r.i=t}function Ka(r,e,t,n,i,s,o,a,l,u){var c=(l&na)!==0,h=(l&sa)===0,d=c?h?Gt(i):br(i):i,f=(l&ia)===0?o:br(o),p={i:f,v:d,k:s,a:null,e:null,prev:t,next:n};try{return p.e=Er(()=>a(r,d,f,u),_a),p.e.prev=t&&t.e,p.e.next=n&&n.e,t===null?e.first=p:(t.next=p,t.e.next=p.e),n!==null&&(n.prev=p,n.e.prev=p.e),p}finally{}}function qi(r,e,t){for(var n=r.next?r.next.e.nodes_start:t,i=e?e.e.nodes_start:t,s=r.e.nodes_start;s!==n;){var o=wn(s);i.before(s),s=o}}function it(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const Xa=Symbol("is custom element"),Qa=Symbol("is html");function Za(r,e,t,n){var i=el(r);i[e]!==(i[e]=t)&&(t==null?r.removeAttribute(e):typeof t!="string"&&tl(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function el(r){return r.__attributes??(r.__attributes={[Xa]:r.nodeName.includes("-"),[Qa]:r.namespaceURI===pa})}var Hi=new Map;function tl(r){var e=Hi.get(r.nodeName);if(e)return e;Hi.set(r.nodeName,e=[]);for(var t,n=r,i=Element.prototype;i!==n;){t=$s(n);for(var s in t)t[s].set&&e.push(s);n=_i(n)}return e}const rl=()=>performance.now(),Je={tick:r=>requestAnimationFrame(r),now:()=>rl(),tasks:new Set};function no(){const r=Je.now();Je.tasks.forEach(e=>{e.c(r)||(Je.tasks.delete(e),e.f())}),Je.tasks.size!==0&&Je.tick(no)}function nl(r){let e;return Je.tasks.size===0&&Je.tick(no),{promise:new Promise(t=>{Je.tasks.add(e={c:r,f:t})}),abort(){Je.tasks.delete(e)}}}function xr(r,e){ro(()=>{r.dispatchEvent(new CustomEvent(e))})}function il(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const e=r.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function zi(r){const e={},t=r.split(";");for(const n of t){const[i,s]=n.split(":");if(!i||s===void 0)break;const o=il(i.trim());e[o]=s.trim()}return e}const sl=r=>r;function ol(r,e,t,n){var i=(r&ha)!==0,s="both",o,a=e.inert,l=e.style.overflow,u,c;function h(){var g=W,m=J;De(null),qe(null);try{return o??(o=t()(e,(n==null?void 0:n())??{},{direction:s}))}finally{De(g),qe(m)}}var d={is_global:i,in(){e.inert=a,xr(e,"introstart"),u=ri(e,h(),c,1,()=>{xr(e,"introend"),u==null||u.abort(),u=o=void 0,e.style.overflow=l})},out(g){e.inert=!0,xr(e,"outrostart"),c=ri(e,h(),u,0,()=>{xr(e,"outroend"),g==null||g()})},stop:()=>{u==null||u.abort(),c==null||c.abort()}},f=J;if((f.transitions??(f.transitions=[])).push(d),ti){var p=i;if(!p){for(var v=f.parent;v&&(v.f&gn)!==0;)for(;(v=v.parent)&&(v.f&pn)===0;);p=!v||(v.f&Cs)!==0}p&&bn(()=>{dt(()=>d.in())})}}function ri(r,e,t,n,i){var s=n===1;if(qo(e)){var o,a=!1;return Ei(()=>{if(!a){var g=e({direction:s?"in":"out"});o=ri(r,g,t,n,i)}}),{abort:()=>{a=!0,o==null||o.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(t==null||t.deactivate(),!(e!=null&&e.duration))return i(),{abort:Ge,deactivate:Ge,reset:Ge,t:()=>n};const{delay:l=0,css:u,tick:c,easing:h=sl}=e;var d=[];if(s&&t===void 0&&(c&&c(0,1),u)){var f=zi(u(0,1));d.push(f,f)}var p=()=>1-n,v=r.animate(d,{duration:l});return v.onfinish=()=>{var g=(t==null?void 0:t.t())??1-n;t==null||t.abort();var m=n-g,O=e.duration*Math.abs(m),k=[];if(O>0){var T=!1;if(u)for(var E=Math.ceil(O/16.666666666666668),x=0;x<=E;x+=1){var P=g+m*h(x/E),R=zi(u(P,1-P));k.push(R),T||(T=R.overflow==="hidden")}T&&(r.style.overflow="hidden"),p=()=>{var N=v.currentTime;return g+m*h(N/O)},c&&nl(()=>{if(v.playState!=="running")return!1;var N=p();return c(N,1-N),!0})}v=r.animate(k,{duration:O,fill:"forwards"}),v.onfinish=()=>{p=()=>n,c==null||c(n,1-n),i()}},{abort:()=>{v&&(v.cancel(),v.effect=null,v.onfinish=Ge)},deactivate:()=>{i=Ge},reset:()=>{n===0&&(c==null||c(1,0))},t:()=>p()}}function Wi(r,e){return r===e||(r==null?void 0:r[kt])===e}function al(r={},e,t,n){return bn(()=>{var i,s;return En(()=>{i=s,s=[],dt(()=>{r!==t(...s)&&(e(r,...s),i&&Wi(t(...i),r)&&e(null,...i))})}),()=>{Ei(()=>{s&&Wi(t(...s),r)&&e(null,...s)})}}),r}function Si(r=!1){const e=Y,t=e.l.u;if(!t)return;let n=()=>to(e.s);if(r){let i=0,s={};const o=yr(()=>{let a=!1;const l=e.s;for(const u in l)l[u]!==s[u]&&(s[u]=l[u],a=!0);return a&&i++,i});n=()=>z(o)}t.b.length&&Ea(()=>{Gi(e,n),Vn(t.b)}),Kn(()=>{const i=dt(()=>t.m.map(Ho));return()=>{for(const s of i)typeof s=="function"&&s()}}),t.a.length&&Kn(()=>{Gi(e,n),Vn(t.a)})}function Gi(r,e){if(r.l.s)for(const t of r.l.s)z(t);e()}function ll(r,e,t){if(r==null)return e(void 0),Ge;const n=dt(()=>r.subscribe(e,t));return n.unsubscribe?()=>n.unsubscribe():n}const xt=[];function xn(r,e=Ge){let t=null;const n=new Set;function i(a){if(Rs(r,a)&&(r=a,t)){const l=!xt.length;for(const u of n)u[1](),xt.push(u,r);if(l){for(let u=0;u<xt.length;u+=2)xt[u][0](xt[u+1]);xt.length=0}}}function s(a){i(a(r))}function o(a,l=Ge){const u=[a,l];return n.add(u),n.size===1&&(t=e(i,s)||Ge),a(r),()=>{n.delete(u),n.size===0&&t&&(t(),t=null)}}return{set:i,update:s,subscribe:o}}function $n(r){let e;return ll(r,t=>e=t)(),e}let $r=!1;function ul(r){var e=$r;try{return $r=!1,[r(),$r]}finally{$r=e}}function Ji(r){var e;return((e=r.ctx)==null?void 0:e.d)??!1}function Hr(r,e,t,n){var x;var i=(t&oa)!==0,s=!Xt||(t&aa)!==0,o=(t&ua)!==0,a=(t&ca)!==0,l=!1,u;o?[u,l]=ul(()=>r[e]):u=r[e];var c=kt in r||Go in r,h=o&&(((x=Ht(r,e))==null?void 0:x.set)??(c&&e in r&&(P=>r[e]=P)))||void 0,d=n,f=!0,p=!1,v=()=>(p=!0,f&&(f=!1,a?d=dt(n):d=n),d);u===void 0&&n!==void 0&&(h&&s&&Xo(),u=v(),h&&h(u));var g;if(s)g=()=>{var P=r[e];return P===void 0?v():(f=!0,p=!1,P)};else{var m=(i?yr:Ne)(()=>r[e]);m.f|=zo,g=()=>{var P=z(m);return P!==void 0&&(d=void 0),P===void 0?d:P}}if((t&la)===0)return g;if(h){var O=r.$$legacy;return function(P,R){return arguments.length>0?((!s||!R||O||l)&&h(R?g():P),P):g()}}var k=!1,T=Gt(u),E=yr(()=>{var P=g(),R=z(T);return k?(k=!1,R):T.v=P});return o&&z(E),i||(E.equals=mi),function(P,R){if(arguments.length>0){const N=R?z(E):s&&o?Et(P):P;if(!E.equals(N)){if(k=!0,ce(T,N),p&&d!==void 0&&(d=N),Ji(E))return P;dt(()=>z(E))}return P}return Ji(E)?E.v:z(E)}}function cl(r){Y===null&&va(),Xt&&Y.l!==null?hl(Y).m.push(r):Kn(()=>{const e=dt(r);if(typeof e=="function")return e})}function hl(r){var e=r.l;return e.u??(e.u={a:[],b:[],m:[]})}const dl="5";var xs;typeof window<"u"&&((xs=window.__svelte??(window.__svelte={})).v??(xs.v=new Set)).add(dl);ra();/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Vi(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function He(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vi(Object(t),!0).forEach(function(n){fl(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Vi(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function zr(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zr=function(e){return typeof e}:zr=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zr(r)}function fl(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ke(){return Ke=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ke.apply(this,arguments)}function pl(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function vl(r,e){if(r==null)return{};var t=pl(r,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}var gl="1.15.6";function Ye(r){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(r)}var Qe=Ye(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Tr=Ye(/Edge/i),Yi=Ye(/firefox/i),hr=Ye(/safari/i)&&!Ye(/chrome/i)&&!Ye(/android/i),ki=Ye(/iP(ad|od|hone)/i),io=Ye(/chrome/i)&&Ye(/android/i),so={capture:!1,passive:!1};function q(r,e,t){r.addEventListener(e,t,!Qe&&so)}function U(r,e,t){r.removeEventListener(e,t,!Qe&&so)}function an(r,e){if(e){if(e[0]===">"&&(e=e.substring(1)),r)try{if(r.matches)return r.matches(e);if(r.msMatchesSelector)return r.msMatchesSelector(e);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(e)}catch{return!1}return!1}}function oo(r){return r.host&&r!==document&&r.host.nodeType?r.host:r.parentNode}function Ie(r,e,t,n){if(r){t=t||document;do{if(e!=null&&(e[0]===">"?r.parentNode===t&&an(r,e):an(r,e))||n&&r===t)return r;if(r===t)break}while(r=oo(r))}return null}var Ki=/\s+/g;function be(r,e,t){if(r&&e)if(r.classList)r.classList[t?"add":"remove"](e);else{var n=(" "+r.className+" ").replace(Ki," ").replace(" "+e+" "," ");r.className=(n+(t?" "+e:"")).replace(Ki," ")}}function C(r,e,t){var n=r&&r.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(r,""):r.currentStyle&&(t=r.currentStyle),e===void 0?t:t[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=t+(typeof t=="string"?"":"px")}}function zt(r,e){var t="";if(typeof r=="string")t=r;else do{var n=C(r,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!e&&(r=r.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function ao(r,e,t){if(r){var n=r.getElementsByTagName(e),i=0,s=n.length;if(t)for(;i<s;i++)t(n[i],i);return n}return[]}function Fe(){var r=document.scrollingElement;return r||document.documentElement}function te(r,e,t,n,i){if(!(!r.getBoundingClientRect&&r!==window)){var s,o,a,l,u,c,h;if(r!==window&&r.parentNode&&r!==Fe()?(s=r.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,u=s.right,c=s.height,h=s.width):(o=0,a=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,h=window.innerWidth),(e||t)&&r!==window&&(i=i||r.parentNode,!Qe))do if(i&&i.getBoundingClientRect&&(C(i,"transform")!=="none"||t&&C(i,"position")!=="static")){var d=i.getBoundingClientRect();o-=d.top+parseInt(C(i,"border-top-width")),a-=d.left+parseInt(C(i,"border-left-width")),l=o+s.height,u=a+s.width;break}while(i=i.parentNode);if(n&&r!==window){var f=zt(i||r),p=f&&f.a,v=f&&f.d;f&&(o/=v,a/=p,h/=p,c/=v,l=o+c,u=a+h)}return{top:o,left:a,bottom:l,right:u,width:h,height:c}}}function Xi(r,e,t){for(var n=ct(r,!0),i=te(r)[e];n;){var s=te(n)[t],o=void 0;if(o=i>=s,!o)return n;if(n===Fe())break;n=ct(n,!1)}return!1}function Jt(r,e,t,n){for(var i=0,s=0,o=r.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==j.ghost&&(n||o[s]!==j.dragged)&&Ie(o[s],t.draggable,r,!1)){if(i===e)return o[s];i++}s++}return null}function Ti(r,e){for(var t=r.lastElementChild;t&&(t===j.ghost||C(t,"display")==="none"||e&&!an(t,e));)t=t.previousElementSibling;return t||null}function xe(r,e){var t=0;if(!r||!r.parentNode)return-1;for(;r=r.previousElementSibling;)r.nodeName.toUpperCase()!=="TEMPLATE"&&r!==j.clone&&(!e||an(r,e))&&t++;return t}function Qi(r){var e=0,t=0,n=Fe();if(r)do{var i=zt(r),s=i.a,o=i.d;e+=r.scrollLeft*s,t+=r.scrollTop*o}while(r!==n&&(r=r.parentNode));return[e,t]}function _l(r,e){for(var t in r)if(r.hasOwnProperty(t)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===r[t][n])return Number(t)}return-1}function ct(r,e){if(!r||!r.getBoundingClientRect)return Fe();var t=r,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=C(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Fe();if(n||e)return t;n=!0}}while(t=t.parentNode);return Fe()}function ml(r,e){if(r&&e)for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}function Dn(r,e){return Math.round(r.top)===Math.round(e.top)&&Math.round(r.left)===Math.round(e.left)&&Math.round(r.height)===Math.round(e.height)&&Math.round(r.width)===Math.round(e.width)}var dr;function lo(r,e){return function(){if(!dr){var t=arguments,n=this;t.length===1?r.call(n,t[0]):r.apply(n,t),dr=setTimeout(function(){dr=void 0},e)}}}function yl(){clearTimeout(dr),dr=void 0}function uo(r,e,t){r.scrollLeft+=e,r.scrollTop+=t}function co(r){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(r).cloneNode(!0):t?t(r).clone(!0)[0]:r.cloneNode(!0)}function ho(r,e,t){var n={};return Array.from(r.children).forEach(function(i){var s,o,a,l;if(!(!Ie(i,e.draggable,r,!1)||i.animated||i===t)){var u=te(i);n.left=Math.min((s=n.left)!==null&&s!==void 0?s:1/0,u.left),n.top=Math.min((o=n.top)!==null&&o!==void 0?o:1/0,u.top),n.right=Math.max((a=n.right)!==null&&a!==void 0?a:-1/0,u.right),n.bottom=Math.max((l=n.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var we="Sortable"+new Date().getTime();function wl(){var r=[],e;return{captureAnimationState:function(){if(r=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(i){if(!(C(i,"display")==="none"||i===j.ghost)){r.push({target:i,rect:te(i)});var s=He({},r[r.length-1].rect);if(i.thisAnimationDuration){var o=zt(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(n){r.push(n)},removeAnimationState:function(n){r.splice(_l(r,{target:n}),1)},animateAll:function(n){var i=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var s=!1,o=0;r.forEach(function(a){var l=0,u=a.target,c=u.fromRect,h=te(u),d=u.prevFromRect,f=u.prevToRect,p=a.rect,v=zt(u,!0);v&&(h.top-=v.f,h.left-=v.e),u.toRect=h,u.thisAnimationDuration&&Dn(d,h)&&!Dn(c,h)&&(p.top-h.top)/(p.left-h.left)===(c.top-h.top)/(c.left-h.left)&&(l=El(p,d,f,i.options)),Dn(h,c)||(u.prevFromRect=c,u.prevToRect=h,l||(l=i.options.animation),i.animate(u,p,h,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof n=="function"&&n()},o):typeof n=="function"&&n(),r=[]},animate:function(n,i,s,o){if(o){C(n,"transition",""),C(n,"transform","");var a=zt(this.el),l=a&&a.a,u=a&&a.d,c=(i.left-s.left)/(l||1),h=(i.top-s.top)/(u||1);n.animatingX=!!c,n.animatingY=!!h,C(n,"transform","translate3d("+c+"px,"+h+"px,0)"),this.forRepaintDummy=bl(n),C(n,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),C(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){C(n,"transition",""),C(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},o)}}}}function bl(r){return r.offsetWidth}function El(r,e,t,n){return Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*n.animation}var $t=[],Cn={initializeByDefault:!0},Or={mount:function(e){for(var t in Cn)Cn.hasOwnProperty(t)&&!(t in e)&&(e[t]=Cn[t]);$t.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),$t.push(e)},pluginEvent:function(e,t,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var s=e+"Global";$t.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][s]&&t[o.pluginName][s](He({sortable:t},n)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](He({sortable:t},n)))})},initializePlugins:function(e,t,n,i){$t.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var u=new a(e,t,e.options);u.sortable=e,u.options=e.options,e[l]=u,Ke(n,u.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,t){var n={};return $t.forEach(function(i){typeof i.eventProperties=="function"&&Ke(n,i.eventProperties.call(t[i.pluginName],e))}),n},modifyOption:function(e,t,n){var i;return $t.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(i=s.optionListeners[t].call(e[s.pluginName],n))}),i}};function Sl(r){var e=r.sortable,t=r.rootEl,n=r.name,i=r.targetEl,s=r.cloneEl,o=r.toEl,a=r.fromEl,l=r.oldIndex,u=r.newIndex,c=r.oldDraggableIndex,h=r.newDraggableIndex,d=r.originalEvent,f=r.putSortable,p=r.extraEventProperties;if(e=e||t&&t[we],!!e){var v,g=e.options,m="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Qe&&!Tr?v=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(n,!0,!0)),v.to=o||t,v.from=a||t,v.item=i||t,v.clone=s,v.oldIndex=l,v.newIndex=u,v.oldDraggableIndex=c,v.newDraggableIndex=h,v.originalEvent=d,v.pullMode=f?f.lastPutMode:void 0;var O=He(He({},p),Or.getEventProperties(n,e));for(var k in O)v[k]=O[k];t&&t.dispatchEvent(v),g[m]&&g[m].call(e,v)}}var kl=["evt"],_e=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.evt,s=vl(n,kl);Or.pluginEvent.bind(j)(e,t,He({dragEl:w,parentEl:Z,ghostEl:L,rootEl:K,nextEl:wt,lastDownEl:Wr,cloneEl:X,cloneHidden:at,dragStarted:or,putSortable:oe,activeSortable:j.active,originalEvent:i,oldIndex:qt,oldDraggableIndex:fr,newIndex:Se,newDraggableIndex:st,hideGhostForTarget:go,unhideGhostForTarget:_o,cloneNowHidden:function(){at=!0},cloneNowShown:function(){at=!1},dispatchSortableEvent:function(a){he({sortable:t,name:a,originalEvent:i})}},s))};function he(r){Sl(He({putSortable:oe,cloneEl:X,targetEl:w,rootEl:K,oldIndex:qt,oldDraggableIndex:fr,newIndex:Se,newDraggableIndex:st},r))}var w,Z,L,K,wt,Wr,X,at,qt,Se,fr,st,Dr,oe,Ft=!1,ln=!1,un=[],_t,je,jn,In,Zi,es,or,Dt,pr,vr=!1,Cr=!1,Gr,ue,Rn=[],ni=!1,cn=[],On=typeof document<"u",jr=ki,ts=Tr||Qe?"cssFloat":"float",Tl=On&&!io&&!ki&&"draggable"in document.createElement("div"),fo=function(){if(On){if(Qe)return!1;var r=document.createElement("x");return r.style.cssText="pointer-events:auto",r.style.pointerEvents==="auto"}}(),po=function(e,t){var n=C(e),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),s=Jt(e,0,t),o=Jt(e,1,t),a=s&&C(s),l=o&&C(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+te(s).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+te(o).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=i&&n[ts]==="none"||o&&n[ts]==="none"&&u+c>i)?"vertical":"horizontal"},Ol=function(e,t,n){var i=n?e.left:e.top,s=n?e.right:e.bottom,o=n?e.width:e.height,a=n?t.left:t.top,l=n?t.right:t.bottom,u=n?t.width:t.height;return i===a||s===l||i+o/2===a+u/2},Al=function(e,t){var n;return un.some(function(i){var s=i[we].options.emptyInsertThreshold;if(!(!s||Ti(i))){var o=te(i),a=e>=o.left-s&&e<=o.right+s,l=t>=o.top-s&&t<=o.bottom+s;if(a&&l)return n=i}}),n},vo=function(e){function t(s,o){return function(a,l,u,c){var h=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||h))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(a,l,u,c),o)(a,l,u,c);var d=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===d||s.join&&s.indexOf(d)>-1}}var n={},i=e.group;(!i||zr(i)!="object")&&(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},go=function(){!fo&&L&&C(L,"display","none")},_o=function(){!fo&&L&&C(L,"display","")};On&&!io&&document.addEventListener("click",function(r){if(ln)return r.preventDefault(),r.stopPropagation&&r.stopPropagation(),r.stopImmediatePropagation&&r.stopImmediatePropagation(),ln=!1,!1},!0);var mt=function(e){if(w){e=e.touches?e.touches[0]:e;var t=Al(e.clientX,e.clientY);if(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[we]._onDragOver(n)}}},Pl=function(e){w&&w.parentNode[we]._isOutsideThisEl(e.target)};function j(r,e){if(!(r&&r.nodeType&&r.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(r));this.el=r,this.options=e=Ke({},e),r[we]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(r.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return po(r,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:j.supportPointer!==!1&&"PointerEvent"in window&&(!hr||ki),emptyInsertThreshold:5};Or.initializePlugins(this,r,t);for(var n in t)!(n in e)&&(e[n]=t[n]);vo(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:Tl,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?q(r,"pointerdown",this._onTapStart):(q(r,"mousedown",this._onTapStart),q(r,"touchstart",this._onTapStart)),this.nativeDraggable&&(q(r,"dragover",this),q(r,"dragenter",this)),un.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ke(this,wl())}j.prototype={constructor:j,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Dt=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,w):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=i.filter;if(Ll(n),!w&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&hr&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Ie(l,i.draggable,n,!1),!(l&&l.animated)&&Wr!==l)){if(qt=xe(l),fr=xe(l,i.draggable),typeof c=="function"){if(c.call(this,e,l,this)){he({sortable:t,rootEl:u,name:"filter",targetEl:l,toEl:n,fromEl:n}),_e("filter",t,{evt:e}),s&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(h){if(h=Ie(u,h.trim(),n,!1),h)return he({sortable:t,rootEl:h,name:"filter",targetEl:l,fromEl:n,toEl:n}),_e("filter",t,{evt:e}),!0}),c)){s&&e.preventDefault();return}i.handle&&!Ie(u,i.handle,n,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,n){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(n&&!w&&n.parentNode===s){var u=te(n);if(K=s,w=n,Z=w.parentNode,wt=w.nextSibling,Wr=n,Dr=o.group,j.dragged=w,_t={target:w,clientX:(t||e).clientX,clientY:(t||e).clientY},Zi=_t.clientX-u.left,es=_t.clientY-u.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,w.style["will-change"]="all",l=function(){if(_e("delayEnded",i,{evt:e}),j.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Yi&&i.nativeDraggable&&(w.draggable=!0),i._triggerDragStart(e,t),he({sortable:i,name:"choose",originalEvent:e}),be(w,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){ao(w,c.trim(),Ln)}),q(a,"dragover",mt),q(a,"mousemove",mt),q(a,"touchmove",mt),o.supportPointer?(q(a,"pointerup",i._onDrop),!this.nativeDraggable&&q(a,"pointercancel",i._onDrop)):(q(a,"mouseup",i._onDrop),q(a,"touchend",i._onDrop),q(a,"touchcancel",i._onDrop)),Yi&&this.nativeDraggable&&(this.options.touchStartThreshold=4,w.draggable=!0),_e("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Tr||Qe))){if(j.eventCanceled){this._onDrop();return}o.supportPointer?(q(a,"pointerup",i._disableDelayedDrag),q(a,"pointercancel",i._disableDelayedDrag)):(q(a,"mouseup",i._disableDelayedDrag),q(a,"touchend",i._disableDelayedDrag),q(a,"touchcancel",i._disableDelayedDrag)),q(a,"mousemove",i._delayedDragTouchMoveHandler),q(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&q(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){w&&Ln(w),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;U(e,"mouseup",this._disableDelayedDrag),U(e,"touchend",this._disableDelayedDrag),U(e,"touchcancel",this._disableDelayedDrag),U(e,"pointerup",this._disableDelayedDrag),U(e,"pointercancel",this._disableDelayedDrag),U(e,"mousemove",this._delayedDragTouchMoveHandler),U(e,"touchmove",this._delayedDragTouchMoveHandler),U(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?q(document,"pointermove",this._onTouchMove):t?q(document,"touchmove",this._onTouchMove):q(document,"mousemove",this._onTouchMove):(q(w,"dragend",this),q(K,"dragstart",this._onDragStart));try{document.selection?Jr(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Ft=!1,K&&w){_e("dragStarted",this,{evt:t}),this.nativeDraggable&&q(document,"dragover",Pl);var n=this.options;!e&&be(w,n.dragClass,!1),be(w,n.ghostClass,!0),j.active=this,e&&this._appendGhost(),he({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(je){this._lastX=je.clientX,this._lastY=je.clientY,go();for(var e=document.elementFromPoint(je.clientX,je.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(je.clientX,je.clientY),e!==t);)t=e;if(w.parentNode[we]._isOutsideThisEl(e),t)do{if(t[we]){var n=void 0;if(n=t[we]._onDragOver({clientX:je.clientX,clientY:je.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=oo(t));_o()}},_onTouchMove:function(e){if(_t){var t=this.options,n=t.fallbackTolerance,i=t.fallbackOffset,s=e.touches?e.touches[0]:e,o=L&&zt(L,!0),a=L&&o&&o.a,l=L&&o&&o.d,u=jr&&ue&&Qi(ue),c=(s.clientX-_t.clientX+i.x)/(a||1)+(u?u[0]-Rn[0]:0)/(a||1),h=(s.clientY-_t.clientY+i.y)/(l||1)+(u?u[1]-Rn[1]:0)/(l||1);if(!j.active&&!Ft){if(n&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(L){o?(o.e+=c-(jn||0),o.f+=h-(In||0)):o={a:1,b:0,c:0,d:1,e:c,f:h};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");C(L,"webkitTransform",d),C(L,"mozTransform",d),C(L,"msTransform",d),C(L,"transform",d),jn=c,In=h,je=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!L){var e=this.options.fallbackOnBody?document.body:K,t=te(w,!0,jr,!0,e),n=this.options;if(jr){for(ue=e;C(ue,"position")==="static"&&C(ue,"transform")==="none"&&ue!==document;)ue=ue.parentNode;ue!==document.body&&ue!==document.documentElement?(ue===document&&(ue=Fe()),t.top+=ue.scrollTop,t.left+=ue.scrollLeft):ue=Fe(),Rn=Qi(ue)}L=w.cloneNode(!0),be(L,n.ghostClass,!1),be(L,n.fallbackClass,!0),be(L,n.dragClass,!0),C(L,"transition",""),C(L,"transform",""),C(L,"box-sizing","border-box"),C(L,"margin",0),C(L,"top",t.top),C(L,"left",t.left),C(L,"width",t.width),C(L,"height",t.height),C(L,"opacity","0.8"),C(L,"position",jr?"absolute":"fixed"),C(L,"zIndex","100000"),C(L,"pointerEvents","none"),j.ghost=L,e.appendChild(L),C(L,"transform-origin",Zi/parseInt(L.style.width)*100+"% "+es/parseInt(L.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,s=n.options;if(_e("dragStart",this,{evt:e}),j.eventCanceled){this._onDrop();return}_e("setupClone",this),j.eventCanceled||(X=co(w),X.removeAttribute("id"),X.draggable=!1,X.style["will-change"]="",this._hideClone(),be(X,this.options.chosenClass,!1),j.clone=X),n.cloneId=Jr(function(){_e("clone",n),!j.eventCanceled&&(n.options.removeCloneOnHide||K.insertBefore(X,w),n._hideClone(),he({sortable:n,name:"clone"}))}),!t&&be(w,s.dragClass,!0),t?(ln=!0,n._loopId=setInterval(n._emulateDragOver,50)):(U(document,"mouseup",n._onDrop),U(document,"touchend",n._onDrop),U(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(n,i,w)),q(document,"drop",n),C(w,"transform","translateZ(0)")),Ft=!0,n._dragStartId=Jr(n._dragStarted.bind(n,t,e)),q(document,"selectstart",n),or=!0,window.getSelection().removeAllRanges(),hr&&C(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,i,s,o,a=this.options,l=a.group,u=j.active,c=Dr===l,h=a.sort,d=oe||u,f,p=this,v=!1;if(ni)return;function g(y,$){_e(y,p,He({evt:e,isOwner:c,axis:f?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:h,fromSortable:d,target:n,completed:O,onMove:function(B,G){return Ir(K,t,w,i,B,te(B),e,G)},changed:k},$))}function m(){g("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function O(y){return g("dragOverCompleted",{insertion:y}),y&&(c?u._hideClone():u._showClone(p),p!==d&&(be(w,oe?oe.options.ghostClass:u.options.ghostClass,!1),be(w,a.ghostClass,!0)),oe!==p&&p!==j.active?oe=p:p===j.active&&oe&&(oe=null),d===p&&(p._ignoreWhileAnimating=n),p.animateAll(function(){g("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(n===w&&!w.animated||n===t&&!n.animated)&&(Dt=null),!a.dragoverBubble&&!e.rootEl&&n!==document&&(w.parentNode[we]._isOutsideThisEl(e.target),!y&&mt(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function k(){Se=xe(w),st=xe(w,a.draggable),he({sortable:p,name:"change",toEl:t,newIndex:Se,newDraggableIndex:st,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=Ie(n,a.draggable,t,!0),g("dragOver"),j.eventCanceled)return v;if(w.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||p._ignoreWhileAnimating===n)return O(!1);if(ln=!1,u&&!a.disabled&&(c?h||(o=Z!==K):oe===this||(this.lastPutMode=Dr.checkPull(this,u,w,e))&&l.checkPut(this,u,w,e))){if(f=this._getDirection(e,n)==="vertical",i=te(w),g("dragOverValid"),j.eventCanceled)return v;if(o)return Z=K,m(),this._hideClone(),g("revert"),j.eventCanceled||(wt?K.insertBefore(w,wt):K.appendChild(w)),O(!0);var T=Ti(t,a.draggable);if(!T||Cl(e,f,this)&&!T.animated){if(T===w)return O(!1);if(T&&t===e.target&&(n=T),n&&(s=te(n)),Ir(K,t,w,i,n,s,e,!!n)!==!1)return m(),T&&T.nextSibling?t.insertBefore(w,T.nextSibling):t.appendChild(w),Z=t,k(),O(!0)}else if(T&&Dl(e,f,this)){var E=Jt(t,0,a,!0);if(E===w)return O(!1);if(n=E,s=te(n),Ir(K,t,w,i,n,s,e,!1)!==!1)return m(),t.insertBefore(w,E),Z=t,k(),O(!0)}else if(n.parentNode===t){s=te(n);var x=0,P,R=w.parentNode!==t,N=!Ol(w.animated&&w.toRect||i,n.animated&&n.toRect||s,f),H=f?"top":"left",I=Xi(n,"top","top")||Xi(w,"top","top"),se=I?I.scrollTop:void 0;Dt!==n&&(P=s[H],vr=!1,Cr=!N&&a.invertSwap||R),x=jl(e,n,s,f,N?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,Cr,Dt===n);var ae;if(x!==0){var A=xe(w);do A-=x,ae=Z.children[A];while(ae&&(C(ae,"display")==="none"||ae===L))}if(x===0||ae===n)return O(!1);Dt=n,pr=x;var b=n.nextElementSibling,_=!1;_=x===1;var S=Ir(K,t,w,i,n,s,e,_);if(S!==!1)return(S===1||S===-1)&&(_=S===1),ni=!0,setTimeout($l,30),m(),_&&!b?t.appendChild(w):n.parentNode.insertBefore(w,_?b:n),I&&uo(I,0,se-I.scrollTop),Z=w.parentNode,P!==void 0&&!Cr&&(Gr=Math.abs(P-te(n)[H])),k(),O(!0)}if(t.contains(w))return O(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){U(document,"mousemove",this._onTouchMove),U(document,"touchmove",this._onTouchMove),U(document,"pointermove",this._onTouchMove),U(document,"dragover",mt),U(document,"mousemove",mt),U(document,"touchmove",mt)},_offUpEvents:function(){var e=this.el.ownerDocument;U(e,"mouseup",this._onDrop),U(e,"touchend",this._onDrop),U(e,"pointerup",this._onDrop),U(e,"pointercancel",this._onDrop),U(e,"touchcancel",this._onDrop),U(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(Se=xe(w),st=xe(w,n.draggable),_e("drop",this,{evt:e}),Z=w&&w.parentNode,Se=xe(w),st=xe(w,n.draggable),j.eventCanceled){this._nulling();return}Ft=!1,Cr=!1,vr=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ii(this.cloneId),ii(this._dragStartId),this.nativeDraggable&&(U(document,"drop",this),U(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),hr&&C(document.body,"user-select",""),C(w,"transform",""),e&&(or&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),L&&L.parentNode&&L.parentNode.removeChild(L),(K===Z||oe&&oe.lastPutMode!=="clone")&&X&&X.parentNode&&X.parentNode.removeChild(X),w&&(this.nativeDraggable&&U(w,"dragend",this),Ln(w),w.style["will-change"]="",or&&!Ft&&be(w,oe?oe.options.ghostClass:this.options.ghostClass,!1),be(w,this.options.chosenClass,!1),he({sortable:this,name:"unchoose",toEl:Z,newIndex:null,newDraggableIndex:null,originalEvent:e}),K!==Z?(Se>=0&&(he({rootEl:Z,name:"add",toEl:Z,fromEl:K,originalEvent:e}),he({sortable:this,name:"remove",toEl:Z,originalEvent:e}),he({rootEl:Z,name:"sort",toEl:Z,fromEl:K,originalEvent:e}),he({sortable:this,name:"sort",toEl:Z,originalEvent:e})),oe&&oe.save()):Se!==qt&&Se>=0&&(he({sortable:this,name:"update",toEl:Z,originalEvent:e}),he({sortable:this,name:"sort",toEl:Z,originalEvent:e})),j.active&&((Se==null||Se===-1)&&(Se=qt,st=fr),he({sortable:this,name:"end",toEl:Z,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){_e("nulling",this),K=w=Z=L=wt=X=Wr=at=_t=je=or=Se=st=qt=fr=Dt=pr=oe=Dr=j.dragged=j.ghost=j.clone=j.active=null,cn.forEach(function(e){e.checked=!0}),cn.length=jn=In=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":w&&(this._onDragOver(e),xl(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,i=0,s=n.length,o=this.options;i<s;i++)t=n[i],Ie(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||Rl(t));return e},sort:function(e,t){var n={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];Ie(a,this.options.draggable,i,!1)&&(n[s]=a)},this),t&&this.captureAnimationState(),e.forEach(function(s){n[s]&&(i.removeChild(n[s]),i.appendChild(n[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Ie(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var i=Or.modifyOption(this,e,t);typeof i<"u"?n[e]=i:n[e]=t,e==="group"&&vo(n)},destroy:function(){_e("destroy",this);var e=this.el;e[we]=null,U(e,"mousedown",this._onTapStart),U(e,"touchstart",this._onTapStart),U(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(U(e,"dragover",this),U(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),un.splice(un.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!at){if(_e("hideClone",this),j.eventCanceled)return;C(X,"display","none"),this.options.removeCloneOnHide&&X.parentNode&&X.parentNode.removeChild(X),at=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(at){if(_e("showClone",this),j.eventCanceled)return;w.parentNode==K&&!this.options.group.revertClone?K.insertBefore(X,w):wt?K.insertBefore(X,wt):K.appendChild(X),this.options.group.revertClone&&this.animate(w,X),C(X,"display",""),at=!1}}};function xl(r){r.dataTransfer&&(r.dataTransfer.dropEffect="move"),r.cancelable&&r.preventDefault()}function Ir(r,e,t,n,i,s,o,a){var l,u=r[we],c=u.options.onMove,h;return window.CustomEvent&&!Qe&&!Tr?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=r,l.dragged=t,l.draggedRect=n,l.related=i||e,l.relatedRect=s||te(e),l.willInsertAfter=a,l.originalEvent=o,r.dispatchEvent(l),c&&(h=c.call(u,l,o)),h}function Ln(r){r.draggable=!1}function $l(){ni=!1}function Dl(r,e,t){var n=te(Jt(t.el,0,t.options,!0)),i=ho(t.el,t.options,L),s=10;return e?r.clientX<i.left-s||r.clientY<n.top&&r.clientX<n.right:r.clientY<i.top-s||r.clientY<n.bottom&&r.clientX<n.left}function Cl(r,e,t){var n=te(Ti(t.el,t.options.draggable)),i=ho(t.el,t.options,L),s=10;return e?r.clientX>i.right+s||r.clientY>n.bottom&&r.clientX>n.left:r.clientY>i.bottom+s||r.clientX>n.right&&r.clientY>n.top}function jl(r,e,t,n,i,s,o,a){var l=n?r.clientY:r.clientX,u=n?t.height:t.width,c=n?t.top:t.left,h=n?t.bottom:t.right,d=!1;if(!o){if(a&&Gr<u*i){if(!vr&&(pr===1?l>c+u*s/2:l<h-u*s/2)&&(vr=!0),vr)d=!0;else if(pr===1?l<c+Gr:l>h-Gr)return-pr}else if(l>c+u*(1-i)/2&&l<h-u*(1-i)/2)return Il(e)}return d=d||o,d&&(l<c+u*s/2||l>h-u*s/2)?l>c+u/2?1:-1:0}function Il(r){return xe(w)<xe(r)?1:-1}function Rl(r){for(var e=r.tagName+r.className+r.src+r.href+r.textContent,t=e.length,n=0;t--;)n+=e.charCodeAt(t);return n.toString(36)}function Ll(r){cn.length=0;for(var e=r.getElementsByTagName("input"),t=e.length;t--;){var n=e[t];n.checked&&cn.push(n)}}function Jr(r){return setTimeout(r,0)}function ii(r){return clearTimeout(r)}On&&q(document,"touchmove",function(r){(j.active||Ft)&&r.cancelable&&r.preventDefault()});j.utils={on:q,off:U,css:C,find:ao,is:function(e,t){return!!Ie(e,t,e,!1)},extend:ml,throttle:lo,closest:Ie,toggleClass:be,clone:co,index:xe,nextTick:Jr,cancelNextTick:ii,detectDirection:po,getChild:Jt,expando:we};j.get=function(r){return r[we]};j.mount=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(j.utils=He(He({},j.utils),n.utils)),Or.mount(n)})};j.create=function(r,e){return new j(r,e)};j.version=gl;var ee=[],ar,si,oi=!1,Mn,Nn,hn,lr;function Ml(){function r(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return r.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?q(document,"dragover",this._handleAutoScroll):this.options.supportPointer?q(document,"pointermove",this._handleFallbackAutoScroll):n.touches?q(document,"touchmove",this._handleFallbackAutoScroll):q(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?U(document,"dragover",this._handleAutoScroll):(U(document,"pointermove",this._handleFallbackAutoScroll),U(document,"touchmove",this._handleFallbackAutoScroll),U(document,"mousemove",this._handleFallbackAutoScroll)),rs(),Vr(),yl()},nulling:function(){hn=si=ar=oi=lr=Mn=Nn=null,ee.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var i=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(s,o);if(hn=t,n||this.options.forceAutoScrollFallback||Tr||Qe||hr){Un(t,this.options,a,n);var l=ct(a,!0);oi&&(!lr||s!==Mn||o!==Nn)&&(lr&&rs(),lr=setInterval(function(){var u=ct(document.elementFromPoint(s,o),!0);u!==l&&(l=u,Vr()),Un(t,i.options,u,n)},10),Mn=s,Nn=o)}else{if(!this.options.bubbleScroll||ct(a,!0)===Fe()){Vr();return}Un(t,this.options,ct(a,!1),!1)}}},Ke(r,{pluginName:"scroll",initializeByDefault:!0})}function Vr(){ee.forEach(function(r){clearInterval(r.pid)}),ee=[]}function rs(){clearInterval(lr)}var Un=lo(function(r,e,t,n){if(e.scroll){var i=(r.touches?r.touches[0]:r).clientX,s=(r.touches?r.touches[0]:r).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Fe(),u=!1,c;si!==t&&(si=t,Vr(),ar=e.scroll,c=e.scrollFn,ar===!0&&(ar=ct(t,!0)));var h=0,d=ar;do{var f=d,p=te(f),v=p.top,g=p.bottom,m=p.left,O=p.right,k=p.width,T=p.height,E=void 0,x=void 0,P=f.scrollWidth,R=f.scrollHeight,N=C(f),H=f.scrollLeft,I=f.scrollTop;f===l?(E=k<P&&(N.overflowX==="auto"||N.overflowX==="scroll"||N.overflowX==="visible"),x=T<R&&(N.overflowY==="auto"||N.overflowY==="scroll"||N.overflowY==="visible")):(E=k<P&&(N.overflowX==="auto"||N.overflowX==="scroll"),x=T<R&&(N.overflowY==="auto"||N.overflowY==="scroll"));var se=E&&(Math.abs(O-i)<=o&&H+k<P)-(Math.abs(m-i)<=o&&!!H),ae=x&&(Math.abs(g-s)<=o&&I+T<R)-(Math.abs(v-s)<=o&&!!I);if(!ee[h])for(var A=0;A<=h;A++)ee[A]||(ee[A]={});(ee[h].vx!=se||ee[h].vy!=ae||ee[h].el!==f)&&(ee[h].el=f,ee[h].vx=se,ee[h].vy=ae,clearInterval(ee[h].pid),(se!=0||ae!=0)&&(u=!0,ee[h].pid=setInterval((function(){n&&this.layer===0&&j.active._onTouchMove(hn);var b=ee[this.layer].vy?ee[this.layer].vy*a:0,_=ee[this.layer].vx?ee[this.layer].vx*a:0;typeof c=="function"&&c.call(j.dragged.parentNode[we],_,b,r,hn,ee[this.layer].el)!=="continue"||uo(ee[this.layer].el,_,b)}).bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==l&&(d=ct(d,!1)));oi=u}},30),mo=function(e){var t=e.originalEvent,n=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var u=n||s;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,h=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(h)&&(o("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function Oi(){}Oi.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=Jt(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:mo};Ke(Oi,{pluginName:"revertOnSpill"});function Ai(){}Ai.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,i=n||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:mo};Ke(Ai,{pluginName:"removeOnSpill"});j.mount(new Ml);j.mount(Ai,Oi);const Nl="modulepreload",Ul=function(r){return"/github-projects-dashboard/"+r},ns={},Vt=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let o=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=o(t.map(u=>{if(u=Ul(u),u in ns)return;ns[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Nl,c||(d.as="script"),d.crossOrigin="",d.href=u,l&&d.setAttribute("nonce",l),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},Fl=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Vt(async()=>{const{default:n}=await Promise.resolve().then(()=>er);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class Pi extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Bl extends Pi{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ql extends Pi{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Hl extends Pi{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ai;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(ai||(ai={}));var zl=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class Wl{constructor(e,{headers:t={},customFetch:n,region:i=ai.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=Fl(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return zl(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=t;let a={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:u}).catch(p=>{throw new Bl(p)}),h=c.headers.get("x-relay-error");if(h&&h==="true")throw new ql(c);if(!c.ok)throw new Hl(c);let d=((n=c.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),f;return d==="application/json"?f=yield c.json():d==="application/octet-stream"?f=yield c.blob():d==="text/event-stream"?f=c:d==="multipart/form-data"?f=yield c.formData():f=yield c.text(),{data:f,error:null}}catch(i){return{data:null,error:i}}})}}function xi(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Gl(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var ne={},Ct={},jt={},It={},Rt={},Lt={},Jl=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Yt=Jl();const Vl=Yt.fetch,yo=Yt.fetch.bind(Yt),wo=Yt.Headers,Yl=Yt.Request,Kl=Yt.Response,er=Object.freeze(Object.defineProperty({__proto__:null,Headers:wo,Request:Yl,Response:Kl,default:yo,fetch:Vl},Symbol.toStringTag,{value:"Module"})),Xl=Gl(er);var Rr={},is;function bo(){if(is)return Rr;is=1,Object.defineProperty(Rr,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Rr.default=r,Rr}var ss;function Eo(){if(ss)return Lt;ss=1;var r=Lt&&Lt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Lt,"__esModule",{value:!0});const e=r(Xl),t=r(bo());class n{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=Object.assign({},this.headers),this.headers[s]=o,this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var c,h,d;let f=null,p=null,v=null,g=u.status,m=u.statusText;if(u.ok){if(this.method!=="HEAD"){const E=await u.text();E===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=E:p=JSON.parse(E))}const k=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),T=(h=u.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");k&&T&&T.length>1&&(v=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(f={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,v=null,g=406,m="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const k=await u.text();try{f=JSON.parse(k),Array.isArray(f)&&u.status===404&&(p=[],f=null,g=200,m="OK")}catch{u.status===404&&k===""?(g=204,m="No Content"):f={message:k}}if(f&&this.isMaybeSingle&&(!((d=f==null?void 0:f.details)===null||d===void 0)&&d.includes("0 rows"))&&(f=null,g=200,m="OK"),f&&this.shouldThrowOnError)throw new t.default(f)}return{error:f,data:p,count:v,status:g,statusText:m}});return this.shouldThrowOnError||(l=l.catch(u=>{var c,h,d;return{error:{message:`${(c=u==null?void 0:u.name)!==null&&c!==void 0?c:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(d=u==null?void 0:u.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),l.then(s,o)}returns(){return this}overrideTypes(){return this}}return Lt.default=n,Lt}var os;function So(){if(os)return Rt;os=1;var r=Rt&&Rt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Rt,"__esModule",{value:!0});const e=r(Eo());class t extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var c;const h=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),d=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${d}"; options=${h};`,u==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Rt.default=t,Rt}var as;function $i(){if(as)return It;as=1;var r=It&&It.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(It,"__esModule",{value:!0});const e=r(So());class t extends e.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${u}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return It.default=t,It}var ls;function ko(){if(ls)return jt;ls=1;var r=jt&&jt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(jt,"__esModule",{value:!0});const e=r($i());class t{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=s,this.schema=o,this.fetch=a}select(i,{head:s=!1,count:o}={}){const a=s?"HEAD":"GET";let l=!1;const u=(i??"*").split("").map(c=>/\s/.test(c)&&!l?"":(c==='"'&&(l=!l),c)).join("");return this.url.searchParams.set("select",u),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:s,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){const u=i.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const u="POST",c=[`resolution=${o?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(i)){const h=i.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(h.length>0){const d=[...new Set(h)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:s}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const s="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return jt.default=t,jt}var nr={},ir={},us;function Ql(){return us||(us=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.version=void 0,ir.version="0.0.0-automated"),ir}var cs;function Zl(){if(cs)return nr;cs=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.DEFAULT_HEADERS=void 0;const r=Ql();return nr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${r.version}`},nr}var hs;function eu(){if(hs)return Ct;hs=1;var r=Ct&&Ct.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ct,"__esModule",{value:!0});const e=r(ko()),t=r($i()),n=Zl();class i{constructor(o,{headers:a={},schema:l,fetch:u}={}){this.url=o,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=u}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:u=!1,count:c}={}){let h;const d=new URL(`${this.url}/rpc/${o}`);let f;l||u?(h=l?"HEAD":"GET",Object.entries(a).filter(([v,g])=>g!==void 0).map(([v,g])=>[v,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([v,g])=>{d.searchParams.append(v,g)})):(h="POST",f=a);const p=Object.assign({},this.headers);return c&&(p.Prefer=`count=${c}`),new t.default({method:h,url:d,headers:p,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}}return Ct.default=i,Ct}var ds;function tu(){if(ds)return ne;ds=1;var r=ne&&ne.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ne,"__esModule",{value:!0}),ne.PostgrestError=ne.PostgrestBuilder=ne.PostgrestTransformBuilder=ne.PostgrestFilterBuilder=ne.PostgrestQueryBuilder=ne.PostgrestClient=void 0;const e=r(eu());ne.PostgrestClient=e.default;const t=r(ko());ne.PostgrestQueryBuilder=t.default;const n=r($i());ne.PostgrestFilterBuilder=n.default;const i=r(So());ne.PostgrestTransformBuilder=i.default;const s=r(Eo());ne.PostgrestBuilder=s.default;const o=r(bo());return ne.PostgrestError=o.default,ne.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:o.default},ne}var ru=tu();const nu=xi(ru),{PostgrestClient:iu,PostgrestQueryBuilder:uh,PostgrestFilterBuilder:ch,PostgrestTransformBuilder:hh,PostgrestBuilder:dh,PostgrestError:fh}=nu,su="2.11.2",ou={"X-Client-Info":`realtime-js/${su}`},au="1.0.0",To=1e4,lu=1e3;var Wt;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Wt||(Wt={}));var ke;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(ke||(ke={}));var Re;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Re||(Re={}));var li;(function(r){r.websocket="websocket"})(li||(li={}));var St;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(St||(St={}));class uu{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+i));o=o+i;const l=n.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class Oo{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var V;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(V||(V={}));const fs=(r,e,t={})=>{var n;const i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((s,o)=>(s[o]=cu(o,r,e,i),s),{})},cu=(r,e,t,n)=>{const i=e.find(a=>a.name===r),s=i==null?void 0:i.type,o=t[r];return s&&!n.includes(s)?Ao(s,o):ui(o)},Ao=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return pu(e,t)}switch(r){case V.bool:return hu(e);case V.float4:case V.float8:case V.int2:case V.int4:case V.int8:case V.numeric:case V.oid:return du(e);case V.json:case V.jsonb:return fu(e);case V.timestamp:return vu(e);case V.abstime:case V.date:case V.daterange:case V.int4range:case V.int8range:case V.money:case V.reltime:case V.text:case V.time:case V.timestamptz:case V.timetz:case V.tsrange:case V.tstzrange:return ui(e);default:return ui(e)}},ui=r=>r,hu=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},du=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},fu=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},pu=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let s;const o=r.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Ao(e,a))}return r},vu=r=>typeof r=="string"?r.replace(" ","T"):r,Po=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Fn{constructor(e,t,n={},i=To){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ps;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(ps||(ps={}));class gr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gr.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=gr.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=gr.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const h=s[u];if(h){const d=c.map(g=>g.presence_ref),f=h.map(g=>g.presence_ref),p=c.filter(g=>f.indexOf(g.presence_ref)<0),v=h.filter(g=>d.indexOf(g.presence_ref)<0);p.length>0&&(a[u]=p),v.length>0&&(l[u]=v)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},n,i)}static syncDiff(e,t,n,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const h=e[a].map(f=>f.presence_ref),d=c.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...d)}n(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return"metas"in i?t[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[n]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var vs;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(vs||(vs={}));var gs;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(gs||(gs={}));var We;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(We||(We={}));class Di{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=ke.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Fn(this,Re.join,this.params,this.timeout),this.rejoinTimer=new Oo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ke.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ke.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Re.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new gr(this),this.broadcastEndpointURL=Po(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(c=>e==null?void 0:e(We.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(We.CLOSED));const l={},u={broadcast:s,presence:o,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(c=>c.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:c})=>{var h;if(this.socket.setAuth(),c===void 0){e==null||e(We.SUBSCRIBED);return}else{const d=this.bindings.postgres_changes,f=(h=d==null?void 0:d.length)!==null&&h!==void 0?h:0,p=[];for(let v=0;v<f;v++){const g=d[v],{filter:{event:m,schema:O,table:k,filter:T}}=g,E=c&&c[v];if(E&&E.event===m&&E.schema===O&&E.table===k&&E.filter===T)p.push(Object.assign(Object.assign({},g),{id:E.id}));else{this.unsubscribe(),e==null||e(We.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(We.SUBSCRIBED);return}}).receive("error",c=>{e==null||e(We.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(We.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ke.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Re.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const i=new Fn(this,Re.leave,{},e);i.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,t,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Fn(this,e,t,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=Re;if(n&&[a,l,u,c].indexOf(o)>=0&&n!==this._joinRef())return;let d=this._onMessage(o,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var p,v,g;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((g=(v=f.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(f=>f.callback(d,n)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var p,v,g,m,O,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const T=f.id,E=(p=f.filter)===null||p===void 0?void 0:p.event;return T&&((v=t.ids)===null||v===void 0?void 0:v.includes(T))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((g=t.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const T=(O=(m=f==null?void 0:f.filter)===null||m===void 0?void 0:m.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return T==="*"||T===((k=t==null?void 0:t.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const p=d.data,{schema:v,table:g,commit_timestamp:m,type:O,errors:k}=p;d=Object.assign(Object.assign({},{schema:v,table:g,commit_timestamp:m,eventType:O,new:{},old:{},errors:k}),this._getPayloadRecords(p))}f.callback(d,n)})}_isClosed(){return this.state===ke.closed}_isJoined(){return this.state===ke.joined}_isJoining(){return this.state===ke.joining}_isLeaving(){return this.state===ke.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&Di.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Re.close,{},e)}_onError(e){this._on(Re.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ke.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=fs(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=fs(e.columns,e.old_record)),t}}const gu=()=>{},_u=typeof WebSocket<"u",mu=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yu{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=ou,this.params={},this.timeout=To,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=gu,this.conn=null,this.sendBuffer=[],this.serializer=new uu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>Vt(async()=>{const{default:l}=await Promise.resolve().then(()=>er);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${li.websocket}`,this.httpEndpoint=Po(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Oo(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(_u){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new wu(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Vt(async()=>{const{default:e}=await import("./browser-stl2PXXX.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:au}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Wt.connecting:return St.Connecting;case Wt.open:return St.Open;case Wt.closing:return St.Closing;default:return St.Closed}}isConnected(){return this.connectionState()===St.Open}channel(e,t={config:{}}){const n=new Di(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let n=null;try{n=JSON.parse(atob(t.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=t,this.channels.forEach(i=>{t&&i.updateJoinPayload({access_token:t}),i.joinedOnce&&i._isJoined()&&i._push(Re.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(lu,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:i,payload:s,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${n} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(n)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Re.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([mu],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class wu{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Wt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class Ci extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ie(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class bu extends Ci{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ci extends Ci{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Eu=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const xo=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Vt(async()=>{const{default:n}=await Promise.resolve().then(()=>er);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},Su=()=>Eu(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Vt(()=>Promise.resolve().then(()=>er),void 0)).Response:Response}),hi=r=>{if(Array.isArray(r))return r.map(t=>hi(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=hi(n)}),e};var Ot=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const Bn=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),ku=(r,e,t)=>Ot(void 0,void 0,void 0,function*(){const n=yield Su();r instanceof n&&!(t!=null&&t.noResolveJson)?r.json().then(i=>{e(new bu(Bn(i),r.status||500))}).catch(i=>{e(new ci(Bn(i),i))}):e(new ci(Bn(r),r))}),Tu=(r,e,t,n)=>{const i={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),t))};function Ar(r,e,t,n,i,s){return Ot(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,Tu(e,n,i,s)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>ku(l,a,n))})})}function dn(r,e,t,n){return Ot(this,void 0,void 0,function*(){return Ar(r,"GET",e,t,n)})}function ot(r,e,t,n,i){return Ot(this,void 0,void 0,function*(){return Ar(r,"POST",e,n,i,t)})}function Ou(r,e,t,n,i){return Ot(this,void 0,void 0,function*(){return Ar(r,"PUT",e,n,i,t)})}function Au(r,e,t,n){return Ot(this,void 0,void 0,function*(){return Ar(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function $o(r,e,t,n,i){return Ot(this,void 0,void 0,function*(){return Ar(r,"DELETE",e,n,i,t)})}var me=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const Pu={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_s={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class xu{constructor(e,t={},n,i){this.url=e,this.headers=t,this.bucketId=n,this.fetch=xo(i)}uploadOrUpdate(e,t,n,i){return me(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},_s),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),d=yield h.json();return h.ok?{data:{path:u,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(s){if(ie(s))return{data:null,error:s};throw s}})}upload(e,t,n){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,i){return me(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:_s.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),d=yield h.json();return h.ok?{data:{path:s,fullPath:d.Key},error:null}:{data:null,error:d}}catch(l){if(ie(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return me(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield ot(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new Ci("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}})}update(e,t,n){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return me(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(ie(i))return{data:null,error:i};throw i}})}copy(e,t,n){return me(this,void 0,void 0,function*(){try{return{data:{path:(yield ot(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(ie(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,n){return me(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield ot(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(ie(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,n){return me(this,void 0,void 0,function*(){try{const i=yield ot(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(ie(i))return{data:null,error:i};throw i}})}download(e,t){return me(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield dn(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(ie(a))return{data:null,error:a};throw a}})}info(e){return me(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield dn(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:hi(n),error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}})}exists(e){return me(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Au(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ie(n)&&n instanceof ci){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(e){return me(this,void 0,void 0,function*(){try{return{data:yield $o(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}})}list(e,t,n){return me(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Pu),t),{prefix:e||""});return{data:yield ot(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(ie(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const $u="2.7.1",Du={"X-Client-Info":`storage-js/${$u}`};var Mt=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class Cu{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Du),t),this.fetch=xo(n)}listBuckets(){return Mt(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ie(e))return{data:null,error:e};throw e}})}getBucket(e){return Mt(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Mt(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Mt(this,void 0,void 0,function*(){try{return{data:yield Ou(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Mt(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Mt(this,void 0,void 0,function*(){try{return{data:yield $o(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}})}}class ju extends Cu{constructor(e,t={},n){super(e,t,n)}from(e){return new xu(this.url,this.headers,e,this.fetch)}}const Iu="2.49.4";let ur="";typeof Deno<"u"?ur="deno":typeof document<"u"?ur="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ur="react-native":ur="node";const Ru={"X-Client-Info":`supabase-js-${ur}/${Iu}`},Lu={headers:Ru},Mu={schema:"public"},Nu={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Uu={};var Fu=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const Bu=r=>{let e;return r?e=r:typeof fetch>"u"?e=yo:e=fetch,(...t)=>e(...t)},qu=()=>typeof Headers>"u"?wo:Headers,Hu=(r,e,t)=>{const n=Bu(t),i=qu();return(s,o)=>Fu(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:r;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",r),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(s,Object.assign(Object.assign({},o),{headers:u}))})};var zu=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function Wu(r){return r.replace(/\/$/,"")}function Gu(r,e){const{db:t,auth:n,realtime:i,global:s}=r,{db:o,auth:a,realtime:l,global:u}=e,c={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},u),s),accessToken:()=>zu(this,void 0,void 0,function*(){return""})};return r.accessToken?c.accessToken=r.accessToken:delete c.accessToken,c}const Do="2.69.1",Bt=30*1e3,di=3,qn=di*Bt,Ju="http://localhost:9999",Vu="supabase.auth.token",Yu={"X-Client-Info":`gotrue-js/${Do}`},fi="X-Supabase-Api-Version",Co={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ku=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Xu=6e5;class ji extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function M(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Qu extends ji{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function Zu(r){return M(r)&&r.name==="AuthApiError"}class jo extends ji{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class pt extends ji{constructor(e,t,n,i){super(e,n,i),this.name=t,this.status=n}}class tt extends pt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ec(r){return M(r)&&r.name==="AuthSessionMissingError"}class Hn extends pt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Lr extends pt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Mr extends pt{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function tc(r){return M(r)&&r.name==="AuthImplicitGrantRedirectError"}class ms extends pt{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pi extends pt{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function zn(r){return M(r)&&r.name==="AuthRetryableFetchError"}class ys extends pt{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class _r extends pt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ws="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bs=` 	
\r=`.split(""),rc=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<bs.length;e+=1)r[bs[e].charCodeAt(0)]=-2;for(let e=0;e<ws.length;e+=1)r[ws[e].charCodeAt(0)]=e;return r})();function Io(r,e,t){const n=rc[r];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Es(r){const e=[],t=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{sc(o,n,t)};for(let o=0;o<r.length;o+=1)Io(r.charCodeAt(o),i,s);return e.join("")}function nc(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function ic(r,e){for(let t=0;t<r.length;t+=1){let n=r.charCodeAt(t);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(r.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}nc(n,e)}}function sc(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let n=1;n<6;n+=1)if((r>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function oc(r){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<r.length;i+=1)Io(r.charCodeAt(i),t,n);return new Uint8Array(e)}function ac(r){const e=[];return ic(r,t=>e.push(t)),new Uint8Array(e)}function lc(r){return Math.round(Date.now()/1e3)+r}function uc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Me=()=>typeof window<"u"&&typeof document<"u",yt={tested:!1,writable:!1},mr=()=>{if(!Me())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yt.tested)return yt.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),yt.tested=!0,yt.writable=!0}catch{yt.tested=!0,yt.writable=!1}return yt.writable};function cc(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((n,i)=>{e[i]=n}),e}const Ro=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Vt(async()=>{const{default:n}=await Promise.resolve().then(()=>er);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},hc=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Lo=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Nr=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ur=async(r,e)=>{await r.removeItem(e)};class An{constructor(){this.promise=new An.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}An.promiseConstructor=Promise;function Wn(r){const e=r.split(".");if(e.length!==3)throw new _r("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Ku.test(e[n]))throw new _r("JWT not in base64url format");return{header:JSON.parse(Es(e[0])),payload:JSON.parse(Es(e[1])),signature:oc(e[2]),raw:{header:e[0],payload:e[1]}}}async function dc(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function fc(r,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await r(s);if(!e(s,null,o)){n(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function pc(r){return("0"+r.toString(16)).substr(-2)}function vc(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,pc).join("")}async function gc(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function _c(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await gc(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Nt(r,e,t=!1){const n=vc();let i=n;t&&(i+="/PASSWORD_RECOVERY"),await Lo(r,`${e}-code-verifier`,i);const s=await _c(n);return[s,n===s?"plain":"s256"]}const mc=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yc(r){const e=r.headers.get(fi);if(!e||!e.match(mc))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function wc(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function bc(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Ec=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const bt=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Sc=[502,503,504];async function Ss(r){var e;if(!hc(r))throw new pi(bt(r),0);if(Sc.includes(r.status))throw new pi(bt(r),r.status);let t;try{t=await r.json()}catch(s){throw new jo(bt(s),s)}let n;const i=yc(r);if(i&&i.getTime()>=Co["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new ys(bt(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new tt}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new ys(bt(t),r.status,t.weak_password.reasons);throw new Qu(bt(t),r.status||500,n)}const kc=(r,e,t,n)=>{const i={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};async function F(r,e,t,n){var i;const s=Object.assign({},n==null?void 0:n.headers);s[fi]||(s[fi]=Co["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Tc(r,e,t+a,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function Tc(r,e,t,n,i,s){const o=kc(e,n,i,s);let a;try{a=await r(t,Object.assign({},o))}catch(l){throw console.error(l),new pi(bt(l),0)}if(a.ok||await Ss(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await Ss(l)}}function rt(r){var e;let t=null;xc(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=lc(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function ks(r){const e=rt(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function lt(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Oc(r){return{data:r,error:null}}function Ac(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:s}=r,o=Ec(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Pc(r){return r}function xc(r){return r.access_token&&r.refresh_token&&r.expires_in}var $c=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class Dc{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Ro(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await F(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await F(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:lt})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=$c(e,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await F(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Ac,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(M(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await F(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:lt})}catch(t){if(M(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await F(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Pc});if(c.error)throw c.error;const h=await c.json(),d=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(p=>{const v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(p.split(";")[1].split("=")[1]);u[`${g}Page`]=v}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(M(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await F(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:lt})}catch(t){if(M(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await F(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:lt})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await F(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:lt})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await F(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:n}}catch(t){if(M(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await F(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(M(t))return{data:null,error:t};throw t}}}const Cc={getItem:r=>mr()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{mr()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{mr()&&globalThis.localStorage.removeItem(r)}};function Ts(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function jc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ut={debug:!!(globalThis&&mr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Mo extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ic extends Mo{}async function Rc(r,e,t){Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,i.name);try{return await t()}finally{Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,i.name)}}else{if(e===0)throw Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Ic(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Ut.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}jc();const Lc={url:Ju,storageKey:Vu,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Yu,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Os(r,e,t){return await t()}class Sr{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Sr.nextInstanceID,Sr.nextInstanceID+=1,this.instanceID>0&&Me()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Lc),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Dc({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Ro(i.fetch),this.lock=i.lock||Os,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Me()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Rc:this.lock=Os,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:mr()?this.storage=Cc:(this.memoryStorage={},this.storage=Ts(this.memoryStorage)):(this.memoryStorage={},this.storage=Ts(this.memoryStorage)),Me()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Do}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=cc(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Me()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),tc(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return M(t)?{error:t}:{error:new jo("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,i;try{const s=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:rt}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(M(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,n,i;try{let s;if("email"in e){const{email:c,password:h,options:d}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Nt(this.storage,this.storageKey)),s=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:c,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:p},xform:rt})}else if("phone"in e){const{phone:c,password:h,options:d}=e;s=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},channel:(i=d==null?void 0:d.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:rt})}else throw new Lr("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(M(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ks})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ks})}else throw new Lr("You must provide either an email or phone number and a password");const{data:n,error:i}=t;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Hn}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(t){if(M(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Nr(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(t??"").split("/");try{const{data:s,error:o}=await F(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:rt});if(await Ur(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Hn}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(M(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:n,token:i,access_token:s,nonce:o}=e,a=await F(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:rt}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Hn}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(M(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Nt(this.storage,this.storageKey));const{error:h}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Lr("You must provide either an email or phone number.")}catch(a){if(M(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await F(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:rt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(M(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,n,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Nt(this.storage,this.storageKey)),await F(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:Oc})}catch(s){if(M(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new tt;const{error:i}=await F(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(M(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:o}=await F(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:o,error:a}=await F(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Lr("You must provide either an email or phone number and a type")}catch(t){if(M(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Nr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<qn:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:lt}):await this._useSession(async t=>{var n,i,s;const{data:o,error:a}=t;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new tt}:await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:lt})})}catch(t){if(M(t))return ec(t)&&(await this._removeSession(),await Ur(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new tt;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Nt(this.storage,this.storageKey));const{data:u,error:c}=await F(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:lt});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new tt;const t=Date.now()/1e3;let n=t,i=!0,s=null;const{payload:o}=Wn(e.access_token);if(o.exp&&(n=o.exp,i=n<=t),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(M(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new tt;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(M(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Me())throw new Mr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Mr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new ms("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Mr("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ms("No code detected.");const{data:O,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!s||!a||!o||!u)throw new Mr("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(a);let d=c+h;l&&(d=parseInt(l));const f=d-c;f*1e3<=Bt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const p=d-h;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,c);const{data:v,error:g}=await this._getUser(s);if(g)throw g;const m={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:d,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(M(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Nr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s)return{error:s};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Zu(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Ur(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=uc(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Nt(this.storage,this.storageKey,!0));try{return await F(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(M(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(M(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:i}=await this._useSession(async s=>{var o,a,l,u,c;const{data:h,error:d}=s;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await F(this.fetch,"GET",f,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return Me()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(M(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,i;const{data:s,error:o}=t;if(o)throw o;return await F(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(M(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await fc(async i=>(i>0&&await dc(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await F(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:rt})),(i,s)=>{const o=200*Math.pow(2,i);return s&&zn(s)&&Date.now()+o-n<Bt})}catch(n){if(this._debug(t,"error",n),M(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Me()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Nr(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<qn;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${qn}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:s}=await this._callRefreshToken(n.refresh_token);s&&(console.error(s),zn(s)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new tt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new An;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new tt;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),M(s)){const o={session:null,error:s};return zn(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Lo(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ur(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Me()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Bt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Bt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Bt}ms, refresh threshold is ${di} ticks`),i<=di&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Mo)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Me()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const i=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await Nt(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;return s?{data:null,error:s}:await F(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(M(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await F(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(M(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:a}=await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(M(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;return s?{data:null,error:s}:await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(M(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Wn(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(t=i.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+Xu>Date.now()))return n;const{data:i,error:s}=await F(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!i.keys||i.keys.length===0)throw new _r("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),n=i.keys.find(o=>o.kid===e),!n)throw new _r("No matching signing key found in JWKS");return n}async getClaims(e,t={keys:[]}){try{let n=e;if(!n){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};n=f.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=Wn(n);if(wc(s.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:s,header:i,signature:o},error:null}}const u=bc(i.alg),c=await this.fetchJwk(i.kid,t),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,ac(`${a}.${l}`)))throw new _r("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}}}Sr.nextInstanceID=0;const Mc=Sr;class Nc extends Mc{constructor(e){super(e)}}var Uc=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class Fc{constructor(e,t,n){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=Wu(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:Mu,realtime:Uu,auth:Object.assign(Object.assign({},Nu),{storageKey:l}),global:Lu},c=Gu(n??{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=Hu(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new iu(`${a}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new Wl(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ju(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Uc(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,storageKey:s,flowType:o,lock:a,debug:l},u,c){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Nc({url:this.authUrl,headers:Object.assign(Object.assign({},h),u),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new yu(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Bc=(r,e,t)=>new Fc(r,e,t),Fr=Bc("https://ptmcrrrrdsjgzfdawzkg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB0bWNycnJyZHNqZ3pmZGF3emtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUwMDI4MzYsImV4cCI6MjA2MDU3ODgzNn0.E_jnXoiniR8-X_VBw3BebpeuBCSTGtZb5qgzMONcvDI");function qc(r){const e=r-1;return e*e*e+1}function Hc(r,{delay:e=0,duration:t=400,easing:n=qc,axis:i="y"}={}){const s=getComputedStyle(r),o=+s.opacity,a=i==="y"?"height":"width",l=parseFloat(s[a]),u=i==="y"?["top","bottom"]:["left","right"],c=u.map(m=>`${m[0].toUpperCase()}${m.slice(1)}`),h=parseFloat(s[`padding${c[0]}`]),d=parseFloat(s[`padding${c[1]}`]),f=parseFloat(s[`margin${c[0]}`]),p=parseFloat(s[`margin${c[1]}`]),v=parseFloat(s[`border${c[0]}Width`]),g=parseFloat(s[`border${c[1]}Width`]);return{delay:e,duration:t,easing:n,css:m=>`overflow: hidden;opacity: ${Math.min(m*20,1)*o};${a}: ${m*l}px;padding-${u[0]}: ${m*h}px;padding-${u[1]}: ${m*d}px;margin-${u[0]}: ${m*f}px;margin-${u[1]}: ${m*p}px;border-${u[0]}-width: ${m*v}px;border-${u[1]}-width: ${m*g}px;min-${a}: 0`}}var Yr={exports:{}},zc=Yr.exports,As;function Wc(){return As||(As=1,function(r,e){(function(t,n){r.exports=n()})(zc,function(){var t=1e3,n=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",u="day",c="week",h="month",d="quarter",f="year",p="date",v="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,O={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(A){var b=["th","st","nd","rd"],_=A%100;return"["+A+(b[(_-20)%10]||b[_]||b[0])+"]"}},k=function(A,b,_){var S=String(A);return!S||S.length>=b?A:""+Array(b+1-S.length).join(_)+A},T={s:k,z:function(A){var b=-A.utcOffset(),_=Math.abs(b),S=Math.floor(_/60),y=_%60;return(b<=0?"+":"-")+k(S,2,"0")+":"+k(y,2,"0")},m:function A(b,_){if(b.date()<_.date())return-A(_,b);var S=12*(_.year()-b.year())+(_.month()-b.month()),y=b.clone().add(S,h),$=_-y<0,D=b.clone().add(S+($?-1:1),h);return+(-(S+(_-y)/($?y-D:D-y))||0)},a:function(A){return A<0?Math.ceil(A)||0:Math.floor(A)},p:function(A){return{M:h,y:f,w:c,d:u,D:p,h:l,m:a,s:o,ms:s,Q:d}[A]||String(A||"").toLowerCase().replace(/s$/,"")},u:function(A){return A===void 0}},E="en",x={};x[E]=O;var P="$isDayjsObject",R=function(A){return A instanceof se||!(!A||!A[P])},N=function A(b,_,S){var y;if(!b)return E;if(typeof b=="string"){var $=b.toLowerCase();x[$]&&(y=$),_&&(x[$]=_,y=$);var D=b.split("-");if(!y&&D.length>1)return A(D[0])}else{var B=b.name;x[B]=b,y=B}return!S&&y&&(E=y),y||!S&&E},H=function(A,b){if(R(A))return A.clone();var _=typeof b=="object"?b:{};return _.date=A,_.args=arguments,new se(_)},I=T;I.l=N,I.i=R,I.w=function(A,b){return H(A,{locale:b.$L,utc:b.$u,x:b.$x,$offset:b.$offset})};var se=function(){function A(_){this.$L=N(_.locale,null,!0),this.parse(_),this.$x=this.$x||_.x||{},this[P]=!0}var b=A.prototype;return b.parse=function(_){this.$d=function(S){var y=S.date,$=S.utc;if(y===null)return new Date(NaN);if(I.u(y))return new Date;if(y instanceof Date)return new Date(y);if(typeof y=="string"&&!/Z$/i.test(y)){var D=y.match(g);if(D){var B=D[2]-1||0,G=(D[7]||"0").substring(0,3);return $?new Date(Date.UTC(D[1],B,D[3]||1,D[4]||0,D[5]||0,D[6]||0,G)):new Date(D[1],B,D[3]||1,D[4]||0,D[5]||0,D[6]||0,G)}}return new Date(y)}(_),this.init()},b.init=function(){var _=this.$d;this.$y=_.getFullYear(),this.$M=_.getMonth(),this.$D=_.getDate(),this.$W=_.getDay(),this.$H=_.getHours(),this.$m=_.getMinutes(),this.$s=_.getSeconds(),this.$ms=_.getMilliseconds()},b.$utils=function(){return I},b.isValid=function(){return this.$d.toString()!==v},b.isSame=function(_,S){var y=H(_);return this.startOf(S)<=y&&y<=this.endOf(S)},b.isAfter=function(_,S){return H(_)<this.startOf(S)},b.isBefore=function(_,S){return this.endOf(S)<H(_)},b.$g=function(_,S,y){return I.u(_)?this[S]:this.set(y,_)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(_,S){var y=this,$=!!I.u(S)||S,D=I.p(_),B=function(gt,ge){var Ze=I.w(y.$u?Date.UTC(y.$y,ge,gt):new Date(y.$y,ge,gt),y);return $?Ze:Ze.endOf(u)},G=function(gt,ge){return I.w(y.toDate()[gt].apply(y.toDate("s"),($?[0,0,0,0]:[23,59,59,999]).slice(ge)),y)},re=this.$W,le=this.$M,Oe=this.$D,At="set"+(this.$u?"UTC":"");switch(D){case f:return $?B(1,0):B(31,11);case h:return $?B(1,le):B(0,le+1);case c:var vt=this.$locale().weekStart||0,tr=(re<vt?re+7:re)-vt;return B($?Oe-tr:Oe+(6-tr),le);case u:case p:return G(At+"Hours",0);case l:return G(At+"Minutes",1);case a:return G(At+"Seconds",2);case o:return G(At+"Milliseconds",3);default:return this.clone()}},b.endOf=function(_){return this.startOf(_,!1)},b.$set=function(_,S){var y,$=I.p(_),D="set"+(this.$u?"UTC":""),B=(y={},y[u]=D+"Date",y[p]=D+"Date",y[h]=D+"Month",y[f]=D+"FullYear",y[l]=D+"Hours",y[a]=D+"Minutes",y[o]=D+"Seconds",y[s]=D+"Milliseconds",y)[$],G=$===u?this.$D+(S-this.$W):S;if($===h||$===f){var re=this.clone().set(p,1);re.$d[B](G),re.init(),this.$d=re.set(p,Math.min(this.$D,re.daysInMonth())).$d}else B&&this.$d[B](G);return this.init(),this},b.set=function(_,S){return this.clone().$set(_,S)},b.get=function(_){return this[I.p(_)]()},b.add=function(_,S){var y,$=this;_=Number(_);var D=I.p(S),B=function(le){var Oe=H($);return I.w(Oe.date(Oe.date()+Math.round(le*_)),$)};if(D===h)return this.set(h,this.$M+_);if(D===f)return this.set(f,this.$y+_);if(D===u)return B(1);if(D===c)return B(7);var G=(y={},y[a]=n,y[l]=i,y[o]=t,y)[D]||1,re=this.$d.getTime()+_*G;return I.w(re,this)},b.subtract=function(_,S){return this.add(-1*_,S)},b.format=function(_){var S=this,y=this.$locale();if(!this.isValid())return y.invalidDate||v;var $=_||"YYYY-MM-DDTHH:mm:ssZ",D=I.z(this),B=this.$H,G=this.$m,re=this.$M,le=y.weekdays,Oe=y.months,At=y.meridiem,vt=function(ge,Ze,rr,Pr){return ge&&(ge[Ze]||ge(S,$))||rr[Ze].slice(0,Pr)},tr=function(ge){return I.s(B%12||12,ge,"0")},gt=At||function(ge,Ze,rr){var Pr=ge<12?"AM":"PM";return rr?Pr.toLowerCase():Pr};return $.replace(m,function(ge,Ze){return Ze||function(rr){switch(rr){case"YY":return String(S.$y).slice(-2);case"YYYY":return I.s(S.$y,4,"0");case"M":return re+1;case"MM":return I.s(re+1,2,"0");case"MMM":return vt(y.monthsShort,re,Oe,3);case"MMMM":return vt(Oe,re);case"D":return S.$D;case"DD":return I.s(S.$D,2,"0");case"d":return String(S.$W);case"dd":return vt(y.weekdaysMin,S.$W,le,2);case"ddd":return vt(y.weekdaysShort,S.$W,le,3);case"dddd":return le[S.$W];case"H":return String(B);case"HH":return I.s(B,2,"0");case"h":return tr(1);case"hh":return tr(2);case"a":return gt(B,G,!0);case"A":return gt(B,G,!1);case"m":return String(G);case"mm":return I.s(G,2,"0");case"s":return String(S.$s);case"ss":return I.s(S.$s,2,"0");case"SSS":return I.s(S.$ms,3,"0");case"Z":return D}return null}(ge)||D.replace(":","")})},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(_,S,y){var $,D=this,B=I.p(S),G=H(_),re=(G.utcOffset()-this.utcOffset())*n,le=this-G,Oe=function(){return I.m(D,G)};switch(B){case f:$=Oe()/12;break;case h:$=Oe();break;case d:$=Oe()/3;break;case c:$=(le-re)/6048e5;break;case u:$=(le-re)/864e5;break;case l:$=le/i;break;case a:$=le/n;break;case o:$=le/t;break;default:$=le}return y?$:I.a($)},b.daysInMonth=function(){return this.endOf(h).$D},b.$locale=function(){return x[this.$L]},b.locale=function(_,S){if(!_)return this.$L;var y=this.clone(),$=N(_,S,!0);return $&&(y.$L=$),y},b.clone=function(){return I.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},A}(),ae=se.prototype;return H.prototype=ae,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",u],["$M",h],["$y",f],["$D",p]].forEach(function(A){ae[A[1]]=function(b){return this.$g(b,A[0],A[1])}}),H.extend=function(A,b){return A.$i||(A(b,se,H),A.$i=!0),H},H.locale=N,H.isDayjs=R,H.unix=function(A){return H(1e3*A)},H.en=x[E],H.Ls=x,H.p={},H})}(Yr)),Yr.exports}var Gc=Wc();const Gn=xi(Gc);var Kr={exports:{}},Jc=Kr.exports,Ps;function Vc(){return Ps||(Ps=1,function(r,e){(function(t,n){r.exports=n()})(Jc,function(){return function(t,n,i){t=t||{};var s=n.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(u,c,h,d){return s.fromToBase(u,c,h,d)}i.en.relativeTime=o,s.fromToBase=function(u,c,h,d,f){for(var p,v,g,m=h.$locale().relativeTime||o,O=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],k=O.length,T=0;T<k;T+=1){var E=O[T];E.d&&(p=d?i(u).diff(h,E.d,!0):h.diff(u,E.d,!0));var x=(t.rounding||Math.round)(Math.abs(p));if(g=p>0,x<=E.r||!E.r){x<=1&&T>0&&(E=O[T-1]);var P=m[E.l];f&&(x=f(""+x)),v=typeof P=="string"?P.replace("%d",x):P(x,c,E.l,g);break}}if(c)return v;var R=g?m.future:m.past;return typeof R=="function"?R(v):R.replace("%s",v)},s.to=function(u,c){return a(u,c,this,!0)},s.from=function(u,c){return a(u,c,this)};var l=function(u){return u.$u?i.utc():i()};s.toNow=function(u){return this.to(l(this),u)},s.fromNow=function(u){return this.from(l(this),u)}}})}(Kr)),Kr.exports}var Yc=Vc();const Kc=xi(Yc);var Xc=ze("<div><span>Closed:</span> <span> </span></div>"),Qc=ze("<div><span>Updated:</span> <span> </span></div>"),Zc=ze('<div class="mt-2 text-xs space-y-1"><div><span> </span></div> <!> <div><span>Created:</span> <span> </span></div> <div><span> </span></div></div>'),eh=ze('<div class="p-2 bg-white text-left rounded border shadow-sm cursor-default"><a target="_blank" class="hover:underline text-blue-600 block"> </a> <div class="text-sm italic text-gray-500 mt-0.5"><!></div> <button class="text-sm mt-1 flex items-center gap-1 px-1 py-0.5 rounded hover:bg-gray-100 transition-colors"><span> </span> Details</button> <!></div>');function th(r,e){_n(e,!1);let t=Hr(e,"project",8);Gn.extend(Kc);let n=Gt(!1);const i=()=>{ce(n,!z(n))},s=k=>k?Gn(k).format("D MMM YYYY HH:mm"):"",o=k=>k?Gn(k).fromNow():"";Si();var a=eh(),l=Q(a),u=Q(l),c=de(l,2),h=Q(c);{var d=k=>{var T=Bi();nt(E=>Pe(T,`Closed ${E??""}`),[()=>o(t().closedAt)],Ne),$e(k,T)},f=k=>{var T=Bi();nt(E=>Pe(T,`Updated ${E??""}`),[()=>o(t().updatedAt)],Ne),$e(k,T)};cr(h,k=>{t().closed?k(d):k(f,!1)})}var p=de(c,2),v=Q(p),g=Q(v),m=de(p,2);{var O=k=>{var T=Zc(),E=Q(T),x=Q(E),P=Q(x),R=de(E,2);{var N=S=>{var y=Xc(),$=de(Q(y),2),D=Q($);nt((B,G)=>Pe(D,`${B??""} (${G??""})`),[()=>s(t().closedAt),()=>o(t().closedAt)],Ne),$e(S,y)},H=S=>{var y=Qc(),$=de(Q(y),2),D=Q($);nt((B,G)=>Pe(D,`${B??""} (${G??""})`),[()=>s(t().updatedAt),()=>o(t().updatedAt)],Ne),$e(S,y)};cr(R,S=>{t().closed?S(N):S(H,!1)})}var I=de(R,2),se=de(Q(I),2),ae=Q(se),A=de(I,2),b=Q(A),_=Q(b);nt((S,y)=>{Pe(P,t().public?"Public":"Private"),Pe(ae,`${S??""} (${y??""})`),Pe(_,t().id)},[()=>s(t().createdAt),()=>o(t().createdAt)],Ne),ol(3,T,()=>Hc),$e(k,T)};cr(m,k=>{z(n)&&k(O)})}nt(()=>{Za(l,"href",t().url),Pe(u,t().title),Pe(g,z(n)?"":"")}),Zn("click",p,i),$e(r,a),mn()}var rh=ze('<div class="bg-gray-100 p-3 rounded shadow flex flex-col"><h2 class="text-lg text-left font-semibold mb-2 capitalize"> <span class="text-gray-500 text-sm"> </span></h2> <div class="space-y-2 min-h-[50px]"></div></div>');function Jn(r,e){_n(e,!1);let t=Hr(e,"title",8),n=Hr(e,"projects",24,()=>[]),i=Hr(e,"bindRef",8,null),s=Gt();ka(()=>(to(i()),z(s)),()=>{i()&&i().set(z(s))}),Ta(),Si();var o=rh(),a=Q(o),l=Q(a),u=de(l),c=Q(u),h=de(a,2);Ja(h,5,n,d=>d.id,(d,f)=>{th(d,{get project(){return z(f)}})}),al(h,d=>ce(s,d),()=>z(s)),nt(()=>{Pe(l,`${t()??""} `),Pe(c,`(${n().length??""})`)}),$e(r,o),mn()}var nh=ze('<button class="px-4 py-2 rounded shadow">Log in with GitHub</button>'),ih=ze("<p>Loading projects...</p>"),sh=ze('<div class="grid grid-cols-1 sm:grid-cols-3 gap-4 items-stretch"><!> <!> <!></div>'),oh=ze('<div class="mb-4 flex justify-between items-center"><p class="text-sm"> </p> <button class="text-sm text-red-600">Log out</button></div> <!>',1),ah=ze('<main class="p-4 text-gray-800"><!></main>');function lh(r,e){_n(e,!1);let t=Gt(null),n=null,i=Gt([]),s={};const o=["todo","doing","done"];let a=xn(null),l=xn(null),u=xn(null);const c="https://api.github.com/graphql",h=async()=>{await Fr.auth.signInWithOAuth({provider:"github",options:{redirectTo:window.location.origin+window.location.pathname,scopes:"repo read:user read:project"}})},d=async()=>{await Fr.auth.signOut(),ce(t,null),n=null},f=async()=>{const R=await(await fetch(c,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({query:`{
      viewer {
        projectsV2(first: 50) {
          nodes {
            id
            title
            url
            closed
            createdAt
            updatedAt
            closedAt
            public
          }
        }
      }
    }`})})).json();console.log("GitHub response:",R),ce(i,R.data.viewer.projectsV2.nodes),p(),g()},p=()=>{const x=localStorage.getItem("projectStatuses");x&&(s=JSON.parse(x))},v=()=>{localStorage.setItem("projectStatuses",JSON.stringify(s))};function g(){const x={todo:$n(a),doing:$n(l),done:$n(u)};for(const P of o){const R=x[P];R&&j.create(R,{group:"columns",animation:150,swapThreshold:.5,ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",onEnd:N=>{var I,se;const H=(se=(I=N.item)==null?void 0:I.dataset)==null?void 0:se.id;H&&(s[H]=P,v())}})}}cl(async()=>{const{data:x}=await Fr.auth.getSession();ce(t,x.session),Fr.auth.onAuthStateChange((P,R)=>{ce(t,R),n=R==null?void 0:R.provider_token,n&&f()}),z(t)&&(n=z(t).provider_token,await f())});const m=x=>z(i).filter(P=>(s[P.id]||"todo")===x);Si();var O=ah(),k=Q(O);{var T=x=>{var P=nh();Zn("click",P,h),$e(x,P)},E=x=>{var P=oh(),R=ya(P),N=Q(R),H=Q(N),I=de(N,2),se=de(R,2);{var ae=b=>{var _=ih();$e(b,_)},A=b=>{var _=sh(),S=Q(_);const y=Ne(()=>m(o[0]));Jn(S,{get title(){return o[0]},get projects(){return z(y)},bindRef:a});var $=de(S,2);const D=Ne(()=>m(o[1]));Jn($,{get title(){return o[1]},get projects(){return z(D)},bindRef:l});var B=de($,2);const G=Ne(()=>m(o[2]));Jn(B,{get title(){return o[2]},get projects(){return z(G)},bindRef:u}),$e(b,_)};cr(se,b=>{z(i).length===0?b(ae):b(A,!1)})}nt(()=>Pe(H,`Signed in as ${z(t).user.email??""}`)),Zn("click",I,d),$e(x,P)};cr(k,x=>{z(t)?x(E,!1):x(T)})}$e(r,O),mn()}Ha(lh,{target:document.getElementById("app")});export{xi as g};
